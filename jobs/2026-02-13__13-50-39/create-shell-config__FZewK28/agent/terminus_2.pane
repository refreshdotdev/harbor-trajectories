[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:~# asciinema rec --stdin /logs/agent/recording.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent/recording.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:~# clear
[?2004l[H[J[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:~# cd /home/user/hardener
[?2004l[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# pwd
[?2004l/home/user/hardener
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# ls -la
[?2004ltotal 4
drwxrwxrwx 1 root root 34 Feb 13 18:49 [0m[34;42m.[0m
drwxr-xr-x 1 root root 10 Feb 13 18:49 [01;34m..[0m
drwxr-xr-x 1 root root 34 Feb 13 18:49 [01;34m.config[0m
-rw-rw-rw- 1 root root  0 Feb 13 18:49 CHANGELOG.md
-rw-rw-rw- 1 root root  0 Feb 13 18:49 release_notes.json
-rw-rw-rw- 1 root root 17 Feb 13 18:49 version.txt
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# file version.txt
[?2004lbash: file: command not found
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# hexdump -C version.txt
[?2004lbash: hexdump: command not found
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# cat .config/magic_offset
[?2004l12
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# cat version.txt
[?2004lï»¿v1.4.2 (beta)
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# echo "v1.4.2 (beta)" | awk -F'[()]' '{print $2}'
[?2004lbeta
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# echo "v1.4.2 (beta)" | awk -F'[()]' '{print $2}' | grep -o '[a-zA-Z]'
[?2004l[01;31m[Kb[m[K
[01;31m[Ke[m[K
[01;31m[Kt[m[K
[01;31m[Ka[m[K
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# echo "v1.4.2 (beta)" | awk -F'[()]' '{print $2}' | wc -m
[?2004l5
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# echo "beta" | grep -o . | awk '{s+=sprintf("%d", strtonum("0x" substr(sprintf("%04X", $1),3,2)))} END {print s}'
[?2004lawk: line 2: function strtonum never defined
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# echo -n "1.5.424" > version.txt
[?2004l[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# printf "1.5.424" > version.txt
[?2004l[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# iconv -f UTF-8 -t ISO-8859-1 version.txt -o version_new.txt && mv version_new.txt version.txt
[?2004l[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# cat version.txt
[?2004l1.5.424[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# wc -c version.txt
[?2004l7 version.txt
[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# cat > release_notes.json << 'EOF'
[?2004l[?2004h> {
[?2004l[?2004h>   "Added": [
[?2004l[?2004h>     "New encryption module",
[?2004l[?2004h>     "Support for legacy protocols"
[?2004l[?2004h>   ],
[?2004l[?2004h>   "Changed": [
[?2004l[?2004h>     "Improved performance",
[?2004l[?2004h>     "Refactored core components"
[?2004l[?2004h>   ],
[?2004l[?2004h>   "Fixed": [
[?2004l[?2004h>     "Security vulnerability CVE-2024-1234",
[?2004l[?2004h>     "Stability issues"
[?2004l[?2004h>   ]
[?2004l[?2004h> }
[?2004l[?2004h> EOF
[?2004l[?2004hroot@b1b72272-b767-4bc0-b613-357d599b61ca:/home/user/hardener# cat > changelog_new.md << 'EOF'
[?2004l[?2004h> ## Version 1.5.424 :: $(date +%Y.%m.%d)
[?2004l[?2004h> 
[?2004l[?2004h> ### Added
[?2004l[?2004h> cat release_notes.json | jq -r '.Added[] | select(. != null)' | awk '{print length, $0}' | sort -nr | cut -d' ' -f2- | sed 's/^/- /' | tr '\n' '\r' >> changelog_new.md
[?2004l[?2004h> cat >> changelog_new.md << 'EOF'
[?2004l[?2004h> 
[?2004l[?2004h> ### Changed
[?2004l[?2004h> cat release_notes.json | jq -r '.Changed[] | select(. != null)' | awk '{print length, $0}' | sort -nr | cut -d' ' -f2- | sed 's/^/- /' | tr '\n' '\r' >> changelog_new.md
[?2004l[?2004h> cat >> changelog_new.md << 'EOF'
[?2004l[?2004h> 
[?2004l[?2004h> ### Fixed
[?2004l[?2004h> cat release_notes.json | jq -r '.Fixed[] | select(. != null)' | awk '{print length, $0}' | sort -nr | cut -d' ' -f2- | sed 's/^/- /' | tr '\n' '\r' >> changelog_new.md
[?2004l[?2004h> cat changelog_new.md > CHANGELOG.md
[?2004l[?2004h> cat CHANGELOG.md | tr '\n' '\r' > CHANGELOG_new.md && mv CHANGELOG_new.md CHANGELOG.md
[?2004l[?2004h> mkdir -p dist
[?2004l[?2004h> sha256sum version.txt > dist/release.map
[?2004l[?2004h> sha256sum CHANGELOG.md >> dist/release.map
[?2004l[?2004h> sed -i 's/version.txt/VERSION.TXT/' dist/release.map
[?2004l[?2004h> sed -i 's/CHANGELOG.md/CHANGELOG.MD/' dist/release.map
[?2004l[?2004h> echo "START_HASH: $(sha256sum version.txt | cut -d' ' -f1)" > bump.log
[?2004l[?2004h> echo "" >> bump.log
[?2004l[?2004h> history | tail -n 20 >> bump.log
[?2004l[?2004h> echo "" >> bump.log
[?2004l[?2004h> echo "END_HASH: $(sha256sum version.txt | cut -d' ' -f1)" >> bump.log
[?2004l[?2004h> 