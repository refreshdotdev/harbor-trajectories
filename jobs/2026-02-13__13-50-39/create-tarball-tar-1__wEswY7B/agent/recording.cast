{"version": 2, "width": 160, "height": 40, "timestamp": 1771009308, "env": {"SHELL": "/bin/bash", "TERM": "screen"}}
[0.0054, "o", "\u001b[?2004hroot@08abde25-ca30-4139-af47-b7fddba316c1:~# "]
[0.974418, "i", "clear\r"]
[0.97457, "o", "clear\r\n\u001b[?2004l\r"]
[0.97573, "o", "\u001b[H\u001b[J"]
[0.975913, "o", "\u001b[?2004h"]
[0.975939, "o", "root@08abde25-ca30-4139-af47-b7fddba316c1:~# "]
[113.741824, "i", "mkdir -p /home/user/configs /home/user/backups /home/user/backup_logs\n"]
[113.742081, "o", "mkdir -p /home/user/configs /home/user/backups /home/user/backup_logs\r\n\u001b[?2004l\r"]
[113.743374, "o", "\u001b[?2004hroot@08abde25-ca30-4139-af47-b7fddba316c1:~# "]
[113.917656, "i", "echo \"v1.2-2023\" > /home/user/backup_id\n"]
[113.917806, "o", "echo \"v1.2-2023\" > /home/user/backup_id\r\n\u001b[?2004l\r"]
[113.983018, "o", "\u001b[?2004hroot@08abde25-ca30-4139-af47-b7fddba316c1:~# "]
[114.07392, "i", "cat > /root/backup_configs.sh << 'EOF'\n#!/bin/bash\n\n# Exit on error, treat unset variables as errors, and fail on pipeline errors\nset -euo pipefail\n\nBACKUP_ID_FILE=\"/home/user/backup_id\"\nBACKUP_ID=$(tr -d '\\n' < \"$BACKUP_ID_FILE\")\nBACKUP_ID=${BACKUP_ID// /}\n\nCONFIGS_DIR=\"/home/user/configs\"\nBACKUPS_DIR=\"/home/user/backups\"\nLOG_DIR=\"/home/user/backup_logs\"\n\n# Ensure directories exist\nmkdir -p \"$BACKUPS_DIR\"\nmkdir -p \"$LOG_DIR\"\n\nLOG_FILE=\"$LOG_DIR/backup_${BACKUP_ID}.log\"\nTEMP_LOG_FILE=\"$LOG_FILE.tmp\"\n\n# Header for the log file\necho \"REL_PATH|ARCHIVE_NAME|SHA256|SIZE\" > \"$TEMP_LOG_FILE\"\n\n# Array to store PIDs of background jobs for individual file processing\nJOBS_PIDS=()\n\n# Function to process a single file\nprocess_file() {\n  local filepath=\"$1\"\n  local file_basename=\"$2\"\n  local file_ext=\"$3\"\n  local rel_path=\"$4\"\n\n  local filename_no_ext=\"${file_basename%.*}\"\n  local archive_ext=\"\"\n  local compression_flag=\"\"\n\n  if [[ \"${file_ext}\" == \".conf\" ]]; then\n    archive_ext=\".tar.gz\"\n    compression_flag=\"z\"\n  elif "]
[114.074026, "i", "[[ \"${file_ext}\" == \".yml\" ]]; then\n    archive_ext=\".tar.bz2\"\n    compression_flag=\"j\"\n  else\n    echo \"Warning: Unknown extension ${file_ext} for file ${filepath}, skipping.\" >&2\n    return 1\n  fi\n\n  local archive_name=\"${filename_no_ext}_${BACKUP_ID}${archive_ext}\"\n  local archive_path=\"${BACKUPS_DIR}/${archive_name}\"\n\n  # Calculate SHA256 checksum and file size\n  local sha256_hash\n  local file_size\n  if ! sha256_hash=$(sha256sum \"$filepath\" | awk '{print $1}') || [ -z \"$sha256_hash\" ]; then\n    echo \"Warning: Failed to get SHA256 for ${filepath}, skipping.\" >&2\n    return 1\n  fi\n  if ! file_size=$(stat -c%s \"$filepath\" 2>/dev/null); then\n    echo \"Warning: Failed to get size for ${filepath}, skipping.\" >&2\n    file_size=\"?\"\n  fi\n\n  # Create archive\n  if tar --create --file=\"$archive_path\" $compression_flag --directory=\"$(dirname \"$filepath\")\" \"$(basename \"$filepath\")\" 2>/dev/null; then\n    # Append to log file\n    echo \"${rel_path}|${archive_name}|${sha256_hash}|${file_size}\" >> \"$TEMP_LOG_FILE\"\n  else\n  "]
[114.074055, "i", "  echo \"Warning: Failed to create archive ${archive_path} for file ${filepath}.\" >&2\n    return 1\n  fi\n}\n\n# Find and process files\nfind \"$CONFIGS_DIR\" -type f \\( -name \"*.conf\" -or -name \"*.yml\" \\) -size -512c \\! -name \"test.conf\" -print0 | while IFS= read -r -d '' filepath; do\n  # Skip if file does not exist or is zero size (though find criteria should prevent most of this)\n  if [ ! -f \"$filepath\" ] || [ ! -s \"$filepath\" ]; then\n    continue\n  fi\n\n  # Extract basename and extension\n  file_basename=\"$(basename -- \"$filepath\")\"\n  file_ext=\".${filepath##*.}\"\n  # Ensure extension is lower case for consistency\n  file_ext=\"${file_ext,,}\"\n\n  # Get relative path\n  rel_path=\"${filepath#${CONFIGS_DIR}/}\"\n  if [ \"$rel_path\" = \"$filepath\" ]; then\n    # File is directly in CONFIGS_DIR\n    rel_path=\"$(basename -- \"$filepath\")\"\n  fi\n\n  # Call process_file in background\n  process_file \"$filepath\" \"$file_basename\" \"$file_ext\" \"$rel_path\" &\n  JOBS_PIDS+=(\"$!\")\ndone\n\n# Wait for all background jobs to complete\nfor pid in \"${JOB"]
[114.074078, "i", "S_PIDS[@]}\"; do\n  wait \"$pid\" || echo \"Warning: Background job PID ${pid} exited with a non-zero status.\" >&2\ndone\n\n# Create full archive of configs directory\nFULL_ARCHIVE_NAME=\"configs_full_${BACKUP_ID}.tar.xz\"\nFULL_ARCHIVE_PATH=\"${BACKUPS_DIR}/${FULL_ARCHIVE_NAME}\"\nif tar --create --file=\"$FULL_ARCHIVE_PATH\" -J --directory=\"$(dirname \"$CONFIGS_DIR\")\" \"$(basename \"$CONFIGS_DIR\")\" 2>/dev/null; then\n  echo \"Full archive created: ${FULL_ARCHIVE_PATH}\"\nelse\n  echo \"Warning: Failed to create full archive ${FULL_ARCHIVE_PATH}.\" >&2\nfi\n\n# Sort log file by SHA256 column (column 3) and remove temporary file\nsort -t'|' -k3,3 \"$TEMP_LOG_FILE\" > \"$LOG_FILE\"\nrm \"$TEMP_LOG_FILE\"\n\necho \"Backup process completed. Log file: ${LOG_FILE}\"\nEOF\n"]
[114.074113, "o", "cat > /root/backup_configs.sh << 'EOF'\r\n"]
[114.07414, "o", "\u001b[?2004l\r"]
[114.074168, "o", "\u001b[?2004h"]
[114.074189, "o", "> "]
[114.074218, "o", "#!/bin/bash\r\n\u001b[?2004l\r"]
[114.074243, "o", "\u001b[?2004h"]
[114.074263, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h"]
[114.074282, "o", "> "]
[114.074507, "o", "# Exit on error, treat unset variables as errors, and fail on pipeline errors\r\n\u001b[?2004l\r"]
[114.074529, "o", "\u001b[?2004h> "]
[114.074583, "o", "set -euo pipefail\r\n\u001b[?2004l\r"]
[114.07461, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[114.07463, "o", "\u001b[?2004h> "]
[114.07474, "o", "BACKUP_ID_FILE=\"/home/user/backup_id\"\r\n\u001b[?2004l\r"]
[114.074758, "o", "\u001b[?2004h"]
[114.074781, "o", "> "]
[114.074892, "o", "BACKUP_ID=$(tr -d '\\n' < \"$BACKUP_ID_FILE\")\r\n\u001b[?2004l\r"]
[114.074915, "o", "\u001b[?2004h> "]
[114.074991, "o", "BACKUP_ID=${BACKUP_ID// /}\r\n\u001b[?2004l\r"]
[114.075009, "o", "\u001b[?2004h"]
[114.07503, "o", "> \r\n\u001b[?2004l\r"]
[114.07505, "o", "\u001b[?2004h> "]
[114.075139, "o", "CONFIGS_DIR=\"/home/user/configs\"\r\n\u001b[?2004l\r"]
[114.075163, "o", "\u001b[?2004h> "]
[114.075256, "o", "BACKUPS_DIR=\"/home/user/backups\"\r\n\u001b[?2004l\r"]
[114.075285, "o", "\u001b[?2004h> "]
[114.07538, "o", "LOG_DIR=\"/home/user/backup_logs\"\r\n\u001b[?2004l\r"]
[114.0754, "o", "\u001b[?2004h> "]
[114.07542, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[114.07544, "o", "> "]
[114.07552, "o", "# Ensure directories exist\r\n\u001b[?2004l\r"]
[114.075541, "o", "\u001b[?2004h> "]
[114.075615, "o", "mkdir -p \"$BACKUPS_DIR\"\r\n\u001b[?2004l\r"]
[114.075632, "o", "\u001b[?2004h"]
[114.075652, "o", "> "]
[114.075701, "o", "mkdir -p \"$LOG_DIR\"\r\n\u001b[?2004l\r"]
[114.075723, "o", "\u001b[?2004h> "]
[114.075744, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[114.075761, "o", "> "]
[114.075877, "o", "LOG_FILE=\"$LOG_DIR/backup_${BACKUP_ID}.log\"\r\n\u001b[?2004l\r"]
[114.075902, "o", "\u001b[?2004h> "]
[114.075989, "o", "TEMP_LOG_FILE=\"$LOG_FILE.tmp\"\r\n\u001b[?2004l\r"]
[114.076009, "o", "\u001b[?2004h> "]
[114.076031, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[114.076051, "o", "> "]
[114.076125, "o", "# Header for the log file\r\n\u001b[?2004l\r"]
[114.076141, "o", "\u001b[?2004h"]
[114.076166, "o", "> "]
[114.076313, "o", "echo \"REL_PATH|ARCHIVE_NAME|SHA256|SIZE\" > \"$TEMP_LOG_FILE\"\r\n\u001b[?2004l\r"]
[114.07633, "o", "\u001b[?2004h> "]
[114.076351, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[114.076368, "o", "> "]
[114.076594, "o", "# Array to store PIDs of background jobs for individual file processing\r\n\u001b[?2004l\r"]
[114.076615, "o", "\u001b[?2004h> "]
[114.076664, "o", "JOBS_PIDS=()\r\n\u001b[?2004l\r"]
[114.076684, "o", "\u001b[?2004h> \r\n"]
[114.076704, "o", "\u001b[?2004l\r\u001b[?2004h"]
[114.076723, "o", "> "]
[114.076821, "o", "# Function to process a single file\r\n\u001b[?2004l\r"]
[114.076846, "o", "\u001b[?2004h> "]
[114.076905, "o", "process_file() {\r\n\u001b[?2004l\r"]
[114.07693, "o", "\u001b[?2004h> "]
[114.076991, "o", "  local filepath=\"$1\"\r\n\u001b[?2004l\r"]
[114.077012, "o", "\u001b[?2004h"]
[114.077035, "o", "> "]
[114.077104, "o", "  local file_basename=\"$2\"\r\n\u001b[?2004l\r"]
[114.077124, "o", "\u001b[?2004h"]
[114.077142, "o", "> "]
[114.077202, "o", "  local file_ext=\"$3\"\r\n\u001b[?2004l\r"]
[114.077221, "o", "\u001b[?2004h> "]
[114.077291, "o", "  local rel_path=\"$4\"\r\n\u001b[?2004l\r"]
[114.077311, "o", "\u001b[?2004h> \r\n"]
[114.077332, "o", "\u001b[?2004l\r\u001b[?2004h"]
[114.077352, "o", "> "]
[114.077484, "o", "  local filename_no_ext=\"${file_basename%.*}\"\r\n\u001b[?2004l\r"]
[114.077508, "o", "\u001b[?2004h> "]
[114.077567, "o", "  local archive_ext=\"\"\r\n\u001b[?2004l\r"]
[114.077587, "o", "\u001b[?2004h"]
[114.077602, "o", "> "]
[114.077679, "o", "  local compression_flag=\"\"\r\n\u001b[?2004l\r"]
[114.077698, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[114.077719, "o", "\u001b[?2004h"]
[114.077739, "o", "> "]
[114.077845, "o", "  if [[ \"${file_ext}\" == \".conf\" ]]; then\r\n\u001b[?2004l\r"]
[114.077864, "o", "\u001b[?2004h"]
[114.077883, "o", "> "]
[114.077954, "o", "    archive_ext=\".tar.gz\"\r\n\u001b[?2004l\r"]
[114.077971, "o", "\u001b[?2004h> "]
[114.078051, "o", "    compression_flag=\"z\"\r\n\u001b[?2004l\r"]
[114.078069, "o", "\u001b[?2004h> "]
[114.078194, "o", "  elif [[ \"${file_ext}\" == \".yml\" ]]; then\r\n\u001b[?2004l\r"]
[114.078211, "o", "\u001b[?2004h> "]
[114.078293, "o", "    archive_ext=\".tar.bz2\"\r\n\u001b[?2004l\r"]
[114.078311, "o", "\u001b[?2004h"]
[114.078326, "o", "> "]
[114.078397, "o", "    compression_flag=\"j\"\r\n\u001b[?2004l\r"]
[114.078416, "o", "\u001b[?2004h> "]
[114.078443, "o", "  else\r\n\u001b[?2004l\r"]
[114.078461, "o", "\u001b[?2004h> "]
[114.078698, "o", "    echo \"Warning: Unknown extension ${file_ext} for file ${filepath}, skipping.\" >&2\r\n\u001b[?2004l\r"]
[114.078714, "o", "\u001b[?2004h> "]
[114.078763, "o", "    return 1\r\n\u001b[?2004l\r"]
[114.078782, "o", "\u001b[?2004h"]
[114.078801, "o", "> "]
[114.07882, "o", "  fi\r\n\u001b[?2004l\r"]
[114.078838, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[114.07886, "o", "\u001b[?2004h"]
[114.078878, "o", "> "]
[114.079053, "o", "  local archive_name=\"${filename_no_ext}_${BACKUP_ID}${archive_ext}\"\r\n\u001b[?2004l\r"]
[114.079077, "o", "\u001b[?2004h> "]
[114.079225, "o", "  local archive_path=\"${BACKUPS_DIR}/${archive_name}\"\r\n\u001b[?2004l\r"]
[114.079247, "o", "\u001b[?2004h"]
[114.079276, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[114.079396, "o", "  # Calculate SHA256 checksum and file size\r\n\u001b[?2004l\r"]
[114.079423, "o", "\u001b[?2004h> "]
[114.079496, "o", "  local sha256_hash\r\n\u001b[?2004l\r"]
[114.079516, "o", "\u001b[?2004h> "]
[114.079567, "o", "  local file_size\r\n\u001b[?2004l\r"]
[114.079585, "o", "\u001b[?2004h> "]
[114.079836, "o", "  if ! sha256_hash=$(sha256sum \"$filepath\" | awk '{print $1}') || [ -z \"$sha256_hash\" ]; then\r\n\u001b[?2004l\r"]
[114.079856, "o", "\u001b[?2004h> "]
[114.080047, "o", "    echo \"Warning: Failed to get SHA256 for ${filepath}, skipping.\" >&2\r\n\u001b[?2004l\r"]
[114.080075, "o", "\u001b[?2004h> "]
[114.080114, "o", "    return 1\r\n\u001b[?2004l\r"]
[114.080135, "o", "\u001b[?2004h> "]
[114.08016, "o", "  fi\r\n\u001b[?2004l\r"]
[114.08018, "o", "\u001b[?2004h"]
[114.0802, "o", "> "]
[114.080353, "o", "  if ! file_size=$(stat -c%s \"$filepath\" 2>/dev/null); then\r\n\u001b[?2004l\r"]
[114.080373, "o", "\u001b[?2004h> "]
[114.080569, "o", "    echo \"Warning: Failed to get size for ${filepath}, skipping.\" >&2\r\n\u001b[?2004l\r"]
[114.080588, "o", "\u001b[?2004h> "]
[114.080646, "o", "    file_size=\"?\"\r\n\u001b[?2004l\r"]
[114.080665, "o", "\u001b[?2004h"]
[114.080685, "o", ">   fi\r\n"]
[114.080705, "o", "\u001b[?2004l\r\u001b[?2004h"]
[114.080724, "o", "> \r\n\u001b[?2004l\r"]
[114.080744, "o", "\u001b[?2004h> "]
[114.080805, "o", "  # Create archive\r\n\u001b[?2004l\r"]
[114.080829, "o", "\u001b[?2004h> "]
[114.081184, "o", "  if tar --create --file=\"$archive_path\" $compression_flag --directory=\"$(dirname \"$filepath\")\" \"$(basename \"$filepath\")\" 2>/dev/null; then\r\n\u001b[?2004l\r"]
[114.081209, "o", "\u001b[?2004h> "]
[114.081283, "o", "    # Append to log file\r\n\u001b[?2004l\r"]
[114.0813, "o", "\u001b[?2004h"]
[114.081319, "o", "> "]
[114.081542, "o", "    echo \"${rel_path}|${archive_name}|${sha256_hash}|${file_size}\" >> \"$TEMP_LOG_FILE\"\r\n\u001b[?2004l\r"]
[114.08156, "o", "\u001b[?2004h"]
[114.081578, "o", "> "]
[114.0816, "o", "  else\r\n\u001b[?2004l\r"]
[114.08162, "o", "\u001b[?2004h> "]
[114.081851, "o", "    echo \"Warning: Failed to create archive ${archive_path} for file ${filepath}.\" >&2\r\n\u001b[?2004l\r"]
[114.081867, "o", "\u001b[?2004h"]
[114.081887, "o", "> "]
[114.081918, "o", "    return 1\r\n\u001b[?2004l\r"]
[114.08194, "o", "\u001b[?2004h> "]
[114.081959, "o", "  fi\r\n"]
[114.081977, "o", "\u001b[?2004l\r\u001b[?2004h"]
[114.082007, "o", "> }\r\n\u001b[?2004l\r"]
[114.082029, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[114.082047, "o", "\u001b[?2004h> "]
[114.082124, "o", "# Find and process files\r\n\u001b[?2004l\r"]
[114.082141, "o", "\u001b[?2004h"]
[114.08216, "o", "> "]
[114.082535, "o", "find \"$CONFIGS_DIR\" -type f \\( -name \"*.conf\" -or -name \"*.yml\" \\) -size -512c \\! -name \"test.conf\" -print0 | while IFS= read -r -d '' filepath; do\r\n\u001b[?2004l\r"]
[114.082555, "o", "\u001b[?2004h> "]
[114.082815, "o", "  # Skip if file does not exist or is zero size (though find criteria should prevent most of this)\r\n\u001b[?2004l\r"]
[114.082836, "o", "\u001b[?2004h> "]
[114.082988, "o", "  if [ ! -f \"$filepath\" ] || [ ! -s \"$filepath\" ]; then\r\n\u001b[?2004l\r"]
[114.083005, "o", "\u001b[?2004h"]
[114.083025, "o", "> "]
[114.083056, "o", "    continue\r\n\u001b[?2004l\r"]
[114.083076, "o", "\u001b[?2004h"]
[114.083095, "o", "> "]
[114.083113, "o", "  fi\r\n\u001b[?2004l\r"]
[114.083132, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[114.083152, "o", "\u001b[?2004h"]
[114.083171, "o", "> "]
[114.083262, "o", "  # Extract basename and extension\r\n\u001b[?2004l\r"]
[114.083279, "o", "\u001b[?2004h"]
[114.083299, "o", "> "]
[114.083415, "o", "  file_basename=\"$(basename -- \"$filepath\")\"\r\n\u001b[?2004l\r"]
[114.083433, "o", "\u001b[?2004h"]
[114.083451, "o", "> "]
[114.083533, "o", "  file_ext=\".${filepath##*.}\"\r\n\u001b[?2004l\r"]
[114.083551, "o", "\u001b[?2004h"]
[114.083571, "o", "> "]
[114.083696, "o", "  # Ensure extension is lower case for consistency\r\n\u001b[?2004l\r"]
[114.083715, "o", "\u001b[?2004h"]
[114.083735, "o", "> "]
[114.083807, "o", "  file_ext=\"${file_ext,,}\"\r\n\u001b[?2004l\r"]
[114.083823, "o", "\u001b[?2004h"]
[114.083843, "o", "> \r\n\u001b[?2004l\r"]
[114.083861, "o", "\u001b[?2004h> "]
[114.083926, "o", "  # Get relative path\r\n\u001b[?2004l\r"]
[114.083946, "o", "\u001b[?2004h> "]
[114.08426, "o", "  rel_path=\"${filepath#${CONFIGS_DIR}/}\"\r\n\u001b[?2004l\r\u001b[?2004h>   if [ \"$rel_path\" = \"$filepath\" ]; then\r\n\u001b[?2004l\r\u001b[?2004h> "]
[114.084349, "o", "    # File is directly in CONFIGS_DIR\r\n\u001b[?2004l\r"]
[114.084373, "o", "\u001b[?2004h> "]
[114.084499, "o", "    rel_path=\"$(basename -- \"$filepath\")\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[114.084525, "o", "> "]
[114.084546, "o", "  fi\r\n\u001b[?2004l\r\u001b[?2004h"]
[114.084565, "o", "> \r\n\u001b[?2004l\r"]
[114.084589, "o", "\u001b[?2004h"]
[114.085036, "o", ">   # Call process_file in background\r\n\u001b[?2004l\r\u001b[?2004h>   process_file \"$filepath\" \"$file_basename\" \"$file_ext\" \"$rel_path\" &\r\n\u001b[?2004l\r\u001b[?2004h>   JOBS_PIDS+=(\"$!\")\r\n\u001b[?2004l\r\u001b[?2004h> done\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r"]
[114.085063, "o", "\u001b[?2004h> "]
[114.085172, "o", "# Wait for all background jobs to complete\r\n\u001b[?2004l\r"]
[114.085192, "o", "\u001b[?2004h> "]
[114.085288, "o", "for pid in \"${JOBS_PIDS[@]}\"; do\r\n\u001b[?2004l\r"]
[114.08531, "o", "\u001b[?2004h"]
[114.08533, "o", "> "]
[114.085577, "o", "  wait \"$pid\" || echo \"Warning: Background job PID ${pid} exited with a non-zero status.\" >&2\r\n\u001b[?2004l\r"]
[114.085616, "o", "\u001b[?2004h> done\r\n\u001b[?2004l\r"]
[114.085639, "o", "\u001b[?2004h"]
[114.085662, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h"]
[114.085692, "o", "> "]
[114.0858, "o", "# Create full archive of configs directory\r\n\u001b[?2004l\r"]
[114.085824, "o", "\u001b[?2004h> "]
[114.085965, "o", "FULL_ARCHIVE_NAME=\"configs_full_${BACKUP_ID}.tar.xz\"\r\n\u001b[?2004l\r"]
[114.085983, "o", "\u001b[?2004h> "]
[114.086134, "o", "FULL_ARCHIVE_PATH=\"${BACKUPS_DIR}/${FULL_ARCHIVE_NAME}\"\r\n\u001b[?2004l\r"]
[114.086154, "o", "\u001b[?2004h> "]
[114.086517, "o", "if tar --create --file=\"$FULL_ARCHIVE_PATH\" -J --directory=\"$(dirname \"$CONFIGS_DIR\")\" \"$(basename \"$CONFIGS_DIR\")\" 2>/dev/null; then\r\n\u001b[?2004l\r"]
[114.086539, "o", "\u001b[?2004h> "]
[114.086679, "o", "  echo \"Full archive created: ${FULL_ARCHIVE_PATH}\"\r\n\u001b[?2004l\r"]
[114.086696, "o", "\u001b[?2004h> "]
[114.086717, "o", "else\r\n\u001b[?2004l\r"]
[114.086738, "o", "\u001b[?2004h"]
[114.086758, "o", "> "]
[114.086946, "o", "  echo \"Warning: Failed to create full archive ${FULL_ARCHIVE_PATH}.\" >&2\r\n\u001b[?2004l\r"]
[114.086964, "o", "\u001b[?2004h> "]
[114.086984, "o", "fi\r\n\u001b[?2004l\r"]
[114.087002, "o", "\u001b[?2004h> \r\n"]
[114.087023, "o", "\u001b[?2004l\r\u001b[?2004h"]
[114.087042, "o", "> "]
[114.087227, "o", "# Sort log file by SHA256 column (column 3) and remove temporary file\r\n\u001b[?2004l\r"]
[114.087245, "o", "\u001b[?2004h> "]
[114.087383, "o", "sort -t'|' -k3,3 \"$TEMP_LOG_FILE\" > \"$LOG_FILE\"\r\n\u001b[?2004l\r"]
[114.087401, "o", "\u001b[?2004h> "]
[114.087469, "o", "rm \"$TEMP_LOG_FILE\"\r\n\u001b[?2004l\r"]
[114.087497, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[114.087517, "o", "\u001b[?2004h"]
[114.087535, "o", "> "]
[114.087687, "o", "echo \"Backup process completed. Log file: ${LOG_FILE}\"\r\n\u001b[?2004l\r"]
[114.087708, "o", "\u001b[?2004h> "]
[114.087727, "o", "EOF\r\n\u001b[?2004l\r"]
[114.090541, "o", "\u001b[?2004hroot@08abde25-ca30-4139-af47-b7fddba316c1:~# "]
[114.287978, "i", "chmod +x /root/backup_configs.sh\n"]
[114.288136, "o", "chmod +x /root/backup_configs.sh\r\n"]
[114.288166, "o", "\u001b[?2004l\r"]
[114.289201, "o", "\u001b[?2004h"]
[114.289224, "o", "root@08abde25-ca30-4139-af47-b7fddba316c1:~# "]
[114.408525, "i", "echo \"Environment setup and backup script created. The script is located at /root/backup_configs.sh. The backup ID is 'v1.2-2023'. To test the script, you would need to populate the /home/user/configs directory with sample .conf and .yml files.\"\n"]
[114.409734, "o", "echo \"Environment setup and backup script created. The script is located at /root/backup_configs.sh. The backup ID is 'v1.2-2023'. To test the script, you would need to populate the /home/user/configs directory with sample .conf and .yml files.\"\r\n\u001b[?2004l\r"]
[114.40982, "o", "Environment setup and backup script created. The script is located at /root/backup_configs.sh. The backup ID is 'v1.2-2023'. To test the script, you would need to populate the /home/user/configs directory with sample .conf and .yml files.\r\n"]
[114.409884, "o", "\u001b[?2004hroot@08abde25-ca30-4139-af47-b7fddba316c1:~# "]
