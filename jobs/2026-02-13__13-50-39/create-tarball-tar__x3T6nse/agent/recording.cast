{"version": 2, "width": 160, "height": 40, "timestamp": 1771009087, "env": {"SHELL": "/bin/bash", "TERM": "screen"}}
[0.008033, "o", "\u001b[?2004h"]
[0.008561, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[0.784262, "i", "clear\r"]
[0.784419, "o", "clear\r\n\u001b[?2004l\r"]
[0.786205, "o", "\u001b[H\u001b[J"]
[0.786488, "o", "\u001b[?2004h"]
[0.786535, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[30.843219, "i", "DEST=${BACKUP_DEST:-/home/user/archives} && LOG=${LOG_FILE:-/home/user/backup_logs/backup.log}\necho \"Destination: $DEST, Log file: $LOG\"\n"]
[30.843838, "o", "DEST=${BACKUP_DEST:-/home/user/archives} && LOG=${LOG_FILE:-/home/user/backup_logs/backup.log}\r\n\u001b[?2004l\r"]
[30.843976, "o", "\u001b[?2004h"]
[30.844017, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[30.844304, "o", "echo \"Destination: $DEST, Log file: $LOG\"\r\n\u001b[?2004l\r"]
[30.84439, "o", "Destination: /home/user/secure_backups, Log file: /home/user/audit/backup_audit.log\r\n\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[31.369734, "i", "mkdir -p \"$DEST\" && mkdir -p \"$(dirname \"$LOG\")\"\necho \"Created destination and log directories.\"\n"]
[31.370045, "o", "mkdir -p \"$DEST\" && mkdir -p \"$(dirname \"$LOG\")\"\r\n\u001b[?2004l\r"]
[31.374957, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[31.375091, "o", "echo \"Created destination and log directories.\"\r\n\u001b[?2004l\r"]
[31.375168, "o", "Created destination and log directories.\r\n\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[32.098359, "i", "TIMESTAMP_ARCHIVE=$(date +%Y%m%d) && TIMESTAMP_LOG=$(date '+%Y-%m-%d %H:%M:%S')\nARCHIVE_FILE=\"daily_$TIMESTAMP_ARCHIVE.tar.gz\" && CHECKSUM_FILE=\"daily_$TIMESTAMP_ARCHIVE.sha256\"\necho \"Archive: $ARCHIVE_FILE, Checksum: $CHECKSUM_FILE, Log timestamp: $TIMESTAMP_LOG\"\n"]
[32.098808, "o", "TIMESTAMP_ARCHIVE=$(date +%Y%m%d) && TIMESTAMP_LOG=$(date '+%Y-%m-%d %H:%M:%S')\r\n\u001b[?2004l\r"]
[32.102371, "o", "\u001b[?2004h"]
[32.102448, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[32.102856, "o", "ARCHIVE_FILE=\"daily_$TIMESTAMP_ARCHIVE.tar.gz\" && CHECKSUM_FILE=\"daily_$TIMESTAMP_ARCHIVE.sha256\"\r\n\u001b[?2004l\r"]
[32.102934, "o", "\u001b[?2004h"]
[32.10297, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[32.103365, "o", "echo \"Archive: $ARCHIVE_FILE, Checksum: $CHECKSUM_FILE, Log timestamp: $TIMESTAMP_LOG\"\r\n\u001b[?2004l\r"]
[32.103409, "o", "Archive: daily_20260213.tar.gz, Checksum: daily_20260213.sha256, Log timestamp: 2026-02-13 18:58:40\r\n"]
[32.103449, "o", "\u001b[?2004h"]
[32.103478, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[32.748266, "i", "if [ -f \"$DEST/$ARCHIVE_FILE\" ]; then\n  UNIX_TIMESTAMP=$(date +%s)\n  mv \"$DEST/$ARCHIVE_FILE\" \"$DEST/${ARCHIVE_FILE}.bak-$UNIX_TIMESTAMP\"\n  echo \"Rotated existing archive: $ARCHIVE_FILE → ${ARCHIVE_FILE}.bak-$UNIX_TIMESTAMP\"\nfi\n"]
[32.748512, "o", "if [ -f \"$DEST/$ARCHIVE_FILE\" ]; then\r\n\u001b[?2004l\r"]
[32.748578, "o", "\u001b[?2004h"]
[32.748624, "o", "> "]
[32.748756, "o", "  UNIX_TIMESTAMP=$(date +%s)\r\n\u001b[?2004l\r"]
[32.748801, "o", "\u001b[?2004h"]
[32.748837, "o", "> "]
[32.7492, "o", "  mv \"$DEST/$ARCHIVE_FILE\" \"$DEST/${ARCHIVE_FILE}.bak-$UNIX_TIMESTAMP\"\r\n\u001b[?2004l\r"]
[32.749252, "o", "\u001b[?2004h"]
[32.749283, "o", "> "]
[32.749716, "o", "  echo \"Rotated existing archive: $ARCHIVE_FILE → ${ARCHIVE_FILE}.bak-$UNIX_TIMESTAMP\"\r\n\u001b[?2004l\r"]
[32.749763, "o", "\u001b[?2004h"]
[32.749795, "o", "> fi"]
[32.749827, "o", "\r\n\u001b[?2004l\r"]
[32.749908, "o", "\u001b[?2004h"]
[32.749944, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[33.357445, "i", "tar -czf \"$DEST/$ARCHIVE_FILE\" --exclude='*.tmp' --exclude='broken_symlinks' -C /home/user/data .\necho \"Created archive: $ARCHIVE_FILE\"\n"]
[33.357747, "o", "tar -czf \"$DEST/$ARCHIVE_FILE\" --exclude='*.tmp' --exclude='broken_symlinks' -C /home/user/data .\r\n\u001b[?2004l\r"]
[33.361009, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[33.361109, "o", "echo \"Created archive: $ARCHIVE_FILE\"\r\n\u001b[?2004l\r"]
[33.361137, "o", "Created archive: daily_20260213.tar.gz\r\n"]
[33.361169, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[34.415447, "i", "tar -f \"$DEST/$ARCHIVE_FILE\" --owner=0 --group=0 --mode='g=o-rwx' --no-same-owner --paxlibname=generic --xattrs=0 --rsh=\"sh -c 'chmod o-rwx \\\"\\$1\\\"' -- \\$1\" --files-from /dev/null\n"]
[34.41596, "o", "tar -f \"$DEST/$ARCHIVE_FILE\" --owner=0 --group=0 --mode='g=o-rwx' --no-same-owner --paxlibname=generic --xattrs=0 --rsh=\"sh -c 'chmod o-rwx \\\"\\$1\\\"' -- \\$1\" --files-from /dev/null\r\n\u001b[?2004l\r"]
[34.417122, "o", "tar: unrecognized option '--paxlibname=generic'\r\nTry 'tar --help' or 'tar --usage' for more information.\r\n"]
[34.417321, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[35.458005, "i", "sha256sum \"$DEST/$ARCHIVE_FILE\" > \"$DEST/$CHECKSUM_FILE\"\nawk '{print \"SHA256 (\" $2 \") = \" $1}' \"$DEST/$CHECKSUM_FILE\" > \"${DEST}/${CHECKSUM_FILE}.tmp\" && mv \"${DEST}/${CHECKSUM_FILE}.tmp\" \"$DEST/$CHECKSUM_FILE\"\necho \"Created checksum: $CHECKSUM_FILE\"\n"]
[35.458531, "o", "sha256sum \"$DEST/$ARCHIVE_FILE\" > \"$DEST/$CHECKSUM_FILE\"\r\n\u001b[?2004l\r"]
[35.46023, "o", "\u001b[?2004h"]
[35.460288, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[35.461429, "o", "awk '{print \"SHA256 (\" $2 \") = \" $1}' \"$DEST/$CHECKSUM_FILE\" > \"${DEST}/${CHECKSUM_FILE}.tmp\" && mv \"${DEST}/${CHECKSUM_FILE}.tmp\" \"$DEST/$CHECKSUM_FILE\"\r\n\u001b[?2004l\r"]
[35.464571, "o", "\u001b[?2004h"]
[35.464617, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[35.464926, "o", "echo \"Created checksum: $CHECKSUM_FILE\"\r\n\u001b[?2004l\r"]
[35.46497, "o", "Created checksum: daily_20260213.sha256\r\n"]
[35.465031, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[35.961763, "i", "if [ ! -f \"$LOG\" ]; then\n  echo \"TIMESTAMP | ARCHIVE | STATUS\" > \"$LOG\"\n  echo \"Log header created.\"\nfi\n"]
[35.961991, "o", "if [ ! -f \"$LOG\" ]; then\r\n\u001b[?2004l\r"]
[35.962045, "o", "\u001b[?2004h"]
[35.962094, "o", "> "]
[35.962386, "o", "  echo \"TIMESTAMP | ARCHIVE | STATUS\" > \"$LOG\"\r\n\u001b[?2004l\r"]
[35.962455, "o", "\u001b[?2004h> "]
[35.962627, "o", "  echo \"Log header created.\"\r\n\u001b[?2004l\r"]
[35.962668, "o", "\u001b[?2004h> fi\r\n"]
[35.962717, "o", "\u001b[?2004l\r"]
[35.962861, "o", "Log header created.\r\n"]
[35.962907, "o", "\u001b[?2004h"]
[35.962942, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[36.40463, "i", "echo \"$TIMESTAMP_LOG - $ARCHIVE_FILE - OK\" >> \"$LOG\"\necho \"Log entry appended. Backup complete.\"\n"]
[36.404987, "o", "echo \"$TIMESTAMP_LOG - $ARCHIVE_FILE - OK\" >> \"$LOG\"\r\n\u001b[?2004l\r"]
[36.405154, "o", "\u001b[?2004h"]
[36.405183, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[36.405432, "o", "echo \"Log entry appended. Backup complete.\"\r\n\u001b[?2004l\r"]
[36.405462, "o", "Log entry appended. Backup complete.\r\n"]
[36.405507, "o", "\u001b[?2004h"]
[36.405528, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[57.629202, "i", "TMP_DIR=\"/tmp/backup_fix\" && mkdir -p \"$TMP_DIR\"\necho \"Extracting archive to $TMP_DIR for permission fix...\"\n"]
[57.62939, "o", "TMP_DIR=\"/tmp/backup_fix\" && mkdir -p \"$TMP_DIR\"\r\n\u001b[?2004l\r"]
[57.630605, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[57.630745, "o", "echo \"Extracting archive to $TMP_DIR for permission fix...\"\r\n\u001b[?2004l\r"]
[57.630802, "o", "Extracting archive to /tmp/backup_fix for permission fix...\r\n\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[58.050555, "i", "tar -xzf \"$DEST/$ARCHIVE_FILE\" -C \"$TMP_DIR\"\necho \"Applied permissions recursively...\"\n"]
[58.050989, "o", "tar -xzf \"$DEST/$ARCHIVE_FILE\" -C \"$TMP_DIR\"\r\n\u001b[?2004l\r"]
[58.056676, "o", "\u001b[?2004h"]
[58.056736, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[58.056964, "o", "echo \"Applied permissions recursively...\"\r\n\u001b[?2004l\r"]
[58.057013, "o", "Applied permissions recursively...\r\n"]
[58.057064, "o", "\u001b[?2004h"]
[58.057093, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[58.649896, "i", "chown -R root:root \"$TMP_DIR\" && chmod -R o-rwx \"$TMP_DIR\"\necho \"Recreating archive with corrected permissions...\"\n"]
[58.650241, "o", "chown -R root:root \"$TMP_DIR\" && chmod -R o-rwx \"$TMP_DIR\"\r\n"]
[58.650275, "o", "\u001b[?2004l\r"]
[58.65346, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[58.653606, "o", "echo \"Recreating archive with corrected permissions...\"\r\n\u001b[?2004l\r"]
[58.653632, "o", "Recreating archive with corrected permissions...\r\n"]
[58.653652, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[59.131107, "i", "tar -czf \"$DEST/$ARCHIVE_FILE\" -C \"$TMP_DIR\" .\nrm -rf \"$TMP_DIR\"\necho \"Permissions corrected. Recreating checksum...\"\n"]
[59.13154, "o", "tar -czf \"$DEST/$ARCHIVE_FILE\" -C \"$TMP_DIR\" .\r\n\u001b[?2004l\r"]
[59.13711, "o", "\u001b[?2004h"]
[59.137181, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[59.137278, "o", "rm -rf \"$TMP_DIR\"\r\n\u001b[?2004l\r"]
[59.139597, "o", "\u001b[?2004h"]
[59.139642, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[59.139987, "o", "echo \"Permissions corrected. Recreating checksum...\"\r\n\u001b[?2004l\r"]
[59.140037, "o", "Permissions corrected. Recreating checksum...\r\n"]
[59.140078, "o", "\u001b[?2004h"]
[59.140114, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[59.66344, "i", "sha256sum \"$DEST/$ARCHIVE_FILE\" > \"$DEST/$CHECKSUM_FILE\"\nawk '{print \"SHA256 (\" $2 \") = \" $1}' \"$DEST/$CHECKSUM_FILE\" > \"${DEST}/${CHECKSUM_FILE}.tmp\" && mv \"${DEST}/${CHECKSUM_FILE}.tmp\" \"$DEST/$CHECKSUM_FILE\"\necho \"Checksum updated.\"\n"]
[59.663923, "o", "sha256sum \"$DEST/$ARCHIVE_FILE\" > \"$DEST/$CHECKSUM_FILE\"\r\n\u001b[?2004l\r"]
[59.666639, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[59.667624, "o", "awk '{print \"SHA256 (\" $2 \") = \" $1}' \"$DEST/$CHECKSUM_FILE\" > \"${DEST}/${CHECKSUM_FILE}.tmp\" && mv \"${DEST}/${CHECKSUM_FILE}.tmp\" \"$DEST/$CHECKSUM_FILE\"\r\n\u001b[?2004l\r"]
[59.670712, "o", "\u001b[?2004h"]
[59.670745, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[59.670893, "o", "echo \"Checksum updated.\"\r\n\u001b[?2004l\r"]
[59.670951, "o", "Checksum updated.\r\n"]
[59.671003, "o", "\u001b[?2004h"]
[59.671047, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[60.041523, "i", "CORRECTED_TIMESTAMP=$(date '+%Y-%m-%d %H:%M:%S')\necho \"$CORRECTED_TIMESTAMP - $ARCHIVE_FILE - OK (permissions corrected)\" >> \"$LOG\"\necho \"Log updated. All tasks complete.\"\n"]
[60.041683, "o", "CORRECTED_TIMESTAMP=$(date '+%Y-%m-%d %H:%M:%S')\r\n\u001b[?2004l\r"]
[60.042798, "o", "\u001b[?2004h"]
[60.042812, "o", "root@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[60.043015, "o", "echo \"$CORRECTED_TIMESTAMP - $ARCHIVE_FILE - OK (permissions corrected)\" >> \"$LOG\"\r\n\u001b[?2004l\r"]
[60.043093, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
[60.043209, "o", "echo \"Log updated. All tasks complete.\"\r\n\u001b[?2004l\r"]
[60.043242, "o", "Log updated. All tasks complete.\r\n"]
[60.043275, "o", "\u001b[?2004hroot@b1a5b1bc-02c8-4477-9fc3-ddfebb3eb6de:~# "]
