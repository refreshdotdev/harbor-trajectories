[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:~# asciinema rec --stdin /logs/agent/recording.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent/recording.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:~# clear
[?2004l[H[J[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:~# ls -la /home/user/edge_source/
[?2004ltotal 20
drwxrwxrwx 2 root root 120 Feb 13 18:50 [0m[34;42m.[0m
drwxrwxrwx 4 root root  55 Feb 13 18:50 [34;42m..[0m
-rwxrwxrwx 1 root root  25 Feb 13 18:50 [01;32mapp.py[0m
-rwxrwxrwx 1 root root  40 Feb 13 18:50 [01;32mconfig.yaml[0m
-rwxrwxrwx 1 root root  11 Feb 13 18:50 [01;32mdebug.log[0m
-rwxrwxrwx 1 root root  10 Feb 13 18:50 [01;32mtemp_data.tmp[0m
-rwxrwxrwx 1 root root   6 Feb 13 18:50 [01;32mversion.txt[0m
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:~# cd /home/user/iot_device/edge_app
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# ls -la
[?2004ltotal 12
drwxrwxrwx 2 root root 54 Feb 13 18:50 [0m[34;42m.[0m
drwxrwxrwx 3 root root 30 Feb 13 18:50 [34;42m..[0m
-rwxrwxrwx 1 root root 25 Feb 13 18:50 [01;32mapp.py[0m
-rwxrwxrwx 1 root root  7 Feb 13 18:50 [01;32mold.tmp[0m
-rwxrwxrwx 1 root root  6 Feb 13 18:50 [01;32mversion.txt[0m
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# rsync --dry-run -av --delete --exclude '*.log' --exclude '*.tmp' /home/user/edge_source/ .
[?2004lsending incremental file list
config.yaml

sent 103 bytes  received 19 bytes  244.00 bytes/sec
total size is 71  speedup is 0.58 (DRY RUN)
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# rsync -av --delete --exclude '*.log' --exclude '*.tmp' /home/user/edge_source/ .
[?2004lsending incremental file list
config.yaml

sent 183 bytes  received 35 bytes  436.00 bytes/sec
total size is 71  speedup is 0.33
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# ls -la
[?2004ltotal 16
drwxrwxrwx 1 root root 25 Feb 13 18:50 [0m[34;42m.[0m
drwxrwxrwx 1 root root 30 Feb 13 18:50 [34;42m..[0m
-rwxrwxrwx 1 root root 25 Feb 13 18:50 [01;32mapp.py[0m
-rwxrwxrwx 1 root root 40 Feb 13 18:50 [01;32mconfig.yaml[0m
-rwxrwxrwx 1 root root  7 Feb 13 18:50 [01;32mold.tmp[0m
-rwxrwxrwx 1 root root  6 Feb 13 18:50 [01;32mversion.txt[0m
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# rm old.tmp
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# ls -la
[?2004ltotal 12
drwxrwxrwx 1 root root 40 Feb 13 18:51 [0m[34;42m.[0m
drwxrwxrwx 1 root root 30 Feb 13 18:50 [34;42m..[0m
-rwxrwxrwx 1 root root 25 Feb 13 18:50 [01;32mapp.py[0m
-rwxrwxrwx 1 root root 40 Feb 13 18:50 [01;32mconfig.yaml[0m
-rwxrwxrwx 1 root root  6 Feb 13 18:50 [01;32mversion.txt[0m
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# cp config.yaml config.yaml.bak
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# cat /etc/iot_serial
[?2004lSN-314159[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# sed -i 's/{{SERIAL_NUMBER}}/SN-314159/g' config.yaml
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# cat config.yaml
[?2004lsetting: prod
serial: SN-314159
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# find . -name '*.py' -exec chmod 755 {} \;
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# chmod 400 config.yaml
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# ls -la
[?2004ltotal 16
drwxrwxrwx 1 root root 77 Feb 13 18:51 [0m[34;42m.[0m
drwxrwxrwx 1 root root 30 Feb 13 18:50 [34;42m..[0m
-rwxr-xr-x 1 root root 25 Feb 13 18:50 [01;32mapp.py[0m
-r-------- 1 root root 32 Feb 13 18:51 config.yaml
-rwxr-xr-x 1 root root 40 Feb 13 18:51 [01;32mconfig.yaml.bak[0m
-rwxrwxrwx 1 root root  6 Feb 13 18:50 [01;32mversion.txt[0m
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# rm config.yaml.bak
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# sha256sum * | sort > manifest.txt
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# cat manifest.txt
[?2004l0dbaf9c9cce76dbfb8fdab14b28ac9e9aee646c7802714b6f03eda01b65d4962  app.py
59854984853104df5c353e2f681a15fc7924742f9a2e468c29af248dce45ce03  version.txt
d80749e4e4db3ef08d3b2e3953095f447f98a479cf2157a01c6a6fb111ae0b56  config.yaml
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# rm manifest.txt
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# for file in *; do
[?2004l[?2004h>   if [ "$file" != "manifest.txt" ]; then
[?2004l[?2004h>     hash=$(sha256sum "$file" | cut -d' ' -f1)
[?2004l[?2004h>     echo "$hash  $file" >> manifest.txt
[?2004l[?2004h>   fi
[?2004l[?2004h> done
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# sort manifest.txt
[?2004l0dbaf9c9cce76dbfb8fdab14b28ac9e9aee646c7802714b6f03eda01b65d4962  app.py
59854984853104df5c353e2f681a15fc7924742f9a2e468c29af248dce45ce03  version.txt
d80749e4e4db3ef08d3b2e3953095f447f98a479cf2157a01c6a6fb111ae0b56  config.yaml
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# mkdir -p /home/user/deployment_logs
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# cat > /home/user/deployment_logs/sync_2024.log << EOF
[?2004l[?2004h> SYNC COMPLETE
[?2004l[?2004h> SOURCE: /home/user/edge_source/
[?2004l[?2004h> DESTINATION: /home/user/iot_device/edge_app/
[?2004l[?2004h> EOF
[?2004l[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# cat /home/user/deployment_logs/sync_2024.log
[?2004lSYNC COMPLETE
SOURCE: /home/user/edge_source/
DESTINATION: /home/user/iot_device/edge_app/
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# ls -la /home/user/deployment_logs/
[?2004ltotal 4
drwxr-xr-x 2 root root 35 Feb 13 18:51 [0m[01;34m.[0m
drwxrwxrwx 1 root root 59 Feb 13 18:51 [34;42m..[0m
-rw-r--r-- 1 root root 91 Feb 13 18:51 sync_2024.log
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# ls -la /home/user/iot_device/edge_app/
[?2004ltotal 16
drwxrwxrwx 1 root root  74 Feb 13 18:51 [0m[34;42m.[0m
drwxrwxrwx 1 root root  30 Feb 13 18:50 [34;42m..[0m
-rwxr-xr-x 1 root root  25 Feb 13 18:50 [01;32mapp.py[0m
-r-------- 1 root root  32 Feb 13 18:51 config.yaml
-rw-r--r-- 1 root root 229 Feb 13 18:51 manifest.txt
-rwxrwxrwx 1 root root   6 Feb 13 18:50 [01;32mversion.txt[0m
[?2004hroot@1f98cf23-705b-4b19-b94c-0e57be56c156:/home/user/iot_device/edge_app# 