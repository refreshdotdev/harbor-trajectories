[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:~# asciinema rec --stdin /logs/agent/recording.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent/recording.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:~# clear
[?2004l[H[J[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:~# cd /home/user
[?2004l[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# rsync --dry-run -avh --delete --exclude='*.log' --exclude='*.tmp' /home/user/edge_source/ /home/user/iot_device/edge_app/
[?2004lsending incremental file list
config.yaml

sent 103 bytes  received 19 bytes  244.00 bytes/sec
total size is 71  speedup is 0.58 (DRY RUN)
[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# rsync -avh --delete --exclude='*.log' --exclude='*.tmp' /home/user/edge_source/ /home/user/iot_device/edge_app/
[?2004lsending incremental file list
config.yaml

sent 183 bytes  received 35 bytes  436.00 bytes/sec
total size is 71  speedup is 0.33
[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# ls -la /home/user/iot_device/edge_app/
[?2004ltotal 16
drwxrwxrwx 1 root root 33 Feb 12 20:10 [0m[34;42m.[0m
drwxrwxrwx 1 root root 30 Feb 12 20:10 [34;42m..[0m
-rwxrwxrwx 1 root root 25 Feb 12 20:10 [01;32mapp.py[0m
-rwxrwxrwx 1 root root 40 Feb 12 20:10 [01;32mconfig.yaml[0m
-rwxrwxrwx 1 root root  7 Feb 12 20:10 [01;32mold.tmp[0m
-rwxrwxrwx 1 root root  6 Feb 12 20:10 [01;32mversion.txt[0m
[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# rm /home/user/iot_device/edge_app/old.tmp
[?2004l[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# cat /etc/iot_serial
[?2004lSN-314159[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# cat /home/user/iot_device/edge_app/config.yaml
[?2004lsetting: prod
serial: {{SERIAL_NUMBER}}
[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# sed -i 's/{{SERIAL_NUMBER}}/SN-314159/g' /home/user/iot_device/edge_app/config.yaml
[?2004l[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# cat /home/user/iot_device/edge_app/config.yaml
[?2004lsetting: prod
serial: SN-314159
[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# find /home/user/iot_device/edge_app/ -name '*.py' -exec chmod 755 {} \;
[?2004l[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# chmod 400 /home/user/iot_device/edge_app/config.yaml
[?2004l[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# ls -la /home/user/iot_device/edge_app/
[?2004ltotal 12
drwxrwxrwx 1 root root 70 Feb 13 19:11 [0m[34;42m.[0m
drwxrwxrwx 1 root root 30 Feb 12 20:10 [34;42m..[0m
-rwxr-xr-x 1 root root 25 Feb 12 20:10 [01;32mapp.py[0m
-r-------- 1 root root 32 Feb 13 19:11 config.yaml
-rwxrwxrwx 1 root root  6 Feb 12 20:10 [01;32mversion.txt[0m
[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# cd /home/user/iot_device/edge_app
[?2004l[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user/iot_device/edge_app# find . -type f -not -name 'manifest.txt' -exec sha256sum {} \; | sort | awk '{print $1 "  " substr($2, 3)}' > manifest.txt
[?2004l[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user/iot_device/edge_app# cat manifest.txt
[?2004l0dbaf9c9cce76dbfb8fdab14b28ac9e9aee646c7802714b6f03eda01b65d4962  app.py
59854984853104df5c353e2f681a15fc7924742f9a2e468c29af248dce45ce03  version.txt
d80749e4e4db3ef08d3b2e3953095f447f98a479cf2157a01c6a6fb111ae0b56  config.yaml
[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user/iot_device/edge_app# cd /home/user
[?2004l[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# mkdir -p deployment_logs
[?2004l[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# printf "SYNC COMPLETE\nSOURCE: /home/user/edge_source/\nDESTINATION: /home/user/iot_device/edge_app/\n" > deployment_logs/sync_2024.log
[?2004l[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# cat deployment_logs/sync_2024.log
[?2004lSYNC COMPLETE
SOURCE: /home/user/edge_source/
DESTINATION: /home/user/iot_device/edge_app/
[?2004hroot@2365441b-7285-47ad-b4d7-bfc5efa0381e:/home/user# 