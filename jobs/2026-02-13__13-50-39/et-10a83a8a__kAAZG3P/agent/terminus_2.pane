[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user# asciinema rec --stdin /logs/agent/recording.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent/recording.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user# clear
[?2004l[H[J[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user# mkdir -p /home/user/microservices/webroot
[?2004l[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user# chmod 2750 /home/user/microservices/webroot
[?2004l[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user# export TARGET_AUDIENCE="Valued Banking Client"
[?2004l[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user# python3 -c "import sys, codecs; bom_len = len(codecs.BOM_UTF8); print(open('/var/lib/compliance/templates/banner.tpl', 'rb').read()[bom_len:].decode('utf-8').replace('{{TARGET_AUDIENCE}}', '${TARGET_AUDIENCE:Unknown Entity}').encode('iso-8859-1').decode('iso-8859-1'))" > /home/user/microservices/webroot/index.html
[?2004lbash: TARGET_AUDIENCE: Unknown Entity: syntax error in expression (error token is "Entity")
[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user# cd /home/user/microservices/webroot
[?2004l[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user/microservices/webroot# python3 -m http.server 9000 &
[?2004l[1] 667
[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user/microservices/webroot# Serving HTTP on 0.0.0.0 port 9000 (http://0.0.0.0:9000/) ...
cd /home/user
[?2004l[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user# mkdir -p output
[?2004l[?2004hroot@9af87733-0c6e-4f9b-bf65-c1f50b638761:/home/user# md5sum microservices/webroot/index.html | awk '{print $1 "  microservices/webroot/index.html'}' > output/audit_manifest.txt
[?2004l[?2004h> curl -s -I http://localhost:9000/index.html | grep -i '^Content-Length:' | awk '{print $2}' | tr -d '\r' >> output/audit_manifest.txt
[?2004l[?2004h> echo "Task complete. Final verification of artifacts:"
[?2004l[?2004h> echo "1. Directory permissions:"
[?2004l[?2004h> stat -c '%a %A' /home/user/microservices/webroot
[?2004l[?2004h> echo "2. File encoding and content:"
[?2004l[?2004h> file /home/user/microservices/webroot/index.html
[?2004l[?2004h> echo "3. Manifest contents:"
[?2004l[?2004h> cat output/audit_manifest.txt
[?2004l[?2004h> echo "4. Server status:"
[?2004l[?2004h> ss -tlnp | grep :9000
[?2004l[?2004h> cd /home/user/microservices/webroot
[?2004l[?2004h> export TARGET_AUDIENCE="Valued Banking Client"
[?2004l[?2004h> python3 -c "import sys, codecs; bom_len = len(codecs.BOM_UTF8); content = open('/var/lib/compliance/templates/banner.tpl', 'rb').read(); content_no_bom = content[bom_len:]; text_decoded = content_no_bom.decode('utf-8'); text_replaced = text_decoded.replace('{{TARGET_AUDIENCE}}', '${TARGET_AUDIENCE:-Unknown Entity}'); text_iso8859 = text_replaced.encode('iso-8859-1', 'ignore').decode('iso-8859-1'); print(text_iso8859)" > index.html
[?2004l[?2004h> cd /home/user
[?2004l[?2004h> md5sum microservices/webroot/index.html | awk '{print $1 "  microservices/webroot/index.html'}' > output/audit_manifest.txt
[?2004l[?2004h> curl -s -I http://localhost:9000/index.html | grep -i '^Content-Length:' | awk '{print $2}' | tr -d '\r' >> output/audit_manifest.txt
[?2004l[?2004h> echo "Task complete. Final verification of artifacts:"
[?2004l[?2004h> echo "1. File encoding and content:"
[?2004l[?2004h> file /home/user/microservices/webroot/index.html
[?2004l[?2004h> echo "2. Manifest contents:"
[?2004l[?2004h> cat output/audit_manifest.txt
[?2004l[?2004h> echo "3. Server status:"
[?2004l[?2004h> ss -tlnp | grep :9000
[?2004l[?2004h> echo "4. Directory permissions:"
[?2004l[?2004h> stat -c '%a %A' /home/user/microservices/webroot
[?2004l[?2004h> 