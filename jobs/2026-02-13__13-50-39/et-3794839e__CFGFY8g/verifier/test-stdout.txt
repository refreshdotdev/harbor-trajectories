============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-9.0.2, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /tests
collecting ... collected 3 items

../../tests/test_final_state.py::test_corruption_report FAILED           [ 33%]
../../tests/test_final_state.py::test_inventory_content FAILED           [ 66%]
../../tests/test_final_state.py::test_manifest_file FAILED               [100%]

=================================== FAILURES ===================================
____________________________ test_corruption_report ____________________________

    def test_corruption_report():
>       assert CORRUPTION_FILE.exists(), "corruption_report.txt missing"
E       AssertionError: corruption_report.txt missing
E       assert False
E        +  where False = exists()
E        +    where exists = PosixPath('/home/user/mlops/summary/corruption_report.txt').exists

/tests/test_final_state.py:46: AssertionError
____________________________ test_inventory_content ____________________________

    def test_inventory_content():
        assert INVENTORY_FILE.exists(), "inventory.csv missing"
    
        with open(INVENTORY_FILE, 'r', encoding='utf-8') as f:
            lines = f.readlines()
    
        header = lines[0].strip()
        assert header == "Artifact|NameHash|Locations", "Header format incorrect"
    
        data_rows = [line.strip().split('|') for line in lines[1:] if line.strip()]
>       assert len(data_rows) == 4, f"Expected 4 valid artifacts, found {len(data_rows)}"
E       AssertionError: Expected 4 valid artifacts, found 5
E       assert 5 == 4
E        +  where 5 = len([['data_clean.csv', '3635dfc8e2ca96fbb88c42c86428881e', 'exp_alpha'], ['data_dirty.csv', 'dd24d141bd94a6655c50f4ba2c14895a', 'exp_alpha'], ['legacy_model.pt', 'a3bf312e4f4dd93b33592e35bd89558f', 'exp_legacy'], ['résumé_parser.pt', '5774921b351b03775a93c5fa26395d1f', 'exp_gamma'], ['\ufeffmodel_v2.pt', 'dec38dad1d49cf125eca80b94c0a2888', 'exp_beta']])

/tests/test_final_state.py:62: AssertionError
______________________________ test_manifest_file ______________________________

    def test_manifest_file():
        assert MANIFEST_FILE.exists(), "manifest.yaml missing"
    
        with open(MANIFEST_FILE, 'r') as f:
            manifest = yaml.safe_load(f)
    
>       assert manifest['total_artifacts'] == 4
E       assert 5 == 4

/tests/test_final_state.py:84: AssertionError
=========================== short test summary info ============================
FAILED ../../tests/test_final_state.py::test_corruption_report - AssertionErr...
FAILED ../../tests/test_final_state.py::test_inventory_content - AssertionErr...
FAILED ../../tests/test_final_state.py::test_manifest_file - assert 5 == 4
============================== 3 failed in 0.03s ===============================
