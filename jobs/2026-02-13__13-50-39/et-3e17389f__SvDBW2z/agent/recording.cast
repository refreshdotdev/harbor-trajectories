{"version": 2, "width": 160, "height": 40, "timestamp": 1771009756, "env": {"SHELL": "/bin/bash", "TERM": "screen"}}
[0.010569, "o", "\u001b[?2004hroot@e950990b-5af1-429e-bab5-3037ffa432db:~# "]
[1.012965, "i", "clear\r"]
[1.013225, "o", "clear\r\n\u001b[?2004l\r"]
[1.014698, "o", "\u001b[H\u001b[J"]
[1.014931, "o", "\u001b[?2004h"]
[1.014966, "o", "root@e950990b-5af1-429e-bab5-3037ffa432db:~# "]
[53.48696, "i", "mkdir -p /home/user/.venvs /home/user/db_queries\n"]
[53.487292, "o", "mkdir -p /home/user/.venvs /home/user/db_queries\r\n\u001b[?2004l\r"]
[53.49484, "o", "\u001b[?2004hroot@e950990b-5af1-429e-bab5-3037ffa432db:~# "]
[53.660845, "i", "cd /home/user\n"]
[53.660999, "o", "cd /home/user\r\n\u001b[?2004l\r"]
[53.66108, "o", "\u001b[?2004hroot@e950990b-5af1-429e-bab5-3037ffa432db:/home/user# "]
[53.833819, "i", "python3 -m venv .venvs/opt_queries\n"]
[53.834014, "o", "python3 -m venv .venvs/opt_queries\r\n\u001b[?2004l\r"]
[54.905697, "i", ".venvs/opt_queries/bin/pip install sqlparse==0.4.4\n"]
[54.905872, "o", ".venvs/opt_queries/bin/pip install sqlparse==0.4.4\r\n"]
[56.151047, "o", "\u001b[?2004hroot@e950990b-5af1-429e-bab5-3037ffa432db:/home/user# "]
[56.151381, "o", ".venvs/opt_queries/bin/pip install sqlparse==0.4.4\r\n\u001b[?2004l\r"]
[56.456053, "o", "Collecting sqlparse==0.4.4\r\n"]
[56.493339, "o", "  Downloading sqlparse-0.4.4-py3-none-any.whl (41 kB)\r\n"]
[56.493626, "o", "\u001b[?25l"]
[56.494717, "o", "     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m0.0/41.2 KB\u001b[0m \u001b[31m?\u001b[0m eta \u001b[36m-:--:--\u001b[0m"]
[56.50081, "o", "\r\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m41.2/41.2 KB\u001b[0m \u001b[31m6.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\r\n\u001b[?25h"]
[56.520824, "o", "Installing collected packages: sqlparse\r\n"]
[56.547725, "o", "Successfully installed sqlparse-0.4.4\r\n"]
[56.622895, "o", "\u001b[?2004hroot@e950990b-5af1-429e-bab5-3037ffa432db:/home/user# "]
[59.824367, "i", "echo \"sqlparse==0.4.4\" > .venvs/opt_queries/requirements.txt\n"]
[59.824596, "o", "echo \"sqlparse==0.4.4\" > .venvs/opt_queries/requirements.txt\r\n\u001b[?2004l\r"]
[59.824812, "o", "\u001b[?2004hroot@e950990b-5af1-429e-bab5-3037ffa432db:/home/user# "]
[59.954398, "i", "cat > db_queries/process_batch.py << 'EOF'\n#!/usr/bin/env python3\n\nimport os\nimport sys\nimport hashlib\nimport sqlparse\nimport json\nfrom typing import List, Dict, Any\n\ndef process_query(query_str: str) -> str:\n    \"\"\"Process a single query: hash, format, and add comment.\"\"\"\n    # Calculate MD5 hash of original stripped query\n    original_query = query_str.strip()\n    query_hash = hashlib.md5(original_query.encode('utf-8')).hexdigest()\n    \n    # Parse and format with sqlparse\n    parsed = sqlparse.parse(original_query)[0]  # Single statement only\n    formatted = sqlparse.format(parsed, \n                               keyword_case='upper', \n                               indent_columns=True,\n                               use_space_around_operators=True)\n    \n    # Convert to single line and add comment\n    single_line = ' '.join(formatted.splitlines())\n    return f\"{single_line} -- id={query_hash};\"\n\ndef main():\n    # Get batch ID from environment\n    batch_id = os.getenv('DB_BATCH_ID')\n    if not batch_id:\n  "]
[59.95451, "i", "      print(\"Error: DB_BATCH_ID environment variable not set\", file=sys.stderr)\n        sys.exit(1)\n    \n    input_filename = f\"raw_batch_{batch_id}.sql\"\n    input_path = os.path.join('/home/user/db_queries', input_filename)\n    \n    # Create backup\n    backup_path = input_path + '_backup.sql'\n    try:\n        with open(input_path, 'r') as f_in, open(backup_path, 'w') as f_out:\n            f_out.write(f_in.read())\n    except FileNotFoundError:\n        print(f\"Error: Input file {input_path} not found\", file=sys.stderr)\n        sys.exit(1)\n    \n    # Initialize output\n    read_queries: List[str] = []\n    write_queries: List[str] = []\n    \n    # Process queries\n    try:\n        with open(input_path, 'r') as f:\n            for line in f:\n                line = line.strip()\n                if not line or line.startswith('--') or line.startswith('/*'):\n                    continue\n                \n                try:\n                    # Try to parse as single statement\n                    parsed = sqlparse.parse"]
[59.954543, "i", "(line)[0]\n                except IndexError:\n                    print(f\"Warning: Could not parse query: {line}\", file=sys.stderr)\n                    continue\n                \n                # Classify query\n                first_token = parsed.tokens[0]\n                if first_token.value.upper().startswith('SELECT '):\n                    read_queries.append(process_query(line))\n                elif first_token.value.upper() in ['INSERT', 'UPDATE', 'DELETE']: \n                    write_queries.append(process_query(line))\n                else:\n                    print(f\"Warning: Unhandled query type: {line}\", file=sys.stderr)\n                    read_queries.append(process_query(line))  # Default to read\n    except Exception as e:\n        print(f\"Error processing queries: {e}\", file=sys.stderr)\n        sys.exit(1)\n    \n    # Write output files\n    output_base = f\"batch_{batch_id}_optimized\"\n    \n    with open(f\"/home/user/db_queries/{output_base}_read.sql\", 'w') as f_read:\n        f_read.write('\\n'.join(r"]
[59.954569, "i", "ead_queries) + '\\n')\n    \n    with open(f\"/home/user/db_queries/{output_base}_write.sql\", 'w') as f_write:\n        f_write.write('\\n'.join(write_queries) + '\\n')\n    \n    # Create manifest\n    manifest = {\n        \"batch_id\": batch_id,\n        \"read_count\": len(read_queries),\n        \"write_count\": len(write_queries)\n    }\n    with open(f\"/home/user/db_queries/batch_{batch_id}_manifest.json\", 'w') as f_manifest:\n        json.dump(manifest, f_manifest, indent=4)\n    \n    # Create log file\n    total_queries = len(read_queries) + len(write_queries)\n    log_content = f\"\"\"PIPELINE START\nBatch ID: {batch_id}\nInput: {input_filename}\nProcessed: {total_queries}\nPIPELINE END\n\"\"\"\n    with open(f\"/home/user/db_queries/batch_{batch_id}_pipeline.log\", 'w') as f_log:\n        f_log.write(log_content)\n\nif __name__ == '__main__':\n    main()\nEOF"]
[59.954641, "o", "cat > db_queries/process_batch.py << 'EOF'\r\n\u001b[?2004l\r"]
[59.954696, "o", "\u001b[?2004h> "]
[59.954751, "o", "#!/usr/bin/env python3\r\n\u001b[?2004l\r"]
[59.954784, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[59.954809, "o", "\u001b[?2004h> "]
[59.954838, "o", "import os\r\n\u001b[?2004l\r"]
[59.954861, "o", "\u001b[?2004h> "]
[59.954898, "o", "import sys\r\n\u001b[?2004l\r"]
[59.954923, "o", "\u001b[?2004h> "]
[59.954988, "o", "import hashlib\r\n\u001b[?2004l\r"]
[59.955014, "o", "\u001b[?2004h> "]
[59.955065, "o", "import sqlparse\r\n\u001b[?2004l\r"]
[59.955094, "o", "\u001b[?2004h> "]
[59.95513, "o", "import json\r\n\u001b[?2004l\r"]
[59.955153, "o", "\u001b[?2004h> "]
[59.955264, "o", "from typing import List, Dict, Any\r\n\u001b[?2004l\r"]
[59.955287, "o", "\u001b[?2004h> \r\n"]
[59.955311, "o", "\u001b[?2004l\r\u001b[?2004h"]
[59.95534, "o", "> "]
[59.955454, "o", "def process_query(query_str: str) -> str:\r\n\u001b[?2004l\r"]
[59.95548, "o", "\u001b[?2004h> "]
[59.955675, "o", "    \"\"\"Process a single query: hash, format, and add comment.\"\"\"\r\n\u001b[?2004l\r"]
[59.9557, "o", "\u001b[?2004h> "]
[59.955867, "o", "    # Calculate MD5 hash of original stripped query\r\n\u001b[?2004l\r"]
[59.955889, "o", "\u001b[?2004h> "]
[59.956031, "o", "    original_query = query_str.strip()\r\n\u001b[?2004l\r"]
[59.956054, "o", "\u001b[?2004h> "]
[59.956283, "o", "    query_hash = hashlib.md5(original_query.encode('utf-8')).hexdigest()\r\n\u001b[?2004l\r"]
[59.956315, "o", "\u001b[?2004h> "]
[59.956334, "o", "    \r\n\u001b[?2004l\r"]
[59.956359, "o", "\u001b[?2004h> "]
[59.956478, "o", "    # Parse and format with sqlparse\r\n\u001b[?2004l\r"]
[59.956497, "o", "\u001b[?2004h> "]
[59.956729, "o", "    parsed = sqlparse.parse(original_query)[0]  # Single statement only\r\n\u001b[?2004l\r"]
[59.956757, "o", "\u001b[?2004h> "]
[59.956891, "o", "    formatted = sqlparse.format(parsed, \r\n\u001b[?2004l\r"]
[59.956916, "o", "\u001b[?2004h> "]
[59.957103, "o", "                               keyword_case='upper', \r\n\u001b[?2004l\r"]
[59.957132, "o", "\u001b[?2004h> "]
[59.957286, "o", "                               indent_columns=True,\r\n\u001b[?2004l\r"]
[59.95731, "o", "\u001b[?2004h> "]
[59.957513, "o", "                               use_space_around_operators=True)\r\n\u001b[?2004l\r"]
[59.957541, "o", "\u001b[?2004h> "]
[59.957567, "o", "    \r\n\u001b[?2004l\r"]
[59.957587, "o", "\u001b[?2004h> "]
[59.957734, "o", "    # Convert to single line and add comment\r\n\u001b[?2004l\r"]
[59.957756, "o", "\u001b[?2004h> "]
[59.957919, "o", "    single_line = ' '.join(formatted.splitlines())\r\n\u001b[?2004l\r"]
[59.957951, "o", "\u001b[?2004h"]
[59.95797, "o", "> "]
[59.95811, "o", "    return f\"{single_line} -- id={query_hash};\"\r\n\u001b[?2004l\r"]
[59.958132, "o", "\u001b[?2004h> "]
[59.958156, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[59.958171, "o", "> "]
[59.958206, "o", "def main():\r\n\u001b[?2004l\r"]
[59.95823, "o", "\u001b[?2004h"]
[59.958256, "o", "> "]
[59.95835, "o", "    # Get batch ID from environment\r\n\u001b[?2004l\r"]
[59.95837, "o", "\u001b[?2004h> "]
[59.958495, "o", "    batch_id = os.getenv('DB_BATCH_ID')\r\n\u001b[?2004l\r"]
[59.958525, "o", "\u001b[?2004h"]
[59.958549, "o", "> "]
[59.958594, "o", "    if not batch_id:\r\n\u001b[?2004l\r"]
[59.958622, "o", "\u001b[?2004h> "]
[59.958869, "o", "        print(\"Error: DB_BATCH_ID environment variable not set\", file=sys.stderr)\r\n\u001b[?2004l\r"]
[59.958897, "o", "\u001b[?2004h"]
[59.958927, "o", "> "]
[59.958966, "o", "        sys.exit(1)\r\n\u001b[?2004l\r"]
[59.959001, "o", "\u001b[?2004h> "]
[59.959026, "o", "    \r\n\u001b[?2004l\r\u001b[?2004h> "]
[59.959172, "o", "    input_filename = f\"raw_batch_{batch_id}.sql\"\r\n\u001b[?2004l\r"]
[59.959199, "o", "\u001b[?2004h> "]
[59.959415, "o", "    input_path = os.path.join('/home/user/db_queries', input_filename)\r\n\u001b[?2004l\r"]
[59.959441, "o", "\u001b[?2004h> "]
[59.959467, "o", "    \r\n\u001b[?2004l\r"]
[59.959487, "o", "\u001b[?2004h> "]
[59.959554, "o", "    # Create backup\r\n\u001b[?2004l\r"]
[59.959576, "o", "\u001b[?2004h> "]
[59.959722, "o", "    backup_path = input_path + '_backup.sql'\r\n\u001b[?2004l\r"]
[59.959745, "o", "\u001b[?2004h> "]
[59.959782, "o", "    try:\r\n\u001b[?2004l\r"]
[59.959805, "o", "\u001b[?2004h> "]
[59.960047, "o", "        with open(input_path, 'r') as f_in, open(backup_path, 'w') as f_out:\r\n\u001b[?2004l\r"]
[59.960073, "o", "\u001b[?2004h> "]
[59.960189, "o", "            f_out.write(f_in.read())\r\n\u001b[?2004l\r"]
[59.960214, "o", "\u001b[?2004h> "]
[59.960308, "o", "    except FileNotFoundError:\r\n\u001b[?2004l\r"]
[59.96033, "o", "\u001b[?2004h> "]
[59.960567, "o", "        print(f\"Error: Input file {input_path} not found\", file=sys.stderr)\r\n\u001b[?2004l\r"]
[59.96059, "o", "\u001b[?2004h> "]
[59.960656, "o", "        sys.exit(1)\r\n\u001b[?2004l\r"]
[59.960677, "o", "\u001b[?2004h> "]
[59.960704, "o", "    \r\n\u001b[?2004l\r"]
[59.960723, "o", "\u001b[?2004h> "]
[59.960806, "o", "    # Initialize output\r\n\u001b[?2004l\r"]
[59.960827, "o", "\u001b[?2004h"]
[59.960852, "o", "> "]
[59.960939, "o", "    read_queries: List[str] = []\r\n\u001b[?2004l\r"]
[59.960962, "o", "\u001b[?2004h> "]
[59.96108, "o", "    write_queries: List[str] = []\r\n\u001b[?2004l\r"]
[59.961105, "o", "\u001b[?2004h> "]
[59.961133, "o", "    \r\n\u001b[?2004l\r"]
[59.961153, "o", "\u001b[?2004h> "]
[59.961262, "o", "    # Process queries\r\n\u001b[?2004l\r\u001b[?2004h> "]
[59.961294, "o", "    try:\r\n\u001b[?2004l\r"]
[59.961319, "o", "\u001b[?2004h> "]
[59.961461, "o", "        with open(input_path, 'r') as f:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[59.961545, "o", "            for line in f:\r\n\u001b[?2004l\r"]
[59.961565, "o", "\u001b[?2004h> "]
[59.96168, "o", "                line = line.strip()\r\n\u001b[?2004l\r"]
[59.961704, "o", "\u001b[?2004h> "]
[59.961939, "o", "                if not line or line.startswith('--') or line.startswith('/*'):\r\n\u001b[?2004l\r"]
[59.961962, "o", "\u001b[?2004h> "]
[59.962062, "o", "                    continue\r\n\u001b[?2004l\r"]
[59.962087, "o", "\u001b[?2004h"]
[59.962112, "o", "> "]
[59.962151, "o", "                \r\n\u001b[?2004l\r"]
[59.962171, "o", "\u001b[?2004h> "]
[59.96224, "o", "                try:\r\n\u001b[?2004l\r"]
[59.962265, "o", "\u001b[?2004h> "]
[59.962435, "o", "                    # Try to parse as single statement\r\n\u001b[?2004l\r"]
[59.96246, "o", "\u001b[?2004h> "]
[59.962631, "o", "                    parsed = sqlparse.parse(line)[0]\r\n\u001b[?2004l\r"]
[59.962655, "o", "\u001b[?2004h> "]
[59.962767, "o", "                except IndexError:\r\n\u001b[?2004l\r"]
[59.962791, "o", "\u001b[?2004h"]
[59.962815, "o", "> "]
[59.963062, "o", "                    print(f\"Warning: Could not parse query: {line}\", file=sys.stderr)\r\n\u001b[?2004l\r"]
[59.963088, "o", "\u001b[?2004h> "]
[59.963181, "o", "                    continue\r\n\u001b[?2004l\r"]
[59.963201, "o", "\u001b[?2004h> "]
[59.963254, "o", "                \r\n\u001b[?2004l\r"]
[59.96328, "o", "\u001b[?2004h> "]
[59.96337, "o", "                # Classify query\r\n\u001b[?2004l\r"]
[59.963394, "o", "\u001b[?2004h> "]
[59.963528, "o", "                first_token = parsed.tokens[0]\r\n\u001b[?2004l\r"]
[59.963553, "o", "\u001b[?2004h> "]
[59.963741, "o", "                if first_token.value.upper().startswith('SELECT '):\r\n\u001b[?2004l\r"]
[59.963764, "o", "\u001b[?2004h> "]
[59.963919, "o", "                    read_queries.append(process_query(line))\r\n\u001b[?2004l\r"]
[59.963942, "o", "\u001b[?2004h> "]
[59.964203, "o", "                elif first_token.value.upper() in ['INSERT', 'UPDATE', 'DELETE']: \r\n\u001b[?2004l\r"]
[59.964221, "o", "\u001b[?2004h> "]
[59.964418, "o", "                    write_queries.append(process_query(line))\r\n\u001b[?2004l\r"]
[59.964442, "o", "\u001b[?2004h> "]
[59.964518, "o", "                else:\r\n\u001b[?2004l\r"]
[59.96454, "o", "\u001b[?2004h> "]
[59.96479, "o", "                    print(f\"Warning: Unhandled query type: {line}\", file=sys.stderr)\r\n\u001b[?2004l\r"]
[59.964813, "o", "\u001b[?2004h> "]
[59.965076, "o", "                    read_queries.append(process_query(line))  # Default to read\r\n\u001b[?2004l\r"]
[59.965095, "o", "\u001b[?2004h> "]
[59.965188, "o", "    except Exception as e:\r\n\u001b[?2004l\r"]
[59.965226, "o", "\u001b[?2004h"]
[59.965253, "o", "> "]
[59.965418, "o", "        print(f\"Error processing queries: {e}\", file=sys.stderr)\r\n\u001b[?2004l\r"]
[59.965451, "o", "\u001b[?2004h> "]
[59.96551, "o", "        sys.exit(1)\r\n\u001b[?2004l\r"]
[59.965534, "o", "\u001b[?2004h> "]
[59.965568, "o", "    \r\n\u001b[?2004l\r\u001b[?2004h"]
[59.965597, "o", "> "]
[59.965662, "o", "    # Write output files\r\n\u001b[?2004l\r"]
[59.965686, "o", "\u001b[?2004h> "]
[59.965838, "o", "    output_base = f\"batch_{batch_id}_optimized\"\r\n\u001b[?2004l\r"]
[59.965862, "o", "\u001b[?2004h> "]
[59.965884, "o", "    \r\n\u001b[?2004l\r"]
[59.965907, "o", "\u001b[?2004h> "]
[59.966157, "o", "    with open(f\"/home/user/db_queries/{output_base}_read.sql\", 'w') as f_read:\r\n\u001b[?2004l\r"]
[59.966186, "o", "\u001b[?2004h> "]
[59.966347, "o", "        f_read.write('\\n'.join(read_queries) + '\\n')\r\n\u001b[?2004l\r"]
[59.966372, "o", "\u001b[?2004h> "]
[59.966393, "o", "    \r\n\u001b[?2004l\r"]
[59.966414, "o", "\u001b[?2004h> "]
[59.966666, "o", "    with open(f\"/home/user/db_queries/{output_base}_write.sql\", 'w') as f_write:\r\n\u001b[?2004l\r"]
[59.96669, "o", "\u001b[?2004h> "]
[59.966868, "o", "        f_write.write('\\n'.join(write_queries) + '\\n')\r\n\u001b[?2004l\r"]
[59.966896, "o", "\u001b[?2004h> "]
[59.966918, "o", "    \r\n\u001b[?2004l\r"]
[59.96694, "o", "\u001b[?2004h> "]
[59.967015, "o", "    # Create manifest\r\n\u001b[?2004l\r"]
[59.967041, "o", "\u001b[?2004h> "]
[59.967091, "o", "    manifest = {\r\n\u001b[?2004l\r"]
[59.967114, "o", "\u001b[?2004h> "]
[59.967212, "o", "        \"batch_id\": batch_id,\r\n\u001b[?2004l\r"]
[59.967238, "o", "\u001b[?2004h> "]
[59.967366, "o", "        \"read_count\": len(read_queries),\r\n\u001b[?2004l\r"]
[59.967398, "o", "\u001b[?2004h> "]
[59.967525, "o", "        \"write_count\": len(write_queries)\r\n\u001b[?2004l\r"]
[59.96755, "o", "\u001b[?2004h> "]
[59.967572, "o", "    }\r\n\u001b[?2004l\r"]
[59.967602, "o", "\u001b[?2004h> "]
[59.967873, "o", "    with open(f\"/home/user/db_queries/batch_{batch_id}_manifest.json\", 'w') as f_manifest:\r\n\u001b[?2004l\r"]
[59.967898, "o", "\u001b[?2004h> "]
[59.968064, "o", "        json.dump(manifest, f_manifest, indent=4)\r\n\u001b[?2004l\r"]
[59.968088, "o", "\u001b[?2004h> "]
[59.968122, "o", "    \r\n\u001b[?2004l\r"]
[59.968144, "o", "\u001b[?2004h> "]
[59.96821, "o", "    # Create log file\r\n\u001b[?2004l\r"]
[59.968235, "o", "\u001b[?2004h> "]
[59.968427, "o", "    total_queries = len(read_queries) + len(write_queries)\r\n\u001b[?2004l\r"]
[59.968452, "o", "\u001b[?2004h> "]
[59.968577, "o", "    log_content = f\"\"\"PIPELINE START\r\n\u001b[?2004l\r"]
[59.968602, "o", "\u001b[?2004h> "]
[59.968676, "o", "Batch ID: {batch_id}\r\n\u001b[?2004l\r"]
[59.9687, "o", "\u001b[?2004h> "]
[59.968782, "o", "Input: {input_filename}\r\n\u001b[?2004l\r"]
[59.968806, "o", "\u001b[?2004h> "]
[59.968899, "o", "Processed: {total_queries}\r\n\u001b[?2004l\r"]
[59.968923, "o", "\u001b[?2004h> "]
[59.968967, "o", "PIPELINE END\r\n\u001b[?2004l\r"]
[59.968996, "o", "\u001b[?2004h"]
[59.96903, "o", "> \"\"\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[59.969055, "o", "> "]
[59.969319, "o", "    with open(f\"/home/user/db_queries/batch_{batch_id}_pipeline.log\", 'w') as f_log:\r\n\u001b[?2004l\r"]
[59.969351, "o", "\u001b[?2004h> "]
[59.969454, "o", "        f_log.write(log_content)\r\n\u001b[?2004l\r"]
[59.969486, "o", "\u001b[?2004h> \r\n"]
[59.969507, "o", "\u001b[?2004l\r\u001b[?2004h"]
[59.96953, "o", "> "]
[59.96961, "o", "if __name__ == '__main__':\r\n\u001b[?2004l\r"]
[59.969645, "o", "\u001b[?2004h> "]
[59.969683, "o", "    main()\r\n\u001b[?2004l\r"]
[59.969707, "o", "\u001b[?2004h> "]
[59.969728, "o", "EOF"]
[61.083834, "i", "chmod +x db_queries/process_batch.py\n"]
[61.084081, "o", "chmod +x db_queries/process_batch.py\r\n\u001b[?2004l\r\u001b[?2004h> "]
[61.242408, "i", "cat > db_queries/raw_batch_42.sql << 'EOF'\nselect * from employees;\n\nUPDATE salaries SET bonus = bonus * 1.1;\n\n-- Comment line\nINSERT INTO departments (name) VALUES ('New Dept');\nDELETE FROM old_data WHERE expired = true;\n\nSELECT name, salary FROM employees WHERE salary > 50000;\nEOF"]
[61.242759, "o", "cat > db_queries/raw_batch_42.sql << 'EOF'\r\n"]
[61.242777, "o", "\u001b[?2004l\r"]
[61.242877, "o", "\u001b[?2004h> "]
[61.243063, "o", "select * from employees;\r\n\u001b[?2004l\r"]
[61.243134, "o", "\u001b[?2004h"]
[61.243203, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[61.243496, "o", "UPDATE salaries SET bonus = bonus * 1.1;\r\n\u001b[?2004l\r"]
[61.243556, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[61.243613, "o", "\u001b[?2004h"]
[61.243685, "o", "> "]
[61.243753, "o", "-- Comment line\r\n\u001b[?2004l\r"]
[61.243806, "o", "\u001b[?2004h> "]
[61.244182, "o", "INSERT INTO departments (name) VALUES ('New Dept');\r\n\u001b[?2004l\r"]
[61.244235, "o", "\u001b[?2004h> "]
[61.244547, "o", "DELETE FROM old_data WHERE expired = true;\r\n\u001b[?2004l\r"]
[61.244596, "o", "\u001b[?2004h"]
[61.244645, "o", "> \r\n\u001b[?2004l\r"]
[61.24469, "o", "\u001b[?2004h> "]
[61.245095, "o", "SELECT name, salary FROM employees WHERE salary > 50000;\r\n\u001b[?2004l\r"]
[61.245144, "o", "\u001b[?2004h> "]
[61.245198, "o", "EOF"]
[61.386964, "i", "DB_BATCH_ID=42 .venvs/opt_queries/bin/python db_queries/process_batch.py\n"]
[61.387466, "o", "DB_BATCH_ID=42 .venvs/opt_queries/bin/python db_queries/process_batch.py\r\n\u001b[?2004l\r"]
[61.387525, "o", "\u001b[?2004h"]
[61.387565, "o", "> "]
[62.506792, "i", "head -n 2 .venvs/opt_queries/requirements.txt\n"]
[62.507273, "o", "head -n 2 .venvs/opt_queries/requirements.txt\r\n\u001b[?2004l\r"]
[62.507365, "o", "\u001b[?2004h> "]
[62.660581, "i", "cat db_queries/batch_42_manifest.json\n"]
[62.660896, "o", "cat db_queries/batch_42_manifest.json\r\n\u001b[?2004l\r"]
[62.660949, "o", "\u001b[?2004h"]
[62.66101, "o", "> "]
[62.796923, "i", "cat db_queries/batch_42_pipeline.log\n"]
[62.797387, "o", "cat db_queries/batch_42_pipeline.log\r\n\u001b[?2004l\r"]
[62.797451, "o", "\u001b[?2004h"]
[62.797503, "o", "> "]
