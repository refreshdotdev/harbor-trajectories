{"version": 2, "width": 160, "height": 40, "timestamp": 1771009087, "env": {"SHELL": "/bin/bash", "TERM": "screen"}}
[0.006343, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[0.944078, "i", "clear\r"]
[0.944232, "o", "clear\r\n\u001b[?2004l\r"]
[0.945831, "o", "\u001b[H\u001b[J"]
[0.94603, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[14.762548, "i", "cat > solve.sh << 'EOF'\n#!/bin/bash\n\n# Legacy Data Ingestion Script\n# Processes billing data files according to mainframe protocols\n\n# Create required directories if they don't exist\nmkdir -p /home/user/incoming\nmkdir -p /home/user/etl/quarantine\nmkdir -p /home/user/etl/archive\nmkdir -p /home/user/etl/raw_backup\nmkdir -p /home/user/etl/staging\nmkdir -p /home/user/etl/logs\n\n# Configuration\nCONFIG_FILE=\"/etc/legacy_etl/settings.conf\"\nREGION_CODE=$(grep -E '^REGION_CODE=' \"$CONFIG_FILE\" | cut -d'=' -f2- | tr -d ' \\t\\r\\n')\nRETENTION_POLICY=$(grep -E '^RETENTION_POLICY=' \"$CONFIG_FILE\" | cut -d'=' -f2- | tr -d ' \\t\\r\\n')\nEOF"]
[14.762759, "o", "cat > solve.sh << 'EOF'\r\n"]
[14.762793, "o", "\u001b[?2004l\r"]
[14.762838, "o", "\u001b[?2004h"]
[14.762862, "o", "> "]
[14.762935, "o", "#!/bin/bash\r\n"]
[14.762953, "o", "\u001b[?2004l\r"]
[14.762975, "o", "\u001b[?2004h"]
[14.762996, "o", "> "]
[14.763013, "o", "\r\n\u001b[?2004l\r"]
[14.763032, "o", "\u001b[?2004h"]
[14.763054, "o", "> "]
[14.763234, "o", "# Legacy Data Ingestion Script\r\n"]
[14.763257, "o", "\u001b[?2004l\r"]
[14.763273, "o", "\u001b[?2004h"]
[14.763291, "o", "> "]
[14.763715, "o", "# Processes billing data files according to mainframe protocols\r\n\u001b[?2004l\r"]
[14.763809, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[14.763864, "o", "> "]
[14.76414, "o", "# Create required directories if they don't exist\r\n\u001b[?2004l\r"]
[14.764186, "o", "\u001b[?2004h"]
[14.764235, "o", "> "]
[14.764369, "o", "mkdir -p /home/user/incoming\r\n\u001b[?2004l\r"]
[14.764415, "o", "\u001b[?2004h> "]
[14.764648, "o", "mkdir -p /home/user/etl/quarantine\r\n\u001b[?2004l\r"]
[14.764677, "o", "\u001b[?2004h"]
[14.764727, "o", "> "]
[14.764885, "o", "mkdir -p /home/user/etl/archive\r\n\u001b[?2004l\r"]
[14.76493, "o", "\u001b[?2004h"]
[14.764945, "o", "> "]
[14.765146, "o", "mkdir -p /home/user/etl/raw_backup\r\n\u001b[?2004l\r"]
[14.765204, "o", "\u001b[?2004h> "]
[14.765403, "o", "mkdir -p /home/user/etl/staging\r\n\u001b[?2004l\r"]
[14.765455, "o", "\u001b[?2004h"]
[14.765501, "o", "> "]
[14.765671, "o", "mkdir -p /home/user/etl/logs\r\n\u001b[?2004l\r"]
[14.765714, "o", "\u001b[?2004h"]
[14.765759, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h"]
[14.765803, "o", "> "]
[14.765883, "o", "# Configuration\r\n\u001b[?2004l\r"]
[14.765933, "o", "\u001b[?2004h"]
[14.765961, "o", "> "]
[14.766225, "o", "CONFIG_FILE=\"/etc/legacy_etl/settings.conf\"\r\n\u001b[?2004l\r"]
[14.766263, "o", "\u001b[?2004h"]
[14.766305, "o", "> "]
[14.766824, "o", "REGION_CODE=$(grep -E '^REGION_CODE=' \"$CONFIG_FILE\" | cut -d'=' -f2- | tr -d ' \\t\\r\\n')\r\n\u001b[?2004l\r"]
[14.766864, "o", "\u001b[?2004h"]
[14.766902, "o", "> "]
[14.767485, "o", "RETENTION_POLICY=$(grep -E '^RETENTION_POLICY=' \"$CONFIG_FILE\" | cut -d'=' -f2- | tr -d ' \\t\\r\\n')\r\n\u001b[?2004l\r"]
[14.767547, "o", "\u001b[?2004h> "]
[14.767576, "o", "EOF"]
[27.740542, "i", "cat >> solve.sh << 'EOF'\n\n# Initialize variables\nTOTAL_RECORDS=0\ndeclare -A PROCESSED_FILES\n\n# Process files in incoming directory\nfor csv_file in /home/user/incoming/*.csv; do\n  if [[ -f \"$csv_file\" ]]; then\n    # Check for UTF-8 BOM (EF BB BF)\n    BOM_CHECK=$(head -c 3 \"$csv_file\" | od -An -tx1 | tr -d ' \\n')\n    if [[ \"$BOM_CHECK\" == \"efbbbf\" ]]; then\n      echo \"File $csv_file has UTF-8 BOM - quarantining\"\n      mv -f \"$csv_file\" /home/user/etl/quarantine/\n      continue\n    fi\n\n    # Process clean files\n    base_name=$(basename \"$csv_file\" .csv)\nEOF"]
[27.740778, "o", "cat >> solve.sh << 'EOF'\r\n"]
[27.740839, "o", "\u001b[?2004l\r\u001b[?2004h"]
[27.740872, "o", "> \r\n\u001b[?2004l\r"]
[27.740915, "o", "\u001b[?2004h"]
[27.740939, "o", "> "]
[27.741106, "o", "# Initialize variables\r\n\u001b[?2004l\r"]
[27.741141, "o", "\u001b[?2004h"]
[27.741178, "o", "> "]
[27.741272, "o", "TOTAL_RECORDS=0\r\n\u001b[?2004l\r"]
[27.741307, "o", "\u001b[?2004h"]
[27.741328, "o", "> "]
[27.741515, "o", "declare -A PROCESSED_FILES\r\n\u001b[?2004l\r"]
[27.741575, "o", "\u001b[?2004h"]
[27.741594, "o", "> "]
[27.74162, "o", "\r\n\u001b[?2004l\r"]
[27.741645, "o", "\u001b[?2004h"]
[27.741668, "o", "> "]
[27.741914, "o", "# Process files in incoming directory\r\n\u001b[?2004l\r"]
[27.741951, "o", "\u001b[?2004h"]
[27.741994, "o", "> "]
[27.742291, "o", "for csv_file in /home/user/incoming/*.csv; do\r\n\u001b[?2004l\r"]
[27.742337, "o", "\u001b[?2004h"]
[27.742374, "o", "> "]
[27.742969, "o", "  if [[ -f \"$csv_file\" ]]; then\r\n\u001b[?2004l\r"]
[27.743011, "o", "\u001b[?2004h"]
[27.743059, "o", "> "]
[27.743283, "o", "    # Check for UTF-8 BOM (EF BB BF)\r\n\u001b[?2004l\r"]
[27.743329, "o", "\u001b[?2004h"]
[27.743364, "o", "> "]
[27.743835, "o", "    BOM_CHECK=$(head -c 3 \"$csv_file\" | od -An -tx1 | tr -d ' \\n')\r\n\u001b[?2004l\r"]
[27.743909, "o", "\u001b[?2004h> "]
[27.744186, "o", "    if [[ \"$BOM_CHECK\" == \"efbbbf\" ]]; then\r\n\u001b[?2004l\r"]
[27.744226, "o", "\u001b[?2004h"]
[27.744261, "o", "> "]
[27.744648, "o", "      echo \"File $csv_file has UTF-8 BOM - quarantining\"\r\n\u001b[?2004l\r"]
[27.744682, "o", "\u001b[?2004h"]
[27.744742, "o", "> "]
[27.745059, "o", "      mv -f \"$csv_file\" /home/user/etl/quarantine/\r\n\u001b[?2004l\r"]
[27.745103, "o", "\u001b[?2004h"]
[27.745144, "o", "> "]
[27.745229, "o", "      continue\r\n\u001b[?2004l\r"]
[27.74527, "o", "\u001b[?2004h"]
[27.745314, "o", "> "]
[27.745355, "o", "    fi\r\n\u001b[?2004l\r"]
[27.745398, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[27.745449, "o", "\u001b[?2004h"]
[27.745491, "o", "> "]
[27.745667, "o", "    # Process clean files\r\n\u001b[?2004l\r"]
[27.745714, "o", "\u001b[?2004h> "]
[27.746023, "o", "    base_name=$(basename \"$csv_file\" .csv)\r\n\u001b[?2004l\r"]
[27.746065, "o", "\u001b[?2004h"]
[27.746109, "o", "> EOF"]
[40.552055, "i", "cat >> solve.sh << 'EOF'\n\n    # Convert CSV to TSV and count records\n    tsv_file=\"/home/user/etl/staging/${base_name}.tsv\"\n    rows=$(csvtool reform -u TSB \"$csv_file\" | tail -n +2 | wc -l)\n    \n    # Create TSV file\n    if [[ $rows -gt 0 ]]; then\n      csvtool reform -u TSB \"$csv_file\" > \"$tsv_file\"\n    else\n      csvtool reform -u TSB \"$csv_file\" > \"$tsv_file\"\n    fi\n\n    # Update counters and store metadata\n    TOTAL_RECORDS=$((TOTAL_RECORDS + rows))\n    original_md5=$(md5sum \"$csv_file\" | cut -d' ' -f1)\n    PROCESSED_FILES[$csv_file]=\"$original_md5|$rows\"\n\n    # Move original CSV to raw backup\n    mv -f \"$csv_file\" /home/user/etl/raw_backup/\n  fi\ndone\nEOF"]
[40.552306, "o", "cat >> solve.sh << 'EOF'\r\n\u001b[?2004l\r"]
[40.552386, "o", "\u001b[?2004h"]
[40.552433, "o", "> \r\n\u001b[?2004l\r"]
[40.552479, "o", "\u001b[?2004h> "]
[40.552788, "o", "    # Convert CSV to TSV and count records\r\n\u001b[?2004l\r"]
[40.552838, "o", "\u001b[?2004h> "]
[40.55322, "o", "    tsv_file=\"/home/user/etl/staging/${base_name}.tsv\"\r\n\u001b[?2004l\r"]
[40.553283, "o", "\u001b[?2004h> "]
[40.553765, "o", "    rows=$(csvtool reform -u TSB \"$csv_file\" | tail -n +2 | wc -l)\r\n\u001b[?2004l\r"]
[40.553819, "o", "\u001b[?2004h> "]
[40.553858, "o", "    \r\n\u001b[?2004l\r"]
[40.5539, "o", "\u001b[?2004h"]
[40.553935, "o", "> "]
[40.554084, "o", "    # Create TSV file\r\n\u001b[?2004l\r"]
[40.554121, "o", "\u001b[?2004h"]
[40.554156, "o", "> "]
[40.554357, "o", "    if [[ $rows -gt 0 ]]; then\r\n\u001b[?2004l\r"]
[40.554415, "o", "\u001b[?2004h> "]
[40.554776, "o", "      csvtool reform -u TSB \"$csv_file\" > \"$tsv_file\"\r\n\u001b[?2004l\r"]
[40.554859, "o", "\u001b[?2004h> "]
[40.554922, "o", "    else\r\n\u001b[?2004l\r"]
[40.554989, "o", "\u001b[?2004h> "]
[40.555327, "o", "      csvtool reform -u TSB \"$csv_file\" > \"$tsv_file\"\r\n\u001b[?2004l\r"]
[40.555415, "o", "\u001b[?2004h> "]
[40.555469, "o", "    fi\r\n\u001b[?2004l\r\u001b[?2004h"]
[40.555512, "o", "> \r\n\u001b[?2004l\r"]
[40.555572, "o", "\u001b[?2004h> "]
[40.555835, "o", "    # Update counters and store metadata\r\n\u001b[?2004l\r"]
[40.55587, "o", "\u001b[?2004h"]
[40.555915, "o", "> "]
[40.556176, "o", "    TOTAL_RECORDS=$((TOTAL_RECORDS + rows))\r\n\u001b[?2004l\r"]
[40.556223, "o", "\u001b[?2004h"]
[40.556259, "o", "> "]
[40.556625, "o", "    original_md5=$(md5sum \"$csv_file\" | cut -d' ' -f1)\r\n\u001b[?2004l\r"]
[40.556668, "o", "\u001b[?2004h"]
[40.556716, "o", "> "]
[40.557058, "o", "    PROCESSED_FILES[$csv_file]=\"$original_md5|$rows\"\r\n\u001b[?2004l\r"]
[40.557108, "o", "\u001b[?2004h> \r\n"]
[40.557159, "o", "\u001b[?2004l\r\u001b[?2004h"]
[40.557208, "o", "> "]
[40.557435, "o", "    # Move original CSV to raw backup\r\n\u001b[?2004l\r"]
[40.55748, "o", "\u001b[?2004h> "]
[40.557873, "o", "    mv -f \"$csv_file\" /home/user/etl/raw_backup/\r\n\u001b[?2004l\r"]
[40.557917, "o", "\u001b[?2004h> "]
[40.55797, "o", "  fi\r\n\u001b[?2004l\r"]
[40.558015, "o", "\u001b[?2004h> "]
[40.558075, "o", "done\r\n\u001b[?2004l\r"]
[40.558134, "o", "\u001b[?2004h> "]
[40.558182, "o", "EOF"]
[51.509891, "i", "cat >> solve.sh << 'EOF'\n\n# Create archive tarball\ncurrent_date=$(date +%Y%m%d)\narchive_name=\"data_${REGION_CODE}_${current_date}_${TOTAL_RECORDS}.tar.gz\"\narchive_path=\"/home/user/etl/archive/$archive_name\"\n\n# Create tarball with TSV files\nfind /home/user/etl/staging -maxdepth 1 -type f -name '*.tsv' -print0 |\n  tar --null -czf \"$archive_path\" -T -\n\n# Extract tarball to staging directory\ntar -xzf \"$archive_path\" -C /home/user/etl/staging\n\nEOF"]
[51.510144, "o", "cat >> solve.sh << 'EOF'\r\n\u001b[?2004l\r"]
[51.510214, "o", "\u001b[?2004h"]
[51.510265, "o", "> \r\n\u001b[?2004l\r"]
[51.51032, "o", "\u001b[?2004h> "]
[51.510473, "o", "# Create archive tarball\r\n\u001b[?2004l\r"]
[51.510542, "o", "\u001b[?2004h"]
[51.5106, "o", "> "]
[51.510761, "o", "current_date=$(date +%Y%m%d)\r\n\u001b[?2004l\r"]
[51.510799, "o", "\u001b[?2004h"]
[51.510839, "o", "> "]
[51.511298, "o", "archive_name=\"data_${REGION_CODE}_${current_date}_${TOTAL_RECORDS}.tar.gz\"\r\n\u001b[?2004l\r"]
[51.511342, "o", "\u001b[?2004h"]
[51.511378, "o", "> "]
[51.511704, "o", "archive_path=\"/home/user/etl/archive/$archive_name\"\r\n\u001b[?2004l\r"]
[51.511746, "o", "\u001b[?2004h"]
[51.511789, "o", "> \r\n\u001b[?2004l\r"]
[51.511831, "o", "\u001b[?2004h> "]
[51.512049, "o", "# Create tarball with TSV files\r\n\u001b[?2004l\r"]
[51.512084, "o", "\u001b[?2004h"]
[51.512123, "o", "> "]
[51.512581, "o", "find /home/user/etl/staging -maxdepth 1 -type f -name '*.tsv' -print0 |\r\n\u001b[?2004l\r"]
[51.512633, "o", "\u001b[?2004h"]
[51.512671, "o", "> "]
[51.512906, "o", "  tar --null -czf \"$archive_path\" -T -\r\n\u001b[?2004l\r"]
[51.512963, "o", "\u001b[?2004h"]
[51.512999, "o", "> \r\n\u001b[?2004l\r"]
[51.513038, "o", "\u001b[?2004h> "]
[51.513319, "o", "# Extract tarball to staging directory\r\n\u001b[?2004l\r"]
[51.513366, "o", "\u001b[?2004h> "]
[51.513724, "o", "tar -xzf \"$archive_path\" -C /home/user/etl/staging\r\n\u001b[?2004l\r"]
[51.513772, "o", "\u001b[?2004h"]
[51.513822, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h"]
[51.513857, "o", "> EOF"]
[64.312958, "i", "cat >> solve.sh << 'EOF'\n\n# Sort orders.tsv by total_amount (3rd column) descending\nif [[ -f \"/home/user/etl/staging/orders.tsv\" ]]; then\n  sort -t$'\\t' -k3,3nr /home/user/etl/staging/orders.tsv -o /home/user/etl/staging/orders.tsv\nfi\n\n# Generate manifest file\nmanifest_file=\"/home/user/etl/logs/process_manifest.txt\"\n\n# Create header\necho \"Legacy ETL Manifest © 2023\" > \"$manifest_file\"\n\n# Add file entries in alphabetical order\nfor csv_file in $(echo ${!PROCESSED_FILES[@]} | sort); do\n  base_csv=$(basename \"$csv_file\" .csv)\n  echo \"$base_csv|${PROCESSED_FILES[$csv_file]}\" >> \"$manifest_file\"\ndone\n\n# Convert manifest to ISO-8859-1 encoding-iconv -f UTF-8 -t ISO-8859-1 \"$manifest_file\" > \"${manifest_file}.tmp\" && mv \"${manifest_file}.tmp\" \"$manifest_file\"\nEOF"]
[64.313177, "o", "cat >> solve.sh << 'EOF'\r\n"]
[64.313204, "o", "\u001b[?2004l\r"]
[64.31324, "o", "\u001b[?2004h"]
[64.313271, "o", "> \r\n\u001b[?2004l\r"]
[64.313303, "o", "\u001b[?2004h"]
[64.313332, "o", "> "]
[64.313719, "o", "# Sort orders.tsv by total_amount (3rd column) descending\r\n\u001b[?2004l\r"]
[64.313763, "o", "\u001b[?2004h"]
[64.313794, "o", "> "]
[64.31412, "o", "if [[ -f \"/home/user/etl/staging/orders.tsv\" ]]; then\r\n"]
[64.31414, "o", "\u001b[?2004l\r"]
[64.314164, "o", "\u001b[?2004h"]
[64.314185, "o", "> "]
[64.31479, "o", "  sort -t$'\\t' -k3,3nr /home/user/etl/staging/orders.tsv -o /home/user/etl/staging/orders.tsv\r\n"]
[64.314809, "o", "\u001b[?2004l\r"]
[64.314839, "o", "\u001b[?2004h"]
[64.314859, "o", "> "]
[64.314879, "o", "fi\r\n\u001b[?2004l\r"]
[64.314903, "o", "\u001b[?2004h"]
[64.314919, "o", "> "]
[64.314937, "o", "\r\n\u001b[?2004l\r"]
[64.314959, "o", "\u001b[?2004h"]
[64.314974, "o", "> "]
[64.315132, "o", "# Generate manifest file\r\n"]
[64.315158, "o", "\u001b[?2004l\r"]
[64.315175, "o", "\u001b[?2004h"]
[64.315193, "o", "> "]
[64.315559, "o", "manifest_file=\"/home/user/etl/logs/process_manifest.txt\"\r\n"]
[64.315577, "o", "\u001b[?2004l\r"]
[64.315597, "o", "\u001b[?2004h"]
[64.315617, "o", "> \r\n"]
[64.315636, "o", "\u001b[?2004l\r"]
[64.315652, "o", "\u001b[?2004h"]
[64.315679, "o", "> "]
[64.315774, "o", "# Create header\r\n"]
[64.31579, "o", "\u001b[?2004l\r"]
[64.315811, "o", "\u001b[?2004h"]
[64.315828, "o", "> "]
[64.316176, "o", "echo \"Legacy ETL Manifest © 2023\" > \"$manifest_file\"\r\n"]
[64.316193, "o", "\u001b[?2004l\r"]
[64.316214, "o", "\u001b[?2004h"]
[64.31623, "o", "> "]
[64.316258, "o", "\r\n\u001b[?2004l\r"]
[64.316275, "o", "\u001b[?2004h"]
[64.316292, "o", "> "]
[64.316567, "o", "# Add file entries in alphabetical order\r\n\u001b[?2004l\r"]
[64.316604, "o", "\u001b[?2004h"]
[64.316624, "o", "> "]
[64.316991, "o", "for csv_file in $(echo ${!PROCESSED_FILES[@]} | sort); do\r\n"]
[64.317007, "o", "\u001b[?2004l\r"]
[64.317028, "o", "\u001b[?2004h"]
[64.317045, "o", "> "]
[64.317301, "o", "  base_csv=$(basename \"$csv_file\" .csv)\r\n"]
[64.317318, "o", "\u001b[?2004l\r"]
[64.317339, "o", "\u001b[?2004h"]
[64.317355, "o", "> "]
[64.318516, "o", "  echo \"$base_csv|${PROCESSED_FILES[$csv_file]}\" >> \"$manifest_file\"\r\n\u001b[?2004l\r\u001b[?2004h> done\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[64.319081, "o", "# Convert manifest to ISO-8859-1 encoding-iconv -f UTF-8 -t ISO-8859-1 \"$manifest_file\" > \"${manifest_file}.tmp\" && mv \"${manifest_file}.tmp\" \"$manifest_file\" \r"]
[64.319214, "o", "\u001bM\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[K\"\r\n\u001b[?2004l\r\u001b[?2004h> EOF"]
[75.451224, "i", "chmod +x solve.sh\n"]
[75.451388, "o", "chmod +x solve.sh\r\n\u001b[?2004l\r\u001b[?2004h> "]
[75.652772, "i", "apt update && apt install -y csvtool iconv\n"]
[75.653091, "o", "apt update && apt install -y csvtool iconv\r\n\u001b[?2004l\r"]
[75.653151, "o", "\u001b[?2004h"]
[75.653196, "o", "> "]
[76.66409, "i", "mkdir -p /etc/legacy_etl\n"]
[76.664432, "o", "mkdir -p /etc/legacy_etl\r\n\u001b[?2004l\r"]
[76.664466, "o", "\u001b[?2004h"]
[76.664639, "o", "> "]
[76.774133, "i", "cat > /etc/legacy_etl/settings.conf << 'EOF'\n# Legacy ETL Configuration\nREGION_CODE=NA\nRETENTION_POLICY=30d\n# This is a comment\nEOF\n"]
[76.774593, "o", "cat > /etc/legacy_etl/settings.conf << 'EOF'\r\n\u001b[?2004l\r"]
[76.774658, "o", "\u001b[?2004h> "]
[76.774821, "o", "# Legacy ETL Configuration\r\n\u001b[?2004l\r"]
[76.774862, "o", "\u001b[?2004h"]
[76.774896, "o", "> "]
[76.774984, "o", "REGION_CODE=NA\r\n\u001b[?2004l\r"]
[76.775023, "o", "\u001b[?2004h"]
[76.775054, "o", "> "]
[76.77518, "o", "RETENTION_POLICY=30d\r\n\u001b[?2004l\r"]
[76.775215, "o", "\u001b[?2004h"]
[76.775246, "o", "> "]
[76.775406, "o", "# This is a comment\r\n\u001b[?2004l\r"]
[76.77546, "o", "\u001b[?2004h> EOF\r\n\u001b[?2004l\r"]
[76.777323, "o", "\u001b[?2004h"]
[76.777382, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[90.413372, "i", "mkdir -p /home/user/incoming\n"]
[90.413635, "o", "mkdir -p /home/user/incoming\r\n\u001b[?2004l\r"]
[90.415592, "o", "\u001b[?2004h"]
[90.415613, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[90.620095, "i", "cat > /home/user/incoming/orders.csv << 'EOF'\norder_id,customer,total_amount\n101,John Doe,150.50\n102,Jane Smith,200.75\n103,Bob Johnson,89.99\nEOF"]
[90.620742, "o", "cat > /home/user/incoming/orders.csv << 'EOF'\r\n\u001b[?2004l\r\u001b[?2004h> order_id,customer,total_amount\r\n\u001b[?2004l\r\u001b[?2004h> 101,John Doe,150.50\r\n\u001b[?2004l\r\u001b[?2004h> "]
[90.620787, "o", "102,Jane Smith,200.75\r\n\u001b[?2004l\r\u001b[?2004h> "]
[90.620914, "o", "103,Bob Johnson,89.99\r\n\u001b[?2004l\r\u001b[?2004h> EOF"]
[90.795015, "i", "cat > /home/user/incoming/payments.csv << 'EOF'\npayment_id,order_id,amount\n201,101,150.50\n202,102,200.75\n203,103,89.99\nEOF"]
[90.795433, "o", "cat > /home/user/incoming/payments.csv << 'EOF'\r\n\u001b[?2004l\r"]
[90.795506, "o", "\u001b[?2004h"]
[90.795568, "o", "> "]
[90.795788, "o", "payment_id,order_id,amount\r\n\u001b[?2004l\r\u001b[?2004h> "]
[90.795888, "o", "201,101,150.50\r\n\u001b[?2004l\r"]
[90.795943, "o", "\u001b[?2004h"]
[90.795993, "o", "> "]
[90.796088, "o", "202,102,200.75\r\n\u001b[?2004l\r\u001b[?2004h"]
[90.796135, "o", "> "]
[90.796216, "o", "203,103,89.99\r\n\u001b[?2004l\r"]
[90.796253, "o", "\u001b[?2004h"]
[90.796303, "o", "> EOF"]
[90.938044, "i", "# Create a file with UTF-8 BOM\npython3 -c \"open('/home/user/incoming/corrupt.csv', 'w', encoding='utf-8-sig').write('col1,col2\\ncorrupt,file')\"\n"]
[90.938255, "o", "# Create a file with UTF-8 BOM\r\n\u001b[?2004l\r"]
[90.938321, "o", "\u001b[?2004h> "]
[90.938993, "o", "python3 -c \"open('/home/user/incoming/corrupt.csv', 'w', encoding='utf-8-sig').write('col1,col2\\ncorrupt,file')\"\r\n\u001b[?2004l\r"]
[90.939044, "o", "\u001b[?2004h> "]
[107.908197, "i", "rm -rf /home/user/incoming/* /home/user/etl/*\n"]
[107.908726, "o", "rm -rf /home/user/incoming/* /home/user/etl/*\r\n\u001b[?2004l\r"]
[107.908818, "o", "\u001b[?2004h> "]
[108.069318, "i", "cat > /home/user/incoming/orders.csv << 'EOF'\norder_id,customer,total_amount\n101,John Doe,150.50\n102,Jane Smith,200.75\n103,Bob Johnson,89.99\nEOF\n"]
[108.069663, "o", "cat > /home/user/incoming/orders.csv << 'EOF'\r\n\u001b[?2004l\r"]
[108.069716, "o", "\u001b[?2004h> "]
[108.069852, "o", "order_id,customer,total_amount\r\n\u001b[?2004l\r"]
[108.069897, "o", "\u001b[?2004h> "]
[108.070017, "o", "101,John Doe,150.50\r\n\u001b[?2004l\r"]
[108.070063, "o", "\u001b[?2004h> "]
[108.070208, "o", "102,Jane Smith,200.75\r\n\u001b[?2004l\r"]
[108.07025, "o", "\u001b[?2004h> "]
[108.070393, "o", "103,Bob Johnson,89.99\r\n\u001b[?2004l\r"]
[108.070435, "o", "\u001b[?2004h> "]
[108.070483, "o", "EOF\r\n\u001b[?2004l\r"]
[108.075163, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[108.245682, "i", "cat > /home/user/incoming/payments.csv << 'EOF'\npayment_id,order_id,amount\n201,101,150.50\n202,102,200.75\n203,103,89.99\nEOF\n"]
[108.24603, "o", "cat > /home/user/incoming/payments.csv << 'EOF'\r\n\u001b[?2004l\r"]
[108.246098, "o", "\u001b[?2004h> "]
[108.246229, "o", "payment_id,order_id,amount\r\n\u001b[?2004l\r"]
[108.246274, "o", "\u001b[?2004h> "]
[108.246372, "o", "201,101,150.50\r\n\u001b[?2004l\r"]
[108.246412, "o", "\u001b[?2004h> "]
[108.246512, "o", "202,102,200.75\r\n\u001b[?2004l\r"]
[108.246567, "o", "\u001b[?2004h> "]
[108.24667, "o", "203,103,89.99\r\n\u001b[?2004l\r"]
[108.24671, "o", "\u001b[?2004h> "]
[108.246749, "o", "EOF\r\n\u001b[?2004l\r"]
[108.248873, "o", "\u001b[?2004h"]
[108.248918, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[108.43598, "i", "python3 -c \"open('/home/user/incoming/corrupt.csv', 'w', encoding='utf-8-sig').write('col1,col2\\ncorrupt,file')\"\n"]
[108.436878, "o", "python3 -c \"open('/home/user/incoming/corrupt.csv', 'w', encoding='utf-8-sig').write('col1,col2\\ncorrupt,file')\"\r\n\u001b[?2004l\r"]
[108.45656, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[108.54885, "i", "cat > /home/user/incoming/customers.csv << 'EOF'\nname,email,country\nAlice,alice@example.com,USA\nBob,bob@example.com,Canada\nCharlie,charlie@example.com,UK\nEOF\n"]
[108.549219, "o", "cat > /home/user/incoming/customers.csv << 'EOF'\r\n\u001b[?2004l\r"]
[108.549308, "o", "\u001b[?2004h> "]
[108.549425, "o", "name,email,country\r\n\u001b[?2004l\r"]
[108.549476, "o", "\u001b[?2004h> "]
[108.549656, "o", "Alice,alice@example.com,USA\r\n\u001b[?2004l\r"]
[108.549675, "o", "\u001b[?2004h"]
[108.549733, "o", "> "]
[108.549866, "o", "Bob,bob@example.com,Canada\r\n\u001b[?2004l\r"]
[108.549916, "o", "\u001b[?2004h> "]
[108.550104, "o", "Charlie,charlie@example.com,UK\r\n\u001b[?2004l\r"]
[108.550151, "o", "\u001b[?2004h> "]
[108.550197, "o", "EOF\r\n\u001b[?2004l\r"]
[108.552029, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[124.798998, "i", "./solve.sh\n"]
[124.799161, "o", "./solve.sh\r\n\u001b[?2004l\r"]
[124.799891, "o", "bash: ./solve.sh: Permission denied\r\n"]
[124.800275, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[126.74851, "i", "echo \"=== Quarantine ===\"\nls -la /home/user/etl/quarantine/\n"]
[126.74879, "o", "echo \"=== Quarantine ===\"\r\n\u001b[?2004l\r"]
[126.748913, "o", "=== Quarantine ===\r\n\u001b[?2004h"]
[126.748973, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[126.749169, "o", "ls -la /home/user/etl/quarantine/\r\n\u001b[?2004l\r"]
[126.751315, "o", "ls: cannot access '/home/user/etl/quarantine/'"]
[126.751391, "o", ": No such file or directory\r\n"]
[126.751834, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[126.856292, "i", "echo \"=== Raw Backup ===\"\nls -la /home/user/etl/raw_backup/\n"]
[126.856518, "o", "echo \"=== Raw Backup ===\"\r\n\u001b[?2004l\r"]
[126.856606, "o", "=== Raw Backup ===\r\n"]
[126.856653, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[126.856839, "o", "ls -la /home/user/etl/raw_backup/\r\n\u001b[?2004l\r"]
[126.858752, "o", "ls: cannot access '/home/user/etl/raw_backup/'"]
[126.858825, "o", ": No such file or directory\r\n"]
[126.859226, "o", "\u001b[?2004h"]
[126.859272, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[127.100612, "i", "echo \"=== Archive ===\"\nls -la /home/user/etl/archive/\n"]
[127.100782, "o", "echo \"=== Archive ===\"\r\n\u001b[?2004l\r"]
[127.100839, "o", "=== Archive ===\r\n\u001b[?2004h"]
[127.100883, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[127.100961, "o", "ls -la /home/user/etl/archive/\r\n\u001b[?2004l\r"]
[127.102978, "o", "ls: cannot access '/home/user/etl/archive/'"]
[127.103071, "o", ": No such file or directory\r\n"]
[127.103412, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[127.421788, "i", "echo \"=== Staging ===\"\nls -la /home/user/etl/staging/\n"]
[127.421942, "o", "echo \"=== Staging ===\"\r\n\u001b[?2004l\r"]
[127.422038, "o", "=== Staging ===\r\n\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[127.42223, "o", "ls -la /home/user/etl/staging/\r\n\u001b[?2004l\r"]
[127.423957, "o", "ls: cannot access '/home/user/etl/staging/'"]
[127.424029, "o", ": No such file or directory\r\n"]
[127.424399, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[127.536331, "i", "echo \"=== Manifest ===\"\ncat /home/user/etl/logs/process_manifest.txt\n"]
[127.536583, "o", "echo \"=== Manifest ===\"\r\n\u001b[?2004l\r"]
[127.536658, "o", "=== Manifest ===\r\n"]
[127.536716, "o", "\u001b[?2004h"]
[127.53676, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[127.537034, "o", "cat /home/user/etl/logs/process_manifest.txt\r\n\u001b[?2004l\r"]
[127.538283, "o", "cat: /home/user/etl/logs/process_manifest.txt"]
[127.538394, "o", ": No such file or directory\r\n"]
[127.538682, "o", "\u001b[?2004h"]
[127.538728, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[127.889231, "i", "echo \"=== Manifest Encoding ===\"\nfile /home/user/etl/logs/process_manifest.txt\n"]
[127.88952, "o", "echo \"=== Manifest Encoding ===\"\r\n\u001b[?2004l\r"]
[127.889613, "o", "=== Manifest Encoding ===\r\n"]
[127.88967, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[127.889954, "o", "file /home/user/etl/logs/process_manifest.txt\r\n\u001b[?2004l\r"]
[127.892416, "o", "/home/user/etl/logs/process_manifest.txt: cannot open `/home/user/etl/logs/process_manifest.txt' (No such file or directory)\r\n"]
[127.892852, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[144.774839, "i", "chmod +x solve.sh\n"]
[144.775051, "o", "chmod +x solve.sh\r\n\u001b[?2004l\r"]
[144.777042, "o", "\u001b[?2004h"]
[144.777064, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[144.981222, "i", "./solve.sh\n"]
[144.981375, "o", "./solve.sh\r\n\u001b[?2004l\r"]
[144.996437, "o", "./solve.sh: line 100: warning: here-document at line 18 delimited by end-of-file (wanted `EOF')\r\n"]
[144.996992, "o", "./solve.sh: line 18: EOFcat: command not found\r\n"]
[144.997634, "o", "\u001b[?2004h"]
[144.997658, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[147.060158, "i", "echo \"=== Quarantine ===\"\nls -la /home/user/etl/quarantine/\n"]
[147.062796, "o", "echo \"=== Quarantine ===\"\r\n\u001b[?2004l\r=== Quarantine ===\r\n\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# ls -la /home/user/etl/quarantine/\r\n\u001b[?2004l\rtotal 0\r\ndrwxr-xr-x 2 root root  10 Feb 13 19:00 \u001b[0m\u001b[01;34m.\u001b[0m\r\ndrwxr-xr-x 7 root root 108 Feb 13 19:00 \u001b[01;34m..\u001b[0m\r\n\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[147.3293, "i", "echo \"=== Raw Backup ===\"\nls -la /home/user/etl/raw_backup/\n"]
[147.329501, "o", "echo \"=== Raw Backup ===\"\r\n\u001b[?2004l\r"]
[147.329577, "o", "=== Raw Backup ===\r\n"]
[147.329634, "o", "\u001b[?2004h"]
[147.329669, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[147.329844, "o", "ls -la /home/user/etl/raw_backup/\r\n\u001b[?2004l\r"]
[147.331018, "o", "total 0\r\n"]
[147.33106, "o", "drwxr-xr-x 2 root root  10 Feb 13 19:00 \u001b[0m\u001b[01;34m.\u001b[0m\r\ndrwxr-xr-x 7 root root 108 Feb 13 19:00 \u001b[01;34m..\u001b[0m\r\n"]
[147.331293, "o", "\u001b[?2004h"]
[147.331331, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[147.73954, "i", "echo \"=== Archive ===\"\nls -la /home/user/etl/archive/\n"]
[147.739663, "o", "echo \"=== Archive ===\"\r\n\u001b[?2004l\r=== Archive ===\r\n"]
[147.739712, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[147.739806, "o", "ls -la /home/user/etl/archive/\r\n\u001b[?2004l\r"]
[147.740906, "o", "total 0\r\n"]
[147.740952, "o", "drwxr-xr-x 2 root root  10 Feb 13 19:00 \u001b[0m\u001b[01;34m.\u001b[0m\r\ndrwxr-xr-x 7 root root 108 Feb 13 19:00 \u001b[01;34m..\u001b[0m\r\n"]
[147.741143, "o", "\u001b[?2004h"]
[147.741164, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[147.942575, "i", "echo \"=== Staging ===\"\nls -la /home/user/etl/staging/\n"]
[147.942767, "o", "echo \"=== Staging ===\"\r\n\u001b[?2004l\r"]
[147.942832, "o", "=== Staging ===\r\n"]
[147.942894, "o", "\u001b[?2004h"]
[147.942928, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[147.943086, "o", "ls -la /home/user/etl/staging/\r\n\u001b[?2004l\r"]
[147.944341, "o", "total 0\r\ndrwxr-xr-x 2 root root  10 Feb 13 19:00 \u001b[0m\u001b[01;34m.\u001b[0m\r\ndrwxr-xr-x 7 root root 108 Feb 13 19:00 \u001b[01;34m..\u001b[0m\r\n"]
[147.9446, "o", "\u001b[?2004h"]
[147.944621, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[148.218341, "i", "echo \"=== Manifest ===\"\ncat /home/user/etl/logs/process_manifest.txt\n"]
[148.218508, "o", "echo \"=== Manifest ===\"\r\n"]
[148.218548, "o", "\u001b[?2004l\r"]
[148.218571, "o", "=== Manifest ===\r\n"]
[148.218614, "o", "\u001b[?2004h"]
[148.218632, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[148.218861, "o", "cat /home/user/etl/logs/process_manifest.txt\r\n\u001b[?2004l\r"]
[148.219746, "o", "cat: /home/user/etl/logs/process_manifest.txt"]
[148.219816, "o", ": No such file or directory\r\n"]
[148.220011, "o", "\u001b[?2004h"]
[148.220051, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[148.444863, "i", "echo \"=== Manifest Encoding ===\"\nfile /home/user/etl/logs/process_manifest.txt\n"]
[148.445093, "o", "echo \"=== Manifest Encoding ===\"\r\n\u001b[?2004l\r"]
[148.445154, "o", "=== Manifest Encoding ===\r\n"]
[148.445216, "o", "\u001b[?2004hroot@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
[148.445417, "o", "file /home/user/etl/logs/process_manifest.txt\r\n\u001b[?2004l\r"]
[148.447016, "o", "/home/user/etl/logs/process_manifest.txt: cannot open `/home/user/etl/logs/process_manifest.txt' (No such file or directory)\r\n"]
[148.447247, "o", "\u001b[?2004h"]
[148.447299, "o", "root@a6382805-c12b-46b7-bc2e-80cc9799a487:~# "]
