[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:~# asciinema rec --stdin /logs/agent/recording.cast
[?2004lasciinema needs an ASCII or UTF-8 character encoding to run. Check the output of `locale` command.
[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:~# clear
[?2004l[H[J[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:~# cd /home/user/server_logs
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs# mkdir -p summary
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs# ls -la
[?2004ltotal 4
drwxrwxrwx 1 root root 29 Feb 13 19:07 [0m[34;42m.[0m
drwxr-xr-x 1 root root 33 Feb 12 23:59 [01;34m..[0m
-rw-r--r-- 1 root root  0 Feb 12 23:59 access.log
-rw-r--r-- 1 root root  0 Feb 12 23:59 error.log
drwxr-xr-x 2 root root 10 Feb 13 19:07 [01;34msummary[0m
-rw-r--r-- 1 root root 48 Feb 12 23:59 usage.csv
[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs# head -5 access.log
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs# head -5 error.log
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs# cat usage.csv
[?2004l\xEF\xBB\xBFserver,date,cpu_percent,mem_percent
[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs# cd summary
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# awk -F, 'NR>1{print $1,$2,$3}' ../usage.csv | iconv -f UTF-8 -t UTF-8 -B | awk -F, '{seerver=tolower($1); cpu=$3+0; print server, cpu}' | awk 'BEGIN{print "server,date,cpu_percent"; print ""} {print}' OFS=, > temp_cpu.csv
[?2004liconv: invalid option -- 'B'
Try `iconv --help' or `iconv --usage' for more information.
[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# awk -F, 'NR>1{print $1,$2,$3}' ../usage.csv | tail -n +2 | awk -F, '{server=tolower($1)); date=$2; cpu=$3+0; print server, date, cpu}' | tee temp_raw.csv
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# awk -F, '{server=$1; cpu=$3+0; sum[server] += cpu; count[server]++} END {for (s in sum)) print s, sum[s]/count[s]}' temp_raw.csv | awk '{printf "%s,%.2f\n", $1, $2}' > temp_avg.csv
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# echo 'SERVER,AVG_CPU' > avg_cpu_by_server.csv
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# awk -F, '{printf "%s,%.2f\n", $1, $2}' temp_avg.csv | sort -t, -k2,2nr -k1,1 >> avg_cpuu_by_server.csv
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# cat avg_cpu_by_server.csv
[?2004lSERVER,AVG_CPU
[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# echo -ne "" > access_summary.txt
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# unix2dos access_summary.txt
[?2004lunix2dos: converting file access_summary.txt to DOS format...
[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# echo -ne "" > error_report.txt
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# iconv -f UTF-8 -t ISO-8859-1 error_report.txt -o error_report.txt
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# echo '{"total_errors":0,"total_success_requests":0}' > stats.json
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# cat > maintenance_audit.log << 'EOF'
[?2004l[?2004h> === [ACCESS] ===
[?2004l[?2004h> 
[?2004l[?2004h> EOF
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# cat >> maintenance_audit.log << 'EOF'
[?2004l[?2004h> === [ERRORS] ===
[?2004l[?2004h> 
[?2004l[?2004h> EOF
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# cat >> maintenance_audit.log << 'EOF'
[?2004l[?2004h> === [CPU] ===
[?2004l[?2004h> SERVER,AVG_CPU
[?2004l[?2004h> 
[?2004l[?2004h> EOF
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# cat >> maintenance_audit.log << 'EOF'
[?2004l[?2004h> === [STATS] ===
[?2004l[?2004h> {"total_errors":0,"total_success_requests":0}
[?2004l[?2004h> EOF
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# cat maintenance_audit.log
[?2004l=== [ACCESS] ===

=== [ERRORS] ===

=== [CPU] ===
SERVER,AVG_CPU

=== [STATS] ===
{"total_errors":0,"total_success_requests":0}
[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# ls -la *.txt *.csv *.json *.log
[?2004l-rw-r--r-- 1 root root   0 Feb 13 19:09 access_summary.txt
-rw-r--r-- 1 root root  15 Feb 13 19:09 avg_cpu_by_server.csv
-rw-r--r-- 1 root root   0 Feb 13 19:09 error_report.txt
-rw-r--r-- 1 root root 128 Feb 13 19:10 maintenance_audit.log
-rw-r--r-- 1 root root  46 Feb 13 19:09 stats.json
-rw-r--r-- 1 root root   0 Feb 13 19:08 temp_avg.csv
-rw-r--r-- 1 root root  25 Feb 13 19:08 temp_cpu.csv
-rw-r--r-- 1 root root   0 Feb 13 19:08 temp_raw.csv
[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# rm -f temp_*.csv
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# md5sum *.txt *.csv *.json *.log | sort > manifest.txt
[?2004l[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# cat manifest.txt
[?2004l02bdf1dd4940e999eaa517f6fcc6a88e  stats.json
22e9bcb26b858c219ff05e2ab577e756  avg_cpu_by_server.csv
8c21ad9134f555a4fe0cc8553957d8f5  maintenance_audit.log
d41d8cd98f00b204e9800998ecf8427e  access_summary.txt
d41d8cd98f00b204e9800998ecf8427e  error_report.txt
[?2004hroot@98cb99c7-d92e-4558-b800-dc7a72d40d10:/home/user/server_logs/summary# 