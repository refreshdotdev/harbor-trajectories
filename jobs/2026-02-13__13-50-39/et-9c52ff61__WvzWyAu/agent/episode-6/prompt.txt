New Terminal Output:

root@b95fc295-e795-4627-8259-aeecf315dea1:/home/user/server_logs# sed '1s/^\xef\xbb\xbf//' usage.csv | awk -F, 'NF==3 && $2 ~ /^[0-9]+$/ && $3 ~ /^[0-9]+$/ {ser
ver=tolower($1); sum[server]+=$2; cnt[server]++} END {for (s in sum) print s, sum[s]/cnt[s]}' | sort -k2,2nr -k1,1 > summary/avg_cpu_by_server.csv
root@b95fc295-e795-4627-8259-aeecf315dea1:/home/user/server_logs# sed -i '1iSERVER,AVG_CPU' summary/avg_cpu_by_server.csv
root@b95fc295-e795-4627-8259-aeecf315dea1:/home/user/server_logs# awk 'BEGIN{FS=OFS=","} NR==1; NR>1 {printf "%s,%.2f\n", $1, $2}' summary/avg_cpu_by_server.csv
 > tmp.csv && mv tmp.csv summary/avg_cpu_by_server.csv
root@b95fc295-e795-4627-8259-aeecf315dea1:/home/user/server_logs#










