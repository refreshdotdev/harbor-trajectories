[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# asciinema rec --stdin /logs/agent/recording.cast
[?2004lasciinema needs an ASCII or UTF-8 character encoding to run. Check the output of `locale` command.
[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# clear
[?2004l[H[J[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# AUDIT_LOCATION="/home/user/audit"; export AUDIT_LOCATION
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# mkdir -p "$AUDIT_LOCATION"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# if [ -f "$AUDIT_LOCATION/benchmark_audit.log" ]; then mv "$AUDIT_LOCATION/benchmark_audit.log" "$AUDIT_LOCATION/bencchmark_audit.log.old"; fi
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# START_TIME=$(date -u +"%s")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# CPU_CORES_OUTPUT=$(nproc)
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# echo "${TIMESTAMP}|CPU_CORES|${CPU_CORES_OUTPUT}|count|nproc" >> "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# MEM_TOTAL_KIB=$(free -k | awk '/Mem:/ { print $2 }')
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# echo "${TIMESTAMP}|MEM_TOTAL_MIB|${MEM_TOTAL_KIB}|MiB|free -k" >> "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TMP_DISK_FILE=$(mktemp)
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# DISK_WRITE_SPEED_RAW=$(dd if=/dev/zero of="${TMP_DISK_FILE}" bs=1M count=1024 oflag=direct 2>&1 | awk -F ', ' '/bytees.*copied/ {print $(NF-1)}')
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# echo "${TIMESTAMP}|DISK_WRITE_MIBPS|${DISK_WRITE_SPEED_RAW}|MiB/s|dd if=/dev/zero of=${TMP_DISK_FILE} bs=1M count=10024 oflag=direct" >> "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# rm -f "${TMP_DISK_FILE}"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# PING_RESULTS=($(ping -c 5 8.8.8.8 2>/dev/null | grep -E "time=[0-9]+" | awk -F "time=" '{print $2}' | awk '{print $11}' | cut -d. -f1))
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# MIN_LATENCY=${PING_RESULTS[0]}
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# MAX_LATENCY=${PING_RESULTS[0]}
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# for RTT in "${PING_RESULTS[@]}"; do if [ "$RTT" -gt "$MAX_LATENCY" ]; then MAX_LATENCY="$RTT"; fi; done
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# for RTT in "${PING_RESULTS[@]}"; do if [ "$RTT" -lt "$MIN_LATENCY" ] || [ "$MIN_LATENCY" == "" ]; then MIN_LATENCY=""$RTT"; fi; done
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# LATENCY_MEDIAN="${PING_RESULTS[2]}"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# JITTER=$((MAX_LATENCY - MIN_LATENCY))
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# echo "${TIMESTAMP}|NET_LATENCY_MS|${LATENCY_MEDIAN}|ms|ping -c 5 8.8.8.8" >> "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# echo "${TIMESTAMP}|NET_JITTER_MS|${JITTER}|ms|ping -c 5 8.8.8.8" >> "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# END_TIME=$(date -u +"%s")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# BENCHMARK_DURATION=$(echo "scale=3; (${END_TIME} - ${START_TIME}) / 1" | bc -l | xargs printf "%.3f")
[?2004lbash: bc: command not found
[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# cat > "$AUDIT_LOCATION/benchmark_summary.json" << EOF
[?2004l[?2004h> {
[?2004l[?2004h>   "cpu_core_count": ${CPU_CORES_OUTPUT},
[?2004l[?2004h>   "total_memory_bytes": $((MEM_TOTAL_KIB * 1024)),
[?2004l[?2004h>   "disk_write_mib_per_sec": ${DISK_WRITE_SPEED_RAW},
[?2004l[?2004h>   "network_latency_ms": ${LATENCY_MEDIAN},
[?2004l[?2004h>   "network_jitter_ms": ${JITTER},
[?2004l[?2004h>   "benchmark_duration_seconds": ${BENCHMARK_DURATION},
[?2004l[?2004h>   "timestamp": "$(date -u +"%Y-%m-%dT%H:%M:%SZ")"
[?2004l[?2004h> }
[?2004l[?2004h> EOF
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# cat "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l2026-02-13T19:05:39Z|CPU_CORES|64|count|nproc
2026-02-13T19:05:40Z|MEM_TOTAL_MIB|791897444|MiB|free -k
2026-02-13T19:05:42Z|DISK_WRITE_MIBPS|0.329967 s|MiB/s|dd if=/dev/zero of=/tmp/tmp.4Qgzf953IO bs=1M count=1024 oflag=direct
2026-02-13T19:05:48Z|NET_LATENCY_MS|0|ms|ping -c 5 8.8.8.8
2026-02-13T19:05:48Z|NET_JITTER_MS|1|ms|ping -c 5 8.8.8.8
[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# AUDIT_LOCATION="/home/user/audit"; export AUDIT_LOCATION
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# mkdir -p "$AUDIT_LOCATION"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# if [ -f "$AUDIT_LOCATION/benchmark_audit.log" ]; then mv "$AUDIT_LOCATION/benchmark_audit.log" "$AUDIT_LOCATION/bencchmark_audit.log.old"; fi
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# START_TIME=$(date -u +"%s")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# CPU_CORES_OUTPUT=$(nproc)
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# echo "${TIMESTAMP}|CPU_CORES|${CPU_CORES_OUTPUT}|count|nproc" >> "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# MEM_TOTAL_KIB=$(free -k | awk '/Mem:/ { print $2 }')
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# echo "${TIMESTAMP}|MEM_TOTAL_MIB|${MEM_TOTAL_KIB}|MiB|free -k" >> "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TMP_DISK_FILE="/tmp/disk_speed_test.tmp"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# DISK_WRITE_SPEED_RAW=$(dd if=/dev/zero of="${TMP_DISK_FILE}" bs=1M count=1024 oflag=direct 2>&1 | awk -F ', ' '/bytees.*copied/ && $1 ~ /[0-9.]+ [GMK]?B/ {split($1, parts, " "); num_val=parts[1]; if (num_val ~ /[.]/) num_val=int(num_val*10^3); else num_val=num_val*1024; print  num_val} /bytes.*copied/ && $NF ~ /[0-9.]+ [GMK]?B/s/ {split($NF, parts, " "); print parts[1]}')
[?2004lawk: cmd. line:1: /bytes.*copied/ && $1 ~ /[0-9.]+ [GMK]?B/ {split($1, parts, " "); num_val=parts[1]; if (num_val ~ /[.]/) num_val=int(num_val*10^3); else num_val=num_val*1024; print num_val} /bytes.*copied/ && $NF ~ /[0-9.]+ [GMK]?B/s/ {split($NF, parts, " "); print parts[1]}
awk: cmd. line:1:                                                                                                                                                                                                                            ^ syntax error
[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# echo "${TIMESTAMP}|DISK_WRITE_MIBPS|${DISK_WRITE_SPEED_RAW}|MiB/s|dd if=/dev/zero of=${TMP_DISK_FILE} bs=1M count=10024 oflag=direct" >> "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# rm -f "${TMP_DISK_FILE}"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# PING_RESULTS_RAW=($(ping -c 5 8.8.8.8 2>/dev/null | grep -E "time=[0-9]+" | sed -E 's/time=([0-9.]+) ms/\1/' | awk ''{print $1}' | sed 's/\..*//'))
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# MIN_LATENCY=${PING_RESULTS_RAW[0]}
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# MAX_LATENCY=${PING_RESULTS_RAW[0]}
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# LATENCY_SUM=0
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# for RTT in "${PING_RESULTS_RAW[@]}"; do LATENCY_SUM=$((LATENCY_SUM + RTT)); done
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# if [ ${#PING_RESULTS_RAW[@]} -eq 5 ]; then
[?2004l[?2004h>     if [ ${PING_RESULTS_RAW[2]} -ge ${PING_RESULTS_RAW[1]} ] && [ ${PING_RESULTS_RAW[2]} -le ${PING_RESULTS_RAW[3]} ]; then
[?2004l[?2004h>         LATENCY_MEDIAN=${PING_RESULTS_RAW[2]}
[?2004l[?2004h>     elif [ ${PING_RESULTS_RAW[0]} -ge ${PING_RESULTS_RAW[1]} ] && [ ${PING_RESULTS_RAW[0]} -le ${PING_RESULTS_RAW[3]} ]; then
[?2004l[?2004h>         LATENCY_MEDIAN=${PING_RESULTS_RAW[0]}
[?2004l[?2004h>     elif [ ${PING_RESULTS_RAW[4]} -ge ${PING_RESULTS_RAW[1]} ] && [ ${PING_RESULTS_RAW[4]} -le ${PING_RESULTS_RAW[3]} ]; then
[?2004l[?2004h>         LATENCY_MEDIAN=${PING_RESULTS_RAW[4]}
[?2004l[?2004h>     else
[?2004l[?2004h>         LATENCY_MEDIAN=$((LATENCY_SUM / 5))
[?2004l[?2004h>     fi
[?2004l[?2004h> else
[?2004l[?2004h>     LATENCY_MEDIAN=0
[?2004l[?2004h> fi
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# for RTT in "${PING_RESULTS_RAW[@]}"; do if [ "$RTT" -gt "$MAX_LATENCY" ] || [ -z "$MAX_LATENCY" ]; then MAX_LATENCY=="$RTT"; fi; done
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# for RTT in "${PING_RESULTS_RAW[@]}"; do if [ -z "$MIN_LATENCY" ] || [ "$RTT" -lt "$MIN_LATENCY" ]; then MIN_LATENCY=="$RTT"; fi; done
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# JITTER=$((MAX_LATENCY - MIN_LATENCY))
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# echo "${TIMESTAMP}|NET_LATENCY_MS|${LATENCY_MEDIAN}|ms|ping -c 5 8.8.8.8" >> "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# echo "${TIMESTAMP}|NET_JITTER_MS|${JITTER}|ms|ping -c 5 8.8.8.8" >> "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# END_TIME=$(date -u +"%s")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# DURATION_SECONDS=$((END_TIME - START_TIME))
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# BENCHMARK_DURATION=$(printf "%0.3f" "$DURATION_SECONDS.000")
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# cat > "$AUDIT_LOCATION/benchmark_summary.json" << EOF
[?2004l[?2004h> {
[?2004l[?2004h>   "cpu_core_count": ${CPU_CORES_OUTPUT},
[?2004l[?2004h>   "total_memory_bytes": $((MEM_TOTAL_KIB * 1024)),
[?2004l[?2004h>   "disk_write_mib_per_sec": ${DISK_WRITE_SPEED_RAW},
[?2004l[?2004h>   "network_latency_ms": ${LATENCY_MEDIAN},
[?2004l[?2004h>   "network_jitter_ms": ${JITTER},
[?2004l[?2004h>   "benchmark_duration_seconds": ${BENCHMARK_DURATION},
[?2004l[?2004h>   "timestamp": "$(date -u +"%Y-%m-%dT%H:%M:%SZ")"
[?2004l[?2004h> }
[?2004l[?2004h> EOF
[?2004l[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# cat "$AUDIT_LOCATION/benchmark_audit.log"
[?2004l2026-02-13T19:06:54Z|CPU_CORES|64|count|nproc
2026-02-13T19:06:55Z|MEM_TOTAL_MIB|791897444|MiB|free -k
2026-02-13T19:06:57Z|DISK_WRITE_MIBPS||MiB/s|dd if=/dev/zero of=/tmp/disk_speed_test.tmp bs=1M count=1024 oflag=direct
2026-02-13T19:07:03Z|NET_LATENCY_MS|64|ms|ping -c 5 8.8.8.8
2026-02-13T19:07:03Z|NET_JITTER_MS|0|ms|ping -c 5 8.8.8.8
[?2004hroot@95e7cd52-183f-41b2-98fe-3f8addf13e94:~# 