Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://security.ubuntu.com/ubuntu jammy-security InRelease
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
curl is already the newest version (7.81.0-1ubuntu1.21).
0 upgraded, 0 newly installed, 0 to remove and 4 not upgraded.
downloading uv 0.9.5 x86_64-unknown-linux-gnu
no checksums to verify
installing to /root/.local/bin
  uv
  uvx
everything's installed!

To add $HOME/.local/bin to your PATH, either restart your shell or run:

    source $HOME/.local/bin/env (sh, bash, zsh)
    source $HOME/.local/bin/env.fish (fish)
Downloading cpython-3.12.12-linux-x86_64-gnu (download) (31.1MiB)
 Downloading cpython-3.12.12-linux-x86_64-gnu (download)
Downloading pygments (1.2MiB)
 Downloading pygments
Installed 6 packages in 15ms
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.1, pluggy-1.6.0 -- /root/.cache/uv/archive-v0/vDnLjc28-f4jq6tsSOapP/bin/python
cachedir: .pytest_cache
rootdir: /tests
plugins: order-1.3.0
collecting ... collected 4 items

../../tests/test_final_state.py::test_files_exist FAILED                 [ 25%]
../../tests/test_final_state.py::test_report_encoding_and_line_endings PASSED [ 50%]
../../tests/test_final_state.py::test_report_content_logic FAILED        [ 75%]
../../tests/test_final_state.py::test_manifest_structure FAILED          [100%]

=================================== FAILURES ===================================
_______________________________ test_files_exist _______________________________

    @pytest.mark.order(1)
    def test_files_exist():
        assert REPORT_FILE.is_file(), "final_report.txt is missing"
>       assert MANIFEST_FILE.is_file(), "manifest.json is missing"
E       AssertionError: manifest.json is missing
E       assert False
E        +  where False = is_file()
E        +    where is_file = PosixPath('/home/user/incident_response/manifest.json').is_file

/tests/test_final_state.py:38: AssertionError
__________________________ test_report_content_logic ___________________________

    @pytest.mark.order(3)
    def test_report_content_logic():
        # Read with strict CRLF handling
        with REPORT_FILE.open("r", encoding="iso-8859-1", newline="\r\n") as f:
            lines = [l.strip() for l in f.readlines()]
    
>       assert len(lines) == 5, f"Expected 5 lines (1 header + 4 logs), found {len(lines)}"
E       AssertionError: Expected 5 lines (1 header + 4 logs), found 1
E       assert 1 == 5
E        +  where 1 = len(['2023/10/05 10:0] INFO Application'])

/tests/test_final_state.py:68: AssertionError
___________________________ test_manifest_structure ____________________________

    @pytest.mark.order(4)
    def test_manifest_structure():
>       with MANIFEST_FILE.open("r", encoding="utf-8") as f:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/tests/test_final_state.py:82: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = PosixPath('/home/user/incident_response/manifest.json'), mode = 'r'
buffering = -1, encoding = 'utf-8', errors = None, newline = None

    def open(self, mode='r', buffering=-1, encoding=None,
             errors=None, newline=None):
        """
        Open the file pointed to by this path and return a file object, as
        the built-in open() function does.
        """
        if "b" not in mode:
            encoding = io.text_encoding(encoding)
>       return io.open(self, mode, buffering, encoding, errors, newline)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       FileNotFoundError: [Errno 2] No such file or directory: '/home/user/incident_response/manifest.json'

/root/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/pathlib.py:1013: FileNotFoundError
=========================== short test summary info ============================
FAILED ../../tests/test_final_state.py::test_files_exist - AssertionError: ma...
FAILED ../../tests/test_final_state.py::test_report_content_logic - Assertion...
FAILED ../../tests/test_final_state.py::test_manifest_structure - FileNotFoun...
========================= 3 failed, 1 passed in 0.04s ==========================
