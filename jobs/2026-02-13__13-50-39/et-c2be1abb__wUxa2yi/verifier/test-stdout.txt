Hit:1 http://security.ubuntu.com/ubuntu jammy-security InRelease
Hit:2 http://archive.ubuntu.com/ubuntu jammy InRelease
Hit:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
curl is already the newest version (7.81.0-1ubuntu1.21).
0 upgraded, 0 newly installed, 0 to remove and 4 not upgraded.
downloading uv 0.9.5 x86_64-unknown-linux-gnu
no checksums to verify
installing to /root/.local/bin
  uv
  uvx
everything's installed!

To add $HOME/.local/bin to your PATH, either restart your shell or run:

    source $HOME/.local/bin/env (sh, bash, zsh)
    source $HOME/.local/bin/env.fish (fish)
Downloading cpython-3.12.12-linux-x86_64-gnu (download) (31.1MiB)
 Downloading cpython-3.12.12-linux-x86_64-gnu (download)
Downloading pygments (1.2MiB)
 Downloading pygments
Installed 6 packages in 14ms
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.1, pluggy-1.6.0 -- /root/.cache/uv/archive-v0/_OrCjUTu4fC0ax0KmZVmB/bin/python
cachedir: .pytest_cache
rootdir: /tests
plugins: order-1.3.0
collecting ... collected 4 items

../../tests/test_final_state.py::test_files_exist PASSED                 [ 25%]
../../tests/test_final_state.py::test_report_encoding_and_line_endings PASSED [ 50%]
../../tests/test_final_state.py::test_report_content_logic FAILED        [ 75%]
../../tests/test_final_state.py::test_manifest_structure PASSED          [100%]

=================================== FAILURES ===================================
__________________________ test_report_content_logic ___________________________

    @pytest.mark.order(3)
    def test_report_content_logic():
        # Read with strict CRLF handling
        with REPORT_FILE.open("r", encoding="iso-8859-1", newline="\r\n") as f:
            lines = [l.strip() for l in f.readlines()]
    
        assert len(lines) == 5, f"Expected 5 lines (1 header + 4 logs), found {len(lines)}"
    
        # Check Header
        assert lines[0] == EXPECTED_HEADER_MD5, f"Header MD5 mismatch. Expected {EXPECTED_HEADER_MD5}, got {lines[0]}"
    
        # Check Body (Sorted Descending)
        # Date Descending: 02/11 (Nov 2), 01/11 (Nov 1), 05/10 (Oct 5), 04/10 (Oct 4).
    
        for i, expected in enumerate(EXPECTED_LINES):
            # We skip the header line, so index i+1
>           assert lines[i+1] == expected, f"Line {i+2} mismatch.\nExpected: {expected}\nActual:   {lines[i+1]}\nCheck sorting logic (DD/MM vs MM/DD) or redaction."
E           AssertionError: Line 2 mismatch.
E             Expected: [02/11/2023 09:15:00] WARN System resource low
E             Actual:   [05/10/2023 10:00:01] INFO Application started on <<CONFIDENTIAL>>
E             Check sorting logic (DD/MM vs MM/DD) or redaction.
E           assert '[05/10/2023 ...ONFIDENTIAL>>' == '[02/11/2023 ... resource low'
E             
E             - [02/11/2023 09:15:00] WARN System resource low
E             + [05/10/2023 10:00:01] INFO Application started on <<CONFIDENTIAL>>

/tests/test_final_state.py:78: AssertionError
=========================== short test summary info ============================
FAILED ../../tests/test_final_state.py::test_report_content_logic - Assertion...
========================= 1 failed, 3 passed in 0.03s ==========================
