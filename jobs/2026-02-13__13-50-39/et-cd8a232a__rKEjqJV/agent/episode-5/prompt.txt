Previous response had warnings:
WARNINGS: - Extra text detected before JSON object
- Extra text detected after JSON object

New Terminal Output:

root@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user/scripts# cat >> filter_errors.sh << 'EOF'
>
> # Process log file with multi-line handling
> awk -v critical_log="\$critical_log" '
>     BEGIN {
>         in_critical = 0;
>         entry = "";
>     }
>     /^\[[0-9]{4}-[0-9]{2}-[0-9]{2}/ {
>         if (in_critical) {
>             # Save previous complete entry
>             print entry > critical_log;
>             entry = "";
>         }
>         in_critical = 0;
>
>         # Check if this line matches critical patterns
>         if ($0 ~ /ERROR/ || $0 ~ /FATAL/ || $0 ~ /HTTP\/1\.1 5[0-9]{2}/) {
>             in_critical = 1;
>         }
>     }
>     {
>         if (in_critical) {
>             entry = entry $0 "\n";
>         }
>     }
>     END {
>         if (in_critical && entry != "") {
>             print entry > critical_log;
>         }
>     }' "$input_log" > /tmp/filtered.log
>
> # Append filtered content to critical log file (skip header)
> sed "1d" /tmp/filtered.log >> "$critical_log"
> rm /tmp/filtered.log
> EOF
root@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user/scripts#
