{"version": 2, "width": 160, "height": 40, "timestamp": 1771009684, "env": {"SHELL": "/bin/bash", "TERM": "screen"}}
[0.007918, "o", "\u001b[?2004hroot@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user# "]
[0.861364, "i", "clear\r"]
[0.861554, "o", "clear\r\n\u001b[?2004l\r"]
[0.862544, "o", "\u001b[H\u001b[J"]
[0.862688, "o", "\u001b[?2004h"]
[0.862702, "o", "root@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user# "]
[17.104965, "i", "mkdir -p /home/user/scripts\n"]
[17.105109, "o", "mkdir -p /home/user/scripts\r\n\u001b[?2004l\r"]
[17.106369, "o", "\u001b[?2004hroot@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user# "]
[17.221783, "i", "cd /home/user/scripts\n"]
[17.221952, "o", "cd /home/user/scripts\r\n\u001b[?2004l\r"]
[17.222025, "o", "\u001b[?2004hroot@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user/scripts# "]
[26.321027, "i", "cat > filter_errors.sh << 'EOF'\n#!/bin/bash\n\n# Validate arguments\nif [ \"$#\" -ne 2 ]; then\n    echo \"Usage: $0 <input_log> <output_dir>\" >&2\n    exit 1\nfi\n\ninput_log=\"$1\"\noutput_dir=\"$2\"\n\n# Create output directory\nmkdir -p \"$output_dir\"\n\n# Get absolute paths\ninput_log=\"$(realpath \"$input_log\")\"\noutput_dir=\"$(realpath \"$output_dir\")\"\n\ncritical_log=\"$output_dir/critical_errors.log\"\nsummary_csv=\"$output_dir/error_summary.csv\"\n\n# Write header to critical log file\necho \"# Source: $input_log\" > \"$critical_log\"\nEOF\n"]
[26.32127, "o", "cat > filter_errors.sh << 'EOF'\r\n\u001b[?2004l\r"]
[26.321323, "o", "\u001b[?2004h"]
[26.32137, "o", "> "]
[26.321416, "o", "#!/bin/bash\r\n\u001b[?2004l\r\u001b[?2004h"]
[26.321452, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h"]
[26.321509, "o", "> "]
[26.321553, "o", "# Validate arguments\r\n"]
[26.321594, "o", "\u001b[?2004l\r\u001b[?2004h> "]
[26.321708, "o", "if [ \"$#\" -ne 2 ]; then\r\n\u001b[?2004l\r"]
[26.321748, "o", "\u001b[?2004h> "]
[26.32195, "o", "    echo \"Usage: $0 <input_log> <output_dir>\" >&2\r\n\u001b[?2004l\r"]
[26.321992, "o", "\u001b[?2004h> "]
[26.322048, "o", "    exit 1\r\n\u001b[?2004l\r"]
[26.322082, "o", "\u001b[?2004h> "]
[26.322114, "o", "fi\r\n\u001b[?2004l\r\u001b[?2004h"]
[26.322158, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h"]
[26.322196, "o", "> "]
[26.322245, "o", "input_log=\"$1\"\r\n\u001b[?2004l\r"]
[26.322279, "o", "\u001b[?2004h> "]
[26.322347, "o", "output_dir=\"$2\"\r\n\u001b[?2004l\r"]
[26.322377, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[26.322415, "o", "\u001b[?2004h> "]
[26.322529, "o", "# Create output directory\r\n\u001b[?2004l\r"]
[26.322551, "o", "\u001b[?2004h"]
[26.322589, "o", "> "]
[26.322662, "o", "mkdir -p \"$output_dir\"\r\n\u001b[?2004l\r"]
[26.322693, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[26.322726, "o", "\u001b[?2004h> "]
[26.322825, "o", "# Get absolute paths\r\n\u001b[?2004l\r"]
[26.322847, "o", "\u001b[?2004h> "]
[26.323017, "o", "input_log=\"$(realpath \"$input_log\")\"\r\n\u001b[?2004l\r"]
[26.323043, "o", "\u001b[?2004h> "]
[26.323236, "o", "output_dir=\"$(realpath \"$output_dir\")\"\r\n\u001b[?2004l\r"]
[26.323267, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[26.3233, "o", "\u001b[?2004h> "]
[26.323503, "o", "critical_log=\"$output_dir/critical_errors.log\"\r\n\u001b[?2004l\r"]
[26.323539, "o", "\u001b[?2004h> "]
[26.323731, "o", "summary_csv=\"$output_dir/error_summary.csv\"\r\n\u001b[?2004l\r"]
[26.323764, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[26.323797, "o", "\u001b[?2004h> "]
[26.32396, "o", "# Write header to critical log file\r\n\u001b[?2004l\r"]
[26.323983, "o", "\u001b[?2004h"]
[26.324029, "o", "> "]
[26.324205, "o", "echo \"# Source: $input_log\" > \"$critical_log\"\r\n\u001b[?2004l\r"]
[26.324234, "o", "\u001b[?2004h> "]
[26.324266, "o", "EOF\r\n\u001b[?2004l\r"]
[26.328658, "o", "\u001b[?2004hroot@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user/scripts# "]
[88.31518, "i", "cat >> filter_errors.sh << 'EOF'\n\n# Process log file with multi-line handling\nawk -v critical_log=\"\\$critical_log\" '\n    BEGIN {\n        in_critical = 0;\n        entry = \"\";\n    }\n    /^\\[[0-9]{4}-[0-9]{2}-[0-9]{2}/ {\n        if (in_critical) {\n            # Save previous complete entry\n            print entry > critical_log;\n            entry = \"\";\n        }\n        in_critical = 0;\n        \n        # Check if this line matches critical patterns\n        if ($0 ~ /ERROR/ || $0 ~ /FATAL/ || $0 ~ /HTTP\\/1\\.1 5[0-9]{2}/) {\n            in_critical = 1;\n        }\n    }\n    {\n        if (in_critical) {\n            entry = entry $0 \"\\n\";\n        }\n    }\n    END {\n        if (in_critical && entry != \"\") {\n            print entry > critical_log;\n        }\n    }' \"$input_log\" > /tmp/filtered.log\n\n# Append filtered content to critical log file (skip header)\nsed \"1d\" /tmp/filtered.log >> \"$critical_log\"\nrm /tmp/filtered.log\nEOF\n"]
[88.31533, "o", "cat >> filter_errors.sh << 'EOF'\r\n\u001b[?2004l\r"]
[88.315396, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[88.315434, "o", "\u001b[?2004h> "]
[88.315504, "o", "# Process log file with multi-line handling\r\n\u001b[?2004l\r"]
[88.315539, "o", "\u001b[?2004h> "]
[88.315626, "o", "awk -v critical_log=\"\\$critical_log\" '\r\n\u001b[?2004l\r"]
[88.315659, "o", "\u001b[?2004h> "]
[88.315705, "o", "    BEGIN {\r\n\u001b[?2004l\r\u001b[?2004h> "]
[88.315774, "o", "        in_critical = 0;\r\n\u001b[?2004l\r\u001b[?2004h"]
[88.315812, "o", "> "]
[88.315849, "o", "        entry = \"\";\r\n\u001b[?2004l\r\u001b[?2004h"]
[88.315885, "o", ">     }\r\n\u001b[?2004l\r\u001b[?2004h"]
[88.315921, "o", "> "]
[88.315998, "o", "    /^\\[[0-9]{4}-[0-9]{2}-[0-9]{2}/ {\r\n\u001b[?2004l\r"]
[88.316031, "o", "\u001b[?2004h> "]
[88.31609, "o", "        if (in_critical) {\r\n\u001b[?2004l\r"]
[88.316133, "o", "\u001b[?2004h> "]
[88.316234, "o", "            # Save previous complete entry\r\n\u001b[?2004l\r"]
[88.316267, "o", "\u001b[?2004h> "]
[88.316372, "o", "            print entry > critical_log;\r\n\u001b[?2004l\r"]
[88.31641, "o", "\u001b[?2004h> "]
[88.316462, "o", "            entry = \"\";\r\n\u001b[?2004l\r"]
[88.316498, "o", "\u001b[?2004h> "]
[88.316539, "o", "        }\r\n\u001b[?2004l\r\u001b[?2004h> "]
[88.316635, "o", "        in_critical = 0;\r\n\u001b[?2004l\r"]
[88.316716, "o", "\u001b[?2004h>         \r\n\u001b[?2004l\r\u001b[?2004h> "]
[88.316879, "o", "        # Check if this line matches critical patterns\r\n\u001b[?2004l\r"]
[88.316917, "o", "\u001b[?2004h> "]
[88.317093, "o", "        if ($0 ~ /ERROR/ || $0 ~ /FATAL/ || $0 ~ /HTTP\\/1\\.1 5[0-9]{2}/) {\r\n\u001b[?2004l\r"]
[88.31715, "o", "\u001b[?2004h> "]
[88.31719, "o", "            in_critical = 1;\r\n\u001b[?2004l\r"]
[88.31721, "o", "\u001b[?2004h> "]
[88.317239, "o", "        }\r\n\u001b[?2004l\r"]
[88.317265, "o", "\u001b[?2004h> "]
[88.317284, "o", "    }\r\n\u001b[?2004l\r"]
[88.317313, "o", "\u001b[?2004h>     {\r\n\u001b[?2004l\r"]
[88.317334, "o", "\u001b[?2004h> "]
[88.317411, "o", "        if (in_critical) {\r\n\u001b[?2004l\r"]
[88.317429, "o", "\u001b[?2004h> "]
[88.317528, "o", "            entry = entry $0 \"\\n\";\r\n\u001b[?2004l\r"]
[88.317545, "o", "\u001b[?2004h> "]
[88.317575, "o", "        }\r\n\u001b[?2004l\r"]
[88.317593, "o", "\u001b[?2004h> "]
[88.317616, "o", "    }\r\n\u001b[?2004l\r"]
[88.317634, "o", "\u001b[?2004h> "]
[88.317666, "o", "    END {\r\n\u001b[?2004l\r"]
[88.317682, "o", "\u001b[?2004h> "]
[88.317794, "o", "        if (in_critical && entry != \"\") {\r\n\u001b[?2004l\r"]
[88.317812, "o", "\u001b[?2004h> "]
[88.31792, "o", "            print entry > critical_log;\r\n\u001b[?2004l\r"]
[88.317937, "o", "\u001b[?2004h> "]
[88.31797, "o", "        }\r\n\u001b[?2004l\r"]
[88.317986, "o", "\u001b[?2004h> "]
[88.318094, "o", "    }' \"$input_log\" > /tmp/filtered.log\r\n\u001b[?2004l\r"]
[88.318107, "o", "\u001b[?2004h"]
[88.318135, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h"]
[88.318154, "o", "> "]
[88.318308, "o", "# Append filtered content to critical log file (skip header)\r\n\u001b[?2004l\r"]
[88.318326, "o", "\u001b[?2004h> "]
[88.318453, "o", "sed \"1d\" /tmp/filtered.log >> \"$critical_log\"\r\n\u001b[?2004l\r"]
[88.318469, "o", "\u001b[?2004h> "]
[88.318532, "o", "rm /tmp/filtered.log\r\n\u001b[?2004l\r"]
[88.318555, "o", "\u001b[?2004h> "]
[88.318574, "o", "EOF\r\n\u001b[?2004l\r"]
[88.319992, "o", "\u001b[?2004h"]
[88.32001, "o", "root@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user/scripts# "]
[100.837099, "i", "cat >> filter_errors.sh << 'EOF'\n\n# Perform email redaction\nsed -i -E \"s/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/<REDACTED>/g\" \"$critical_log\"\nEOF\n"]
[100.837469, "o", "cat >> filter_errors.sh << 'EOF'\r\n\u001b[?2004l\r"]
[100.837545, "o", "\u001b[?2004h"]
[100.837598, "o", "> \r\n\u001b[?2004l\r"]
[100.837652, "o", "\u001b[?2004h> "]
[100.837882, "o", "# Perform email redaction\r\n\u001b[?2004l\r"]
[100.837934, "o", "\u001b[?2004h"]
[100.837981, "o", "> "]
[100.838771, "o", "sed -i -E \"s/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/<REDACTED>/g\" \"$critical_log\"\r\n\u001b[?2004l\r"]
[100.838844, "o", "\u001b[?2004h> EOF"]
[100.838893, "o", "\r\n\u001b[?2004l\r"]
[100.840008, "o", "\u001b[?2004hroot@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user/scripts# "]
[159.740513, "i", "cat >> filter_errors.sh << 'EOF'\n\n# Extract error categories and count occurrences\nawk -v summary_csv=\"\\$summary_csv\" '\n    BEGIN {\n        print \"error_category,count\" > summary_csv;\n        counts[\"PAYMENT_FAILURE\"] = 0;\n        counts[\"HTTP_5XX\"] = 0; \n        counts[\"FATAL\"] = 0;\n    }\n    /^\\\\[[0-9]{4}-[0-9]{2}-[0-9]{2}/ {\n        if (entry != \"\") {\n            # Determine category based on first matching rule\n            category = \"UNKNOWN\"\n            if (entry ~ /Payment failed/) {\n                category = \"PAYMENT_FAILURE\"\n            } else if (entry ~ /HTTP\\\\/1\\\\.1 5[0-9]{2}/) {\n                category = \"HTTP_5XX\"\n            } else if (entry ~ /FATAL/) {\n                category = \"FATAL\"\n            }\n            \n            if (category != \"UNKNOWN\") {\n                counts[category]++\n            }\n            \n            entry = \"\"\n        }\n        \n        # Start new entry\n        entry = $0 \"\\n\"\n        in_entry = 1\n    }\n    in_entry && !/^[\\\\[]/{\n        entry = entry $0 \"\\n\"\n   "]
[159.740653, "i", " }\n    END {\n        if (entry != \"\") {\n            # Process last entry\n            if (entry ~ /Payment failed/) {\n                counts[\"PAYMENT_FAILURE\"]++\n            } else if (entry ~ /HTTP\\\\/1\\\\.1 5[0-9]{2}/) {\n                counts[\"HTTP_5XX\"]++\n            } else if (entry ~ /FATAL/) {\n                counts[\"FATAL\"]++\n            }\n        }\n        \n        # Output counts in sorted order\n        # First sort by count descending, then category ascending\n        print counts[\"PAYMENT_FAILURE\"] ~ /./ ? \"PAYMENT_FAILURE,\" counts[\"PAYMENT_FAILURE\"] : \"\" > \"summary_csv.tmp\"\n        print counts[\"HTTP_5XX\"] ~ /./ ? \"HTTP_5XX,\" counts[\"HTTP_5XX\"] : \"\" >> \"summary_csv.tmp\"  \n        print counts[\"FATAL\"] ~ /./ ? \"FATAL,\" counts[\"FATAL\"] : \"\" >> \"summary_csv.tmp\"\n        \n        # Sort the lines and overwrite summary file\n        sort -t, -k1,1 -k2,2nr < \"summary_csv.tmp\" > \"summary_csv.sorted\"\n        mv \"summary_csv.sorted\" \"$summary_csv\"\n        rm \"summary_csv.tmp\"\n    }' \"$critical_log\"\nEOF\n"]
[159.740705, "o", "cat >> filter_errors.sh << 'EOF'\r\n\u001b[?2004l\r"]
[159.740749, "o", "\u001b[?2004h"]
[159.740779, "o", "> \r\n\u001b[?2004l\r"]
[159.740807, "o", "\u001b[?2004h> "]
[159.740926, "o", "# Extract error categories and count occurrences\r\n\u001b[?2004l\r"]
[159.740972, "o", "\u001b[?2004h> "]
[159.741045, "o", "awk -v summary_csv=\"\\$summary_csv\" '\r\n\u001b[?2004l\r"]
[159.7411, "o", "\u001b[?2004h>     BEGIN {\r\n\u001b[?2004l\r"]
[159.741159, "o", "\u001b[?2004h> "]
[159.741268, "o", "        print \"error_category,count\" > summary_csv;\r\n\u001b[?2004l\r"]
[159.741296, "o", "\u001b[?2004h> "]
[159.741391, "o", "        counts[\"PAYMENT_FAILURE\"] = 0;\r\n\u001b[?2004l\r"]
[159.741435, "o", "\u001b[?2004h> "]
[159.741501, "o", "        counts[\"HTTP_5XX\"] = 0; \r\n\u001b[?2004l\r"]
[159.741545, "o", "\u001b[?2004h> "]
[159.741615, "o", "        counts[\"FATAL\"] = 0;\r\n\u001b[?2004l\r"]
[159.741658, "o", "\u001b[?2004h>     }\r\n\u001b[?2004l\r"]
[159.741706, "o", "\u001b[?2004h> "]
[159.741784, "o", "    /^\\\\[[0-9]{4}-[0-9]{2}-[0-9]{2}/ {\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.741824, "o", "> "]
[159.74189, "o", "        if (entry != \"\") {\r\n\u001b[?2004l\r\u001b[?2004h> "]
[159.742097, "o", "            # Determine category based on first matching rule\r\n\u001b[?2004l\r"]
[159.74214, "o", "\u001b[?2004h> "]
[159.742233, "o", "            category = \"UNKNOWN\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.74226, "o", "> "]
[159.742365, "o", "            if (entry ~ /Payment failed/) {\r\n\u001b[?2004l\r"]
[159.742393, "o", "\u001b[?2004h> "]
[159.742507, "o", "                category = \"PAYMENT_FAILURE\"\r\n\u001b[?2004l\r"]
[159.742538, "o", "\u001b[?2004h> "]
[159.742677, "o", "            } else if (entry ~ /HTTP\\\\/1\\\\.1 5[0-9]{2}/) {\r\n\u001b[?2004l\r"]
[159.742704, "o", "\u001b[?2004h> "]
[159.742797, "o", "                category = \"HTTP_5XX\"\r\n\u001b[?2004l\r"]
[159.742825, "o", "\u001b[?2004h> "]
[159.742927, "o", "            } else if (entry ~ /FATAL/) {\r\n\u001b[?2004l\r"]
[159.742958, "o", "\u001b[?2004h> "]
[159.743041, "o", "                category = \"FATAL\"\r\n\u001b[?2004l\r"]
[159.74307, "o", "\u001b[?2004h> "]
[159.743098, "o", "            }\r\n\u001b[?2004l\r"]
[159.743134, "o", "\u001b[?2004h> "]
[159.743178, "o", "            \r\n\u001b[?2004l\r\u001b[?2004h"]
[159.743205, "o", "> "]
[159.743302, "o", "            if (category != \"UNKNOWN\") {\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.743329, "o", "> "]
[159.743412, "o", "                counts[category]++\r\n\u001b[?2004l\r"]
[159.743438, "o", "\u001b[?2004h> "]
[159.743471, "o", "            }\r\n\u001b[?2004l\r"]
[159.743501, "o", "\u001b[?2004h> "]
[159.743531, "o", "            \r\n\u001b[?2004l\r"]
[159.743563, "o", "\u001b[?2004h> "]
[159.743619, "o", "            entry = \"\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.743648, "o", "> "]
[159.743679, "o", "        }\r\n\u001b[?2004l\r\u001b[?2004h> "]
[159.743707, "o", "        \r\n\u001b[?2004l\r"]
[159.743736, "o", "\u001b[?2004h> "]
[159.743804, "o", "        # Start new entry\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.743832, "o", "> "]
[159.743891, "o", "        entry = $0 \"\\n\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.743918, "o", "> "]
[159.743969, "o", "        in_entry = 1\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.744011, "o", ">     }\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.744048, "o", "> "]
[159.744101, "o", "    in_entry && !/^[\\\\[]/{\r\n\u001b[?2004l\r"]
[159.744142, "o", "\u001b[?2004h> "]
[159.744214, "o", "        entry = entry $0 \"\\n\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.744258, "o", ">     }\r\n\u001b[?2004l\r\u001b[?2004h> "]
[159.744304, "o", "    END {\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.744333, "o", "> "]
[159.744393, "o", "        if (entry != \"\") {\r\n\u001b[?2004l\r"]
[159.74442, "o", "\u001b[?2004h> "]
[159.744502, "o", "            # Process last entry\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.744529, "o", "> "]
[159.744637, "o", "            if (entry ~ /Payment failed/) {\r\n\u001b[?2004l\r"]
[159.744668, "o", "\u001b[?2004h> "]
[159.74477, "o", "                counts[\"PAYMENT_FAILURE\"]++\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.744798, "o", "> "]
[159.744941, "o", "            } else if (entry ~ /HTTP\\\\/1\\\\.1 5[0-9]{2}/) {\r\n\u001b[?2004l\r"]
[159.744971, "o", "\u001b[?2004h> "]
[159.74506, "o", "                counts[\"HTTP_5XX\"]++\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.745087, "o", "> "]
[159.745199, "o", "            } else if (entry ~ /FATAL/) {\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.745256, "o", "> "]
[159.745327, "o", "                counts[\"FATAL\"]++\r\n\u001b[?2004l\r\u001b[?2004h> "]
[159.745379, "o", "            }\r\n\u001b[?2004l\r"]
[159.745409, "o", "\u001b[?2004h> "]
[159.745438, "o", "        }\r\n\u001b[?2004l\r\u001b[?2004h> "]
[159.745478, "o", "        \r\n\u001b[?2004l\r"]
[159.745504, "o", "\u001b[?2004h> "]
[159.745603, "o", "        # Output counts in sorted order\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.74563, "o", "> "]
[159.745794, "o", "        # First sort by count descending, then category ascending\r\n\u001b[?2004l\r"]
[159.745836, "o", "\u001b[?2004h> "]
[159.746109, "o", "        print counts[\"PAYMENT_FAILURE\"] ~ /./ ? \"PAYMENT_FAILURE,\" counts[\"PAYMENT_FAILURE\"] : \"\" > \"summary_csv.tmp\"\r\n\u001b[?2004l\r"]
[159.746151, "o", "\u001b[?2004h> "]
[159.746398, "o", "        print counts[\"HTTP_5XX\"] ~ /./ ? \"HTTP_5XX,\" counts[\"HTTP_5XX\"] : \"\" >> \"summary_csv.tmp\"  \r\n\u001b[?2004l\r\u001b[?2004h"]
[159.746429, "o", "> "]
[159.746641, "o", "        print counts[\"FATAL\"] ~ /./ ? \"FATAL,\" counts[\"FATAL\"] : \"\" >> \"summary_csv.tmp\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.746669, "o", "> "]
[159.746705, "o", "        \r\n\u001b[?2004l\r\u001b[?2004h> "]
[159.746841, "o", "        # Sort the lines and overwrite summary file\r\n\u001b[?2004l\r"]
[159.746872, "o", "\u001b[?2004h> "]
[159.747052, "o", "        sort -t, -k1,1 -k2,2nr < \"summary_csv.tmp\" > \"summary_csv.sorted\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.747079, "o", "> "]
[159.747204, "o", "        mv \"summary_csv.sorted\" \"$summary_csv\"\r\n\u001b[?2004l\r"]
[159.747235, "o", "\u001b[?2004h> "]
[159.747308, "o", "        rm \"summary_csv.tmp\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[159.747335, "o", "> "]
[159.747391, "o", "    }' \"$critical_log\"\r\n\u001b[?2004l\r"]
[159.747418, "o", "\u001b[?2004h> EOF\r\n\u001b[?2004l\r"]
[159.748493, "o", "\u001b[?2004hroot@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user/scripts# "]
[173.934597, "i", "cat >> filter_errors.sh << 'EOF'\n\n# Log execution\ncurrent_time=$(date '+%Y-%m-%d|%H:%M:%S')\necho \"${current_time}|input=${input_log}|output_dir=${output_dir}|status=OK\" >> /home/user/filter_run.log\nEOF\n"]
[173.934786, "o", "cat >> filter_errors.sh << 'EOF'\r\n\u001b[?2004l\r"]
[173.934857, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[173.934914, "o", "# Log execution\r\n\u001b[?2004l\r\u001b[?2004h> "]
[173.935025, "o", "current_time=$(date '+%Y-%m-%d|%H:%M:%S')\r\n\u001b[?2004l\r\u001b[?2004h"]
[173.935078, "o", "> "]
[173.935352, "o", "echo \"${current_time}|input=${input_log}|output_dir=${output_dir}|status=OK\" >> /home/user/filter_run.log\r\n\u001b[?2004l\r\u001b[?2004h"]
[173.935405, "o", "> EOF\r\n\u001b[?2004l\r"]
[173.936515, "o", "\u001b[?2004hroot@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user/scripts# "]
[174.022242, "i", "chmod +x filter_errors.sh\n"]
[174.022505, "o", "chmod +x filter_errors.sh\r\n\u001b[?2004l\r"]
[174.024401, "o", "\u001b[?2004hroot@9be0b58d-c285-4cb3-b2c2-99c8d98bd056:/home/user/scripts# "]
