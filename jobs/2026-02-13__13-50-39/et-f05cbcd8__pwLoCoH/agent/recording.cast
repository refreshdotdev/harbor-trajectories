{"version": 2, "width": 160, "height": 40, "timestamp": 1771008648, "env": {"SHELL": "/bin/bash", "TERM": "screen"}}
[0.005374, "o", "\u001b[?2004hroot@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~# "]
[0.899981, "i", "clear\r"]
[0.900128, "o", "clear\r\n\u001b[?2004l\r"]
[0.901163, "o", "\u001b[H\u001b[J"]
[0.90133, "o", "\u001b[?2004hroot@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~# "]
[6.72573, "i", "su - user\n"]
[6.725876, "o", "su - user\r\n\u001b[?2004l\r"]
[6.736967, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[7.823685, "i", "cd /home/user\n"]
[7.823792, "o", "cd /home/user\r\n\u001b[?2004l\r"]
[7.823834, "o", "\u001b[?2004h"]
[7.823856, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[15.641863, "i", "ls -la\n"]
[15.641975, "o", "ls -la\r\n\u001b[?2004l\r"]
[15.64308, "o", "total 12\r\n"]
[15.643135, "o", "drwxr-xr-x 1 user user  115 Feb 13 00:07 \u001b[0m\u001b[01;34m.\u001b[0m\r\ndrwxr-xr-x 1 root root   26 Feb 13 00:07 \u001b[01;34m..\u001b[0m\r\n-rw-r--r-- 1 user user  220 Jan  6  2022 .bash_logout\r\n-rw-r--r-- 1 user user 3771 Jan  6  2022 .bashrc\r\n-rw-r--r-- 1 user user  807 Jan  6  2022 .profile\r\ndrwxr-xr-x 1 user user   29 Feb 13 00:07 \u001b[01;34mincidents\u001b[0m\r\ndrwxr-xr-x 1 user user   47 Feb 13 00:07 \u001b[01;34mresources\u001b[0m\r\n"]
[15.643311, "o", "\u001b[?2004h"]
[15.643339, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[15.826873, "i", "ls incidents/tickets/\n"]
[15.826988, "o", "ls incidents/tickets/\r\n\u001b[?2004l\r"]
[15.827889, "o", "dns_incident_2024.txt\r\n"]
[15.828059, "o", "\u001b[?2004h"]
[15.828082, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[15.988858, "i", "ls resources/\n"]
[15.988958, "o", "ls resources/\r\n\u001b[?2004l\r"]
[15.989949, "o", "\u001b[0m\u001b[01;34mdns\u001b[0m  mock_hosts\r\n"]
[15.990125, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[16.302371, "i", "head -5 incidents/tickets/dns_incident_2024.txt\n"]
[16.302537, "o", "head -5 incidents/tickets/dns_incident_2024.txt\r\n\u001b[?2004l\r"]
[16.303491, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[16.698512, "i", "head -5 resources/mock_hosts\n"]
[16.698916, "o", "head -5 resources/mock_hosts\r\n\u001b[?2004l\r"]
[16.699696, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[16.846251, "i", "head -10 resources/dns/internal_dns.json\n"]
[16.846403, "o", "head -10 resources/dns/internal_dns.json\r\n\u001b[?2004l\r"]
[16.847211, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[17.006361, "i", "head -10 resources/dns/external_dns.json\n"]
[17.006513, "o", "head -10 resources/dns/external_dns.json\r\n\u001b[?2004l\r"]
[17.007448, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[24.781824, "i", "wc -l incidents/tickets/dns_incident_2024.txt\n"]
[24.782003, "o", "wc -l incidents/tickets/dns_incident_2024.txt\r\n\u001b[?2004l\r"]
[24.782711, "o", "0 incidents/tickets/dns_incident_2024.txt\r\n"]
[24.782855, "o", "\u001b[?2004h"]
[24.782892, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[24.903446, "i", "cat incidents/tickets/dns_incident_2024.txt\n"]
[24.903656, "o", "cat incidents/tickets/dns_incident_2024.txt\r\n\u001b[?2004l\r"]
[24.904545, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[25.107035, "i", "cat resources/mock_hosts\n"]
[25.107165, "o", "cat resources/mock_hosts\r\n\u001b[?2004l\r"]
[25.108016, "o", "\u001b[?2004h"]
[25.108067, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[25.21399, "i", "cat resources/dns/internal_dns.json\n"]
[25.21417, "o", "cat resources/dns/internal_dns.json\r\n\u001b[?2004l\r"]
[25.215143, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[25.4178, "i", "cat resources/dns/external_dns.json\n"]
[25.417963, "o", "cat resources/dns/external_dns.json\r\n\u001b[?2004l\r"]
[25.419046, "o", "\u001b[?2004h"]
[25.419057, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[97.384498, "i", "cat > incidents/tickets/dns_incident_2024.txt << EOF\napp-internal.example.com\nservice-public.example.org\nlegacy-system.internal.net\napi-gateway.external.com\nEOF\n"]
[97.384701, "o", "cat > incidents/tickets/dns_incident_2024.txt << EOF\r\n"]
[97.384729, "o", "\u001b[?2004l\r"]
[97.384756, "o", "\u001b[?2004h"]
[97.384772, "o", "> "]
[97.384854, "o", "app-internal.example.com\r\n\u001b[?2004l\r"]
[97.384878, "o", "\u001b[?2004h> "]
[97.384964, "o", "service-public.example.org\r\n\u001b[?2004l\r"]
[97.384978, "o", "\u001b[?2004h"]
[97.384993, "o", "> "]
[97.38507, "o", "legacy-system.internal.net\r\n\u001b[?2004l\r"]
[97.385088, "o", "\u001b[?2004h> "]
[97.385163, "o", "api-gateway.external.com\r\n\u001b[?2004l\r"]
[97.385175, "o", "\u001b[?2004h"]
[97.385196, "o", "> "]
[97.385212, "o", "EOF\r\n\u001b[?2004l\r"]
[97.391795, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[97.530613, "i", "cat > resources/mock_hosts << EOF\n192.168.1.100\\tlegacy-system.internal.net\nEOF\n"]
[97.530774, "o", "cat > resources/mock_hosts << EOF\r\n\u001b[?2004l\r"]
[97.530821, "o", "\u001b[?2004h> "]
[97.530934, "o", "192.168.1.100\\tlegacy-system.internal.net\r\n\u001b[?2004l\r"]
[97.530973, "o", "\u001b[?2004h> EOF\r\n\u001b[?2004l\r"]
[97.533587, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[97.819658, "i", "cat > resources/dns/internal_dns.json << EOF\n{\n  \"app-internal.example.com\": {\"A\": \"10.10.10.10\", \"AAAA\": \"fd00::1\"},\n  \"legacy-system.internal.net\": {\"A\": \"192.168.1.200\", \"AAAA\": \"fd00::2\"},\n  \"db.internal.example.com\": {\"A\": \"10.10.10.20\", \"AAAA\": \"fd00::3\"}\n}\nEOF\n"]
[97.819845, "o", "cat > resources/dns/internal_dns.json << EOF\r\n\u001b[?2004l\r"]
[97.819885, "o", "\u001b[?2004h> {\r\n\u001b[?2004l\r"]
[97.819894, "o", "\u001b[?2004h"]
[97.819902, "o", "> "]
[97.820115, "o", "  \"app-internal.example.com\": {\"A\": \"10.10.10.10\", \"AAAA\": \"fd00::1\"},\r\n\u001b[?2004l\r"]
[97.820154, "o", "\u001b[?2004h> "]
[97.820356, "o", "  \"legacy-system.internal.net\": {\"A\": \"192.168.1.200\", \"AAAA\": \"fd00::2\"},\r\n\u001b[?2004l\r"]
[97.820371, "o", "\u001b[?2004h> "]
[97.820577, "o", "  \"db.internal.example.com\": {\"A\": \"10.10.10.20\", \"AAAA\": \"fd00::3\"}\r\n\u001b[?2004l\r"]
[97.820603, "o", "\u001b[?2004h> }\r\n"]
[97.820623, "o", "\u001b[?2004l\r\u001b[?2004h"]
[97.820693, "o", "> "]
[97.820784, "o", "EOF\r\n\u001b[?2004l\r"]
[97.826349, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[98.344855, "i", "cat > resources/dns/external_dns.json << EOF\n{\n  \"service-public.example.org\": {\"A\": \"203.0.113.10\", \"AAAA\": \"2001:db8::10\"},\n  \"api-gateway.external.com\": {\"A\": \"203.0.113.20\", \"AAAA\": \"2001:db8::20\"},\n  \"cdn.external.com\": {\"A\": \"203.0.113.30\", \"AAAA\": \"2001:db8::30\"},\n  \"app-internal.example.com\": {\"A\": \"203.0.113.40\", \"AAAA\": \"2001:db8::40\"},\n  \"alias-internal.internal.example.com\": {\"CNAME\": \"db.internal.example.com\"}\n}\nEOF\n"]
[98.34501, "o", "cat > resources/dns/external_dns.json << EOF\r\n\u001b[?2004l\r"]
[98.345052, "o", "\u001b[?2004h"]
[98.345077, "o", "> {\r\n\u001b[?2004l\r\u001b[?2004h"]
[98.345112, "o", "> "]
[98.345281, "o", "  \"service-public.example.org\": {\"A\": \"203.0.113.10\", \"AAAA\": \"2001:db8::10\"},\r\n\u001b[?2004l\r"]
[98.34531, "o", "\u001b[?2004h> "]
[98.345496, "o", "  \"api-gateway.external.com\": {\"A\": \"203.0.113.20\", \"AAAA\": \"2001:db8::20\"},\r\n\u001b[?2004l\r"]
[98.345539, "o", "\u001b[?2004h> "]
[98.34572, "o", "  \"cdn.external.com\": {\"A\": \"203.0.113.30\", \"AAAA\": \"2001:db8::30\"},\r\n\u001b[?2004l\r"]
[98.345748, "o", "\u001b[?2004h> "]
[98.345926, "o", "  \"app-internal.example.com\": {\"A\": \"203.0.113.40\", \"AAAA\": \"2001:db8::40\"},\r\n\u001b[?2004l\r"]
[98.345946, "o", "\u001b[?2004h> "]
[98.346136, "o", "  \"alias-internal.internal.example.com\": {\"CNAME\": \"db.internal.example.com\"}\r\n\u001b[?2004l\r"]
[98.346156, "o", "\u001b[?2004h> "]
[98.346178, "o", "}\r\n\u001b[?2004l\r"]
[98.346201, "o", "\u001b[?2004h> EOF\r\n\u001b[?2004l\r"]
[98.355499, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[98.876142, "i", "cat > resolve_dns.sh << EOF\n#!/bin/bash\n\n# Exit on error and unset variable\nset -eu\n\n# Define file paths\nTICKET_FILE=\"incidents/tickets/dns_incident_2024.txt\"\nMOCK_HOSTS_FILE=\"resources/mock_hosts\"\nINTERNAL_DNS_FILE=\"resources/dns/internal_dns.json\"\nEXTERNAL_DNS_FILE=\"resources/dns/external_dns.json\"\nREPORT_FILE=\"incidents/dns_resolution_report.log\"\n\necho \"Starting DNS incident triage for user: $(whoami)\" > /dev/stderr\n\n# Create/empty report file\necho -n \"\" > \"$REPORT_FILE\"\n\n# Associate arrays for DNS data\ndeclare -A internal_dns_map\ndeclare -A external_dns_map\n\n# Helper function to parse JSON and populate map\nparse_json_to_map() {\n  local file_path=\"\\$1\"\n  local -n map_ref=\"\\$2\"\n  local temp_map=()\n  \n  # Use jq to parse JSON into an associative array string and then eval it\n  if command -v jq &> /dev/null; then\n    temp_map=\\$(jq -r 'to_entries | .[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")]| join(\\t) | select(length>0)' \"$file_path\")\n    while IFS=\\t read -r host a_recor"]
[98.876246, "i", "d aaaa_record cname_record; do\n      if [[ -n \"\\$cname_record\" && -z \"\\$a_record\" && -z \"\\$aaaa_record\" ]]; then\n        map_ref[\"\\$host\"]=\"CNAME:\\$cname_record\"\n      elif [[ -n \"\\$a_record\" ]]; then\n        map_ref[\"\\$host\"]=\"A:\\$a_record:\\$aaaa_record\"\n      elif [[ -n \"\\$aaaa_record\" ]]; then\n        map_ref[\"\\$host\"]=\"AAAA:::\\$aaaa_record\" # Store AAAA only if no A\n      fi\n    done <<< \"\\$temp_map\"\n  else\n    echo \"ERROR: jq not found. Cannot parse DNS JSON files.\" > /dev/stderr\n    exit 1\n  fi\n}\n\n# Helper function to recursively resolve hostnames with CNAMEs\n# Returns: final_ip_a, final_ip_aaaa, summary_message\nresolve_host_dns() {\n  local host_name=\"\\$1\"\n  local current_target=\"\\$host_name\"\n  local depth=0\n  local ip_a_result=\"-\"\n  local ip_aaaa_result=\"-\"\n  local resolution_path=\"\"\n\n  while [[ \\$depth -lt 3 && -n \"\\$current_target\" ]]; do\n    # Check internal DNS\n    if [[ -n \"\\${internal_dns_map[\\$current_target]+isset}\" ]]; then\n      IFS=':' read -ra record_parts <<< \"\\${internal_dns_map[\\$current"]
[98.876259, "o", "cat > resolve_dns.sh << EOF\r\n\u001b[?2004l\r"]
[98.876296, "i", "_target]}\"\n      local rec_type=\"\\${record_parts[0]}\"\n      local rec_value=\"\\${record_parts[1]}\"\n      local rec_value2=\"\\${record_parts[2]}\" # For A record with AAAA\n\n      if [[ \"\\$rec_type\" == \"A\" ]]; then\n        ip_a_result=\"\\$rec_value\"\n        ip_aaaa_result=\"\\$rec_value2\"\n        resolution_path=\"\\$resolution_path\\$current_target (A: \\$rec_value, AAAA: \\$rec_value2) ->\"\n        break\n      elif [[ \"\\$rec_type\" == \"CNAME\" ]]; then\n        current_target=\"\\$rec_value\"\n        resolution_path=\"\\$resolution_path\\$current_target (CNAME: \\$rec_value) ->\"\n        ((depth++))\n      fi\n    fi\n    \n    # Check external DNS if not found in internal or if current_target changed due to CNAME\n    if [[ -z \\${internal_dns_map[\\$current_target]+isset} ]]; then\n      if [[ -n \"\\${external_dns_map[\\$current_target]+isset}\" ]]; then\n        IFS=':' read -ra record_parts <<< \"\\${external_dns_map[\\$current_target]}\"\n        local rec_type=\"\\${record_parts[0]}\"\n        local rec_value=\"\\${record_parts[1]}\"\n        local r"]
[98.876307, "o", "\u001b[?2004h> "]
[98.876318, "i", "ec_value2=\"\\${record_parts[2]}\"\n\n        if [[ \"\\$rec_type\" == \"A\" ]]; then\n          ip_a_result=\"\\$rec_value\"\n          ip_aaaa_result=\"\\$rec_value2\"\n          resolution_path=\"\\$resolution_path\\$current_target (A: \\$rec_value, AAAA: \\$rec_value2) ->\"\n          break\n        elif [[ \"\\$rec_type\" == \"CNAME\" ]]; then\n          current_target=\"\\$rec_value\"\n          resolution_path=\"\\$resolution_path\\$current_target (CNAME: \\$rec_value) ->\"\n          ((depth++))\n        fi\n      fi\n    fi\n    \n    # If host not found and not a CNAME, or depth limit reached\n    if [[ -z \\${internal_dns_map[\\$current_target]+isset} && -z \\${external_dns_map[\\$current_target]+isset} ]] || [[ \\$depth -ge 3 ]]; then\n      # Check if it was a CNAME chain that ended without A/AAAA\n      if [[ \\$depth -ge 3 || ( -n \"\\$resolution_path\" && \\$resolution_path != \"\" ) ]]; then\n         echo \"-\" \"-\" \"CNAME_CHAIN_LIMIT_OR_LOOP\"\n         return\n      else\n        echo \"-\" \"-\" \"NO_RECORD_IN_DNS\"\n        return\n      fi\n    fi\n  done\n\n  # Final"]
[98.876387, "i", " check if current_target is not empty (e.g. CNAME points to something not directly in map but might be A/AAAA)\n  # This logic is mostly covered by loop, but good for final state.\n  if [[ -n \"\\$current_target\" ]]; then\n    if [[ -n \\${internal_dns_map[\\$current_target]+isset} ]]; then\n      IFS=':' read -ra record_parts <<< \"\\${internal_dns_map[\\$current_target]}\"\n      if [[ \"\\${record_parts[0]}\" == \"A\" ]]; then\n        echo \"\\${record_parts[1]}\" \"\\${record_parts[2]}\" \"FINAL_TARGET_AAAA\"\n        return\n      fi\n    elif [[ -n \\${external_dns_map[\\$current_target]+isset} ]]; then\n      IFS=':' read -ra record_parts <<< \"\\${external_dns_map[\\$current_target]}\"\n      if [[ \"\\${record_parts[0]}\" == \"A\" ]]; then\n        echo \"\\${record_parts[1]}\" \"\\${record_parts[2]}\" \"FINAL_TARGET_AAAA\"\n        return\n      fi\n    fi\n  fi\n  echo \"-\" \"-\" \"NO_RECORD_IN_DNS\"\n}\n\n# Helper function to get IP from mock_hosts\nget_mock_hosts_ip() {\n  local host_name=\"\\$1\"\n  local ip_result=\"-\"\n  # grep -i for case-insensitive match, -m 1 "]
[98.876395, "o", "#!/bin/bash\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[98.876432, "i", "for first match\n  # -oP for Perl-compatible regex and output only matching part\n  # Pattern: (any IP addr)\\t(host_name) - IP is group 1, host is group 2\n  ip_result=\\$(grep -i -m 1 \"^[0-9.\\\\[:space:]]*\\\\t\\\\\\\\\\\\\\\\\\\\t\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[98.876457, "i", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[98.876479, "i", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\\nEOF\n"]
[98.876529, "o", "# Exit on error and unset variable\r\n\u001b[?2004l\r"]
[98.876559, "o", "\u001b[?2004h"]
[98.876583, "o", "> set -eu\r\n\u001b[?2004l\r"]
[98.876609, "o", "\u001b[?2004h"]
[98.876646, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[98.876701, "o", "# Define file paths\r\n\u001b[?2004l\r"]
[98.876722, "o", "\u001b[?2004h> "]
[98.876879, "o", "TICKET_FILE=\"incidents/tickets/dns_incident_2024.txt\"\r\n\u001b[?2004l\r"]
[98.876901, "o", "\u001b[?2004h> "]
[98.877015, "o", "MOCK_HOSTS_FILE=\"resources/mock_hosts\"\r\n\u001b[?2004l\r"]
[98.877029, "o", "\u001b[?2004h"]
[98.877052, "o", "> "]
[98.87719, "o", "INTERNAL_DNS_FILE=\"resources/dns/internal_dns.json\"\r\n\u001b[?2004l\r"]
[98.877206, "o", "\u001b[?2004h> "]
[98.877364, "o", "EXTERNAL_DNS_FILE=\"resources/dns/external_dns.json\"\r\n\u001b[?2004l\r"]
[98.87738, "o", "\u001b[?2004h> "]
[98.877535, "o", "REPORT_FILE=\"incidents/dns_resolution_report.log\"\r\n\u001b[?2004l\r"]
[98.877555, "o", "\u001b[?2004h"]
[98.877577, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[98.877798, "o", "echo \"Starting DNS incident triage for user: $(whoami)\" > /dev/stderr\r\n\u001b[?2004l\r"]
[98.877815, "o", "\u001b[?2004h> "]
[98.877835, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[98.877856, "o", "> "]
[98.877925, "o", "# Create/empty report file\r\n\u001b[?2004l\r"]
[98.87794, "o", "\u001b[?2004h> "]
[98.878028, "o", "echo -n \"\" > \"$REPORT_FILE\"\r\n\u001b[?2004l\r"]
[98.878043, "o", "\u001b[?2004h> "]
[98.878062, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[98.878082, "o", "> "]
[98.878173, "o", "# Associate arrays for DNS data\r\n\u001b[?2004l\r"]
[98.878188, "o", "\u001b[?2004h"]
[98.878207, "o", "> "]
[98.878277, "o", "declare -A internal_dns_map\r\n\u001b[?2004l\r"]
[98.878295, "o", "\u001b[?2004h"]
[98.878314, "o", "> "]
[98.878384, "o", "declare -A external_dns_map\r\n\u001b[?2004l\r"]
[98.878404, "o", "\u001b[?2004h"]
[98.878423, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[98.878578, "o", "# Helper function to parse JSON and populate map\r\n\u001b[?2004l\r"]
[98.878602, "o", "\u001b[?2004h> "]
[98.878665, "o", "parse_json_to_map() {\r\n\u001b[?2004l\r"]
[98.878693, "o", "\u001b[?2004h> "]
[98.878759, "o", "  local file_path=\"\\$1\"\r\n\u001b[?2004l\r"]
[98.878776, "o", "\u001b[?2004h"]
[98.878794, "o", "> "]
[98.878855, "o", "  local -n map_ref=\"\\$2\"\r\n\u001b[?2004l\r"]
[98.878873, "o", "\u001b[?2004h> "]
[98.878937, "o", "  local temp_map=()\r\n\u001b[?2004l\r"]
[98.878953, "o", "\u001b[?2004h"]
[98.87897, "o", ">   \r\n\u001b[?2004l\r"]
[98.878989, "o", "\u001b[?2004h"]
[98.879008, "o", "> "]
[98.879218, "o", "  # Use jq to parse JSON into an associative array string and then eval it\r\n\u001b[?2004l\r"]
[98.879235, "o", "\u001b[?2004h"]
[98.879252, "o", "> "]
[98.879352, "o", "  if command -v jq &> /dev/null; then\r\n\u001b[?2004l\r"]
[98.87937, "o", "\u001b[?2004h> "]
[98.879856, "o", "    temp_map=\\$(jq -r 'to_entries | .[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")]| join(\\t) | select(length>0)' \"$file_path\rh\")\r\n\u001b[?2004l\r"]
[98.879877, "o", "\u001b[?2004h"]
[98.879894, "o", "> "]
[98.88008, "o", "    while IFS=\\t read -r host a_record aaaa_record cname_record; do\r\n\u001b[?2004l\r"]
[98.880099, "o", "\u001b[?2004h> "]
[98.880344, "o", "      if [[ -n \"\\$cname_record\" && -z \"\\$a_record\" && -z \"\\$aaaa_record\" ]]; then\r\n\u001b[?2004l\r"]
[98.880362, "o", "\u001b[?2004h> "]
[98.880512, "o", "        map_ref[\"\\$host\"]=\"CNAME:\\$cname_record\"\r\n\u001b[?2004l\r"]
[98.880534, "o", "\u001b[?2004h> "]
[98.880665, "o", "      elif [[ -n \"\\$a_record\" ]]; then\r\n\u001b[?2004l\r"]
[98.880695, "o", "\u001b[?2004h> "]
[98.880845, "o", "        map_ref[\"\\$host\"]=\"A:\\$a_record:\\$aaaa_record\"\r\n\u001b[?2004l\r"]
[98.880865, "o", "\u001b[?2004h> "]
[98.880988, "o", "      elif [[ -n \"\\$aaaa_record\" ]]; then\r\n\u001b[?2004l\r"]
[98.881006, "o", "\u001b[?2004h> "]
[98.881234, "o", "        map_ref[\"\\$host\"]=\"AAAA:::\\$aaaa_record\" # Store AAAA only if no A\r\n\u001b[?2004l\r"]
[98.881252, "o", "\u001b[?2004h> "]
[98.881281, "o", "      fi\r\n\u001b[?2004l\r"]
[98.881299, "o", "\u001b[?2004h> "]
[98.88138, "o", "    done <<< \"\\$temp_map\"\r\n\u001b[?2004l\r"]
[98.881398, "o", "\u001b[?2004h> "]
[98.881423, "o", "  else\r\n\u001b[?2004l\r"]
[98.881443, "o", "\u001b[?2004h> "]
[98.881673, "o", "    echo \"ERROR: jq not found. Cannot parse DNS JSON files.\" > /dev/stderr\r\n\u001b[?2004l\r"]
[98.881699, "o", "\u001b[?2004h> "]
[98.88173, "o", "    exit 1\r\n\u001b[?2004l\r"]
[98.88175, "o", "\u001b[?2004h> "]
[98.881769, "o", "  fi\r\n\u001b[?2004l\r"]
[98.881788, "o", "\u001b[?2004h> }\r\n"]
[98.881808, "o", "\u001b[?2004l\r\u001b[?2004h"]
[98.881827, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h"]
[98.881845, "o", "> "]
[98.882021, "o", "# Helper function to recursively resolve hostnames with CNAMEs\r\n\u001b[?2004l\r"]
[98.882043, "o", "\u001b[?2004h> "]
[98.882201, "o", "# Returns: final_ip_a, final_ip_aaaa, summary_message\r\n\u001b[?2004l\r"]
[98.882217, "o", "\u001b[?2004h"]
[98.882236, "o", "> "]
[98.882284, "o", "resolve_host_dns() {\r\n\u001b[?2004l\r"]
[98.882301, "o", "\u001b[?2004h"]
[98.882319, "o", "> "]
[98.882378, "o", "  local host_name=\"\\$1\"\r\n\u001b[?2004l\r"]
[98.882394, "o", "\u001b[?2004h"]
[98.882412, "o", "> "]
[98.882509, "o", "  local current_target=\"\\$host_name\"\r\n\u001b[?2004l\r"]
[98.882526, "o", "\u001b[?2004h> "]
[98.882577, "o", "  local depth=0\r\n\u001b[?2004l\r"]
[98.882595, "o", "\u001b[?2004h> "]
[98.882705, "o", "  local ip_a_result=\"-\"\r\n\u001b[?2004l\r"]
[98.882723, "o", "\u001b[?2004h> "]
[98.882804, "o", "  local ip_aaaa_result=\"-\"\r\n\u001b[?2004l\r"]
[98.882825, "o", "\u001b[?2004h> "]
[98.882905, "o", "  local resolution_path=\"\"\r\n\u001b[?2004l\r"]
[98.882921, "o", "\u001b[?2004h"]
[98.88294, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h"]
[98.88296, "o", "> "]
[98.883118, "o", "  while [[ \\$depth -lt 3 && -n \"\\$current_target\" ]]; do\r\n\u001b[?2004l\r"]
[98.883135, "o", "\u001b[?2004h"]
[98.883152, "o", "> "]
[98.883213, "o", "    # Check internal DNS\r\n\u001b[?2004l\r"]
[98.883231, "o", "\u001b[?2004h> "]
[98.883439, "o", "    if [[ -n \"\\${internal_dns_map[\\$current_target]+isset}\" ]]; then\r\n\u001b[?2004l\r"]
[98.883458, "o", "\u001b[?2004h> "]
[98.883703, "o", "      IFS=':' read -ra record_parts <<< \"\\${internal_dns_map[\\$current_target]}\"\r\n\u001b[?2004l\r"]
[98.883721, "o", "\u001b[?2004h> "]
[98.883851, "o", "      local rec_type=\"\\${record_parts[0]}\"\r\n\u001b[?2004l\r"]
[98.883867, "o", "\u001b[?2004h> "]
[98.884001, "o", "      local rec_value=\"\\${record_parts[1]}\"\r\n\u001b[?2004l\r"]
[98.884018, "o", "\u001b[?2004h> "]
[98.884228, "o", "      local rec_value2=\"\\${record_parts[2]}\" # For A record with AAAA\r\n\u001b[?2004l\r"]
[98.884254, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[98.884272, "o", "\u001b[?2004h> "]
[98.884397, "o", "      if [[ \"\\$rec_type\" == \"A\" ]]; then\r\n\u001b[?2004l\r"]
[98.884419, "o", "\u001b[?2004h> "]
[98.884518, "o", "        ip_a_result=\"\\$rec_value\"\r\n\u001b[?2004l\r"]
[98.884535, "o", "\u001b[?2004h> "]
[98.884656, "o", "        ip_aaaa_result=\"\\$rec_value2\"\r\n\u001b[?2004l\r"]
[98.884672, "o", "\u001b[?2004h"]
[98.884689, "o", "> "]
[98.884973, "o", "        resolution_path=\"\\$resolution_path\\$current_target (A: \\$rec_value, AAAA: \\$rec_value2) ->\"\r\n\u001b[?2004l\r"]
[98.88499, "o", "\u001b[?2004h> "]
[98.885035, "o", "        break\r\n\u001b[?2004l\r"]
[98.885053, "o", "\u001b[?2004h> "]
[98.885195, "o", "      elif [[ \"\\$rec_type\" == \"CNAME\" ]]; then\r\n\u001b[?2004l\r"]
[98.885211, "o", "\u001b[?2004h"]
[98.885229, "o", "> "]
[98.885325, "o", "        current_target=\"\\$rec_value\"\r\n\u001b[?2004l\r"]
[98.885345, "o", "\u001b[?2004h> "]
[98.885593, "o", "        resolution_path=\"\\$resolution_path\\$current_target (CNAME: \\$rec_value) ->\"\r\n\u001b[?2004l\r"]
[98.885609, "o", "\u001b[?2004h> "]
[98.88568, "o", "        ((depth++))\r\n\u001b[?2004l\r"]
[98.885698, "o", "\u001b[?2004h> "]
[98.885729, "o", "      fi\r\n\u001b[?2004l\r"]
[98.885745, "o", "\u001b[?2004h"]
[98.885762, "o", "> "]
[98.885781, "o", "    fi\r\n\u001b[?2004l\r\u001b[?2004h"]
[98.885798, "o", "> "]
[98.885821, "o", "    \r\n\u001b[?2004l\r\u001b[?2004h"]
[98.885841, "o", "> "]
[98.886098, "o", "    # Check external DNS if not found in internal or if current_target changed due to CNAME\r\n\u001b[?2004l\r"]
[98.886115, "o", "\u001b[?2004h> "]
[98.886317, "o", "    if [[ -z \\${internal_dns_map[\\$current_target]+isset} ]]; then\r\n\u001b[?2004l\r"]
[98.886333, "o", "\u001b[?2004h> "]
[98.886544, "o", "      if [[ -n \"\\${external_dns_map[\\$current_target]+isset}\" ]]; then\r\n\u001b[?2004l\r"]
[98.886559, "o", "\u001b[?2004h> "]
[98.886814, "o", "        IFS=':' read -ra record_parts <<< \"\\${external_dns_map[\\$current_target]}\"\r\n\u001b[?2004l\r"]
[98.886835, "o", "\u001b[?2004h> "]
[98.886971, "o", "        local rec_type=\"\\${record_parts[0]}\"\r\n\u001b[?2004l\r"]
[98.886987, "o", "\u001b[?2004h> "]
[98.887127, "o", "        local rec_value=\"\\${record_parts[1]}\"\r\n\u001b[?2004l\r"]
[98.887143, "o", "\u001b[?2004h> "]
[98.887286, "o", "        local rec_value2=\"\\${record_parts[2]}\"\r\n\u001b[?2004l\r"]
[98.887304, "o", "\u001b[?2004h> "]
[98.887322, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[98.88734, "o", "> "]
[98.88746, "o", "        if [[ \"\\$rec_type\" == \"A\" ]]; then\r\n\u001b[?2004l\r"]
[98.887476, "o", "\u001b[?2004h> "]
[98.887586, "o", "          ip_a_result=\"\\$rec_value\"\r\n\u001b[?2004l\r"]
[98.887602, "o", "\u001b[?2004h> "]
[98.887743, "o", "          ip_aaaa_result=\"\\$rec_value2\"\r\n\u001b[?2004l\r"]
[98.887779, "o", "\u001b[?2004h> "]
[98.888062, "o", "          resolution_path=\"\\$resolution_path\\$current_target (A: \\$rec_value, AAAA: \\$rec_value2) ->\"\r\n\u001b[?2004l\r"]
[98.888076, "o", "\u001b[?2004h"]
[98.888096, "o", "> "]
[98.888131, "o", "          break\r\n\u001b[?2004l\r"]
[98.888146, "o", "\u001b[?2004h"]
[98.888162, "o", "> "]
[98.888297, "o", "        elif [[ \"\\$rec_type\" == \"CNAME\" ]]; then\r\n\u001b[?2004l\r"]
[98.888313, "o", "\u001b[?2004h> "]
[98.888431, "o", "          current_target=\"\\$rec_value\"\r\n\u001b[?2004l\r"]
[98.888449, "o", "\u001b[?2004h"]
[98.888464, "o", "> "]
[98.888743, "o", "          resolution_path=\"\\$resolution_path\\$current_target (CNAME: \\$rec_value) ->\"\r\n\u001b[?2004l\r"]
[98.888769, "o", "\u001b[?2004h> "]
[98.888834, "o", "          ((depth++))\r\n\u001b[?2004l\r"]
[98.888851, "o", "\u001b[?2004h"]
[98.888871, "o", "> "]
[98.888892, "o", "        fi\r\n\u001b[?2004l\r"]
[98.888912, "o", "\u001b[?2004h> "]
[98.888939, "o", "      fi\r\n\u001b[?2004l\r"]
[98.888958, "o", "\u001b[?2004h> "]
[98.888985, "o", "    fi\r\n\u001b[?2004l\r"]
[98.889004, "o", "\u001b[?2004h> "]
[98.889024, "o", "    \r\n\u001b[?2004l\r"]
[98.889043, "o", "\u001b[?2004h> "]
[98.889239, "o", "    # If host not found and not a CNAME, or depth limit reached\r\n\u001b[?2004l\r"]
[98.889261, "o", "\u001b[?2004h> "]
[98.889676, "o", "    if [[ -z \\${internal_dns_map[\\$current_target]+isset} && -z \\${external_dns_map[\\$current_target]+isset} ]] || [[ \\$depth -ge 3 ]]; then\r\n\u001b[?2004l\r"]
[98.889711, "o", "\u001b[?2004h> "]
[98.889887, "o", "      # Check if it was a CNAME chain that ended without A/AAAA\r\n\u001b[?2004l\r"]
[98.88991, "o", "\u001b[?2004h> "]
[98.89018, "o", "      if [[ \\$depth -ge 3 || ( -n \"\\$resolution_path\" && \\$resolution_path != \"\" ) ]]; then\r\n\u001b[?2004l\r"]
[98.890197, "o", "\u001b[?2004h> "]
[98.890347, "o", "         echo \"-\" \"-\" \"CNAME_CHAIN_LIMIT_OR_LOOP\"\r\n\u001b[?2004l\r"]
[98.890362, "o", "\u001b[?2004h"]
[98.89038, "o", "> "]
[98.890425, "o", "         return\r\n\u001b[?2004l\r"]
[98.890455, "o", "\u001b[?2004h> "]
[98.890474, "o", "      else\r\n\u001b[?2004l\r\u001b[?2004h"]
[98.89049, "o", "> "]
[98.890583, "o", "        echo \"-\" \"-\" \"NO_RECORD_IN_DNS\"\r\n\u001b[?2004l\r"]
[98.890598, "o", "\u001b[?2004h> "]
[98.890644, "o", "        return\r\n\u001b[?2004l\r"]
[98.890657, "o", "\u001b[?2004h"]
[98.890671, "o", "> "]
[98.890686, "o", "      fi\r\n\u001b[?2004l\r"]
[98.8907, "o", "\u001b[?2004h"]
[98.890714, "o", "> "]
[98.890728, "o", "    fi\r\n\u001b[?2004l\r"]
[98.890744, "o", "\u001b[?2004h> "]
[98.890764, "o", "  done\r\n\u001b[?2004l\r"]
[98.890778, "o", "\u001b[?2004h"]
[98.890793, "o", "> \r\n\u001b[?2004l\r"]
[98.890807, "o", "\u001b[?2004h> "]
[98.891091, "o", "  # Final check if current_target is not empty (e.g. CNAME points to something not directly in map but might be A/AAAA)\r\n\u001b[?2004l\r"]
[98.891107, "o", "\u001b[?2004h> "]
[98.891273, "o", "  # This logic is mostly covered by loop, but good for final state.\r\n\u001b[?2004l\r"]
[98.891293, "o", "\u001b[?2004h> "]
[98.891384, "o", "  if [[ -n \"\\$current_target\" ]]; then\r\n\u001b[?2004l\r"]
[98.891397, "o", "\u001b[?2004h"]
[98.891417, "o", "> "]
[98.891562, "o", "    if [[ -n \\${internal_dns_map[\\$current_target]+isset} ]]; then\r\n\u001b[?2004l\r"]
[98.89158, "o", "\u001b[?2004h> "]
[98.891778, "o", "      IFS=':' read -ra record_parts <<< \"\\${internal_dns_map[\\$current_target]}\"\r\n\u001b[?2004l\r"]
[98.891792, "o", "\u001b[?2004h"]
[98.891807, "o", "> "]
[98.891917, "o", "      if [[ \"\\${record_parts[0]}\" == \"A\" ]]; then\r\n\u001b[?2004l\r"]
[98.891932, "o", "\u001b[?2004h> "]
[98.892119, "o", "        echo \"\\${record_parts[1]}\" \"\\${record_parts[2]}\" \"FINAL_TARGET_AAAA\"\r\n\u001b[?2004l\r"]
[98.892138, "o", "\u001b[?2004h> "]
[98.892176, "o", "        return\r\n\u001b[?2004l\r"]
[98.892191, "o", "\u001b[?2004h"]
[98.892205, "o", "> "]
[98.892224, "o", "      fi\r\n\u001b[?2004l\r"]
[98.892239, "o", "\u001b[?2004h> "]
[98.892406, "o", "    elif [[ -n \\${external_dns_map[\\$current_target]+isset} ]]; then\r\n\u001b[?2004l\r"]
[98.892427, "o", "\u001b[?2004h"]
[98.892443, "o", "> "]
[98.892616, "o", "      IFS=':' read -ra record_parts <<< \"\\${external_dns_map[\\$current_target]}\"\r\n\u001b[?2004l\r"]
[98.892636, "o", "\u001b[?2004h> "]
[98.892766, "o", "      if [[ \"\\${record_parts[0]}\" == \"A\" ]]; then\r\n\u001b[?2004l\r"]
[98.892787, "o", "\u001b[?2004h> "]
[98.892964, "o", "        echo \"\\${record_parts[1]}\" \"\\${record_parts[2]}\" \"FINAL_TARGET_AAAA\"\r\n\u001b[?2004l\r"]
[98.892981, "o", "\u001b[?2004h"]
[98.892997, "o", "> "]
[98.893039, "o", "        return\r\n\u001b[?2004l\r"]
[98.893058, "o", "\u001b[?2004h"]
[98.893073, "o", "> "]
[98.8931, "o", "      fi\r\n\u001b[?2004l\r"]
[98.89312, "o", "\u001b[?2004h"]
[98.893137, "o", "> "]
[98.893156, "o", "    fi\r\n\u001b[?2004l\r"]
[98.89317, "o", "\u001b[?2004h"]
[98.89319, "o", "> "]
[98.893206, "o", "  fi\r\n\u001b[?2004l\r"]
[98.89322, "o", "\u001b[?2004h"]
[98.893235, "o", "> "]
[98.893325, "o", "  echo \"-\" \"-\" \"NO_RECORD_IN_DNS\"\r\n\u001b[?2004l\r"]
[98.893339, "o", "\u001b[?2004h"]
[98.893355, "o", "> }\r\n\u001b[?2004l\r"]
[98.893376, "o", "\u001b[?2004h"]
[98.89339, "o", "> \r\n\u001b[?2004l\r"]
[98.893405, "o", "\u001b[?2004h"]
[98.89342, "o", "> "]
[98.893533, "o", "# Helper function to get IP from mock_hosts\r\n\u001b[?2004l\r"]
[98.893553, "o", "\u001b[?2004h"]
[98.893571, "o", "> "]
[98.893647, "o", "get_mock_hosts_ip() {\r\n\u001b[?2004l\r"]
[98.893696, "o", "\u001b[?2004h"]
[98.893714, "o", "> "]
[98.893779, "o", "  local host_name=\"\\$1\"\r\n\u001b[?2004l\r"]
[98.893792, "o", "\u001b[?2004h"]
[98.893808, "o", "> "]
[98.893872, "o", "  local ip_result=\"-\"\r\n\u001b[?2004l\r"]
[98.893889, "o", "\u001b[?2004h> "]
[98.89405, "o", "  # grep -i for case-insensitive match, -m 1 for first match\r\n\u001b[?2004l\r"]
[98.894072, "o", "\u001b[?2004h> "]
[98.894244, "o", "  # -oP for Perl-compatible regex and output only matching part\r\n\u001b[?2004l\r"]
[98.894264, "o", "\u001b[?2004h"]
[98.894287, "o", "> "]
[98.894473, "o", "  # Pattern: (any IP addr)\\t(host_name) - IP is group 1, host is group 2\r\n\u001b[?2004l\r"]
[98.894494, "o", "\u001b[?2004h"]
[98.894514, "o", "> "]
[98.902566, "o", "  ip_result=\\$(grep -i -m 1 \"^[0-9.\\\\[:space:]]*\\\\t\\\\\\\\\\\\\\\\\\\\t\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[98.902614, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[98.902648, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\\nEOF\r\n\u001b[?2004l\r\u001b[?2004h"]
[98.902676, "o", "> "]
[100.827933, "i", "chmod +x resolve_dns.sh\n"]
[100.82804, "o", "chmod +x resolve_dns.sh\r\n\u001b[?2004l\r"]
[100.828067, "o", "\u001b[?2004h"]
[100.828088, "o", "> "]
[101.048015, "i", "jq --version\n"]
[101.04812, "o", "jq --version\r\n\u001b[?2004l\r"]
[101.048147, "o", "\u001b[?2004h> "]
[169.905397, "i", "cat >> resolve_dns.sh << EOF\n\n    # Pattern: (any IP addr)\\t(host_name) - IP is group 1, host is group 2\n    ip_result=$(grep -i -m 1 \"^[0-9.\\\\[:space:]]*\\\\t\\\\\\\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.9055, "i", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905525, "i", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905543, "o", "cat >> resolve_dns.sh << EOF\r\n\u001b[?2004l\r"]
[169.905566, "i", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\nEOF\n"]
[169.905588, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905617, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905661, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905715, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905738, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905757, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905777, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905797, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905823, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905845, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.905872, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\r\nEOF\r\n"]
[169.905892, "o", "\u001b[?2004h"]
[169.90591, "o", "> \r\n\u001b[?2004l\r"]
[169.90593, "o", "\u001b[?2004h"]
[169.905947, "o", "> "]
[169.906124, "o", "    # Pattern: (any IP addr)\\t(host_name) - IP is group 1, host is group 2\r\n\u001b[?2004l\r"]
[169.906141, "o", "\u001b[?2004h"]
[169.906157, "o", "> "]
[169.915286, "o", "    ip_result=$(grep -i -m 1 \"^[0-9.\\\\[:space:]]*\\\\t\\\\\\\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.915349, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.915373, "o", "\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]
[169.915397, "o", "\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"\r\n\u001b[?2004l\r\u001b[?2004h> EOF\r\n\u001b[?2004l\r"]
[169.917442, "o", "-bash: command substitution: line 40: unexpected EOF while looking for matching `\"'\r\n-bash: command substitution: line 41: syntax error: unexpected end of file\r\n"]
[169.917884, "o", "\u001b[?2004h"]
[169.917928, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[170.025201, "i", "cat >> resolve_dns.sh << EOF\n\n    # Ensure we capture the host part correctly, if IP part is complex\n    if [ -z \"\\$ip_result\" ]; then\n      ip_result=\"-\"\n    fi\n    echo \"\\$ip_result\"\n  }\n\n  # Main loop for processing hostnames\n  while IFS= read -r hostname; do\n    if [ -z \"\\$hostname\" ]; then\n      continue\n    fi\n    \n    echo \"Processing: \\$hostname\" > /dev/stderr\n    \n    # 1. Check mock_hosts\n    hosts_file_ip=$(get_mock_hosts_ip \"\\$hostname\")\n    if [ \"\\$hosts_file_ip\" == \"-\" ]; then\n      hosts_file_ip=\"-\"\n    fi\n\n    # 2. Resolve from DNS\n    dns_ipv4=\"-\"\n    dns_ipv6=\"-\"\n    dns_summary=\"NO_RECORD_IN_DNS\"\n\n    # Parse DNS files once (conceptually, should happen before loop)\n    # For simplicity, parse in each iteration for this mock-up, but ideally outside\n    parse_json_to_map \"\\$INTERNAL_DNS_FILE\" internal_dns_map\n    parse_json_to_map \"\\$EXTERNAL_DNS_FILE\" external_dns_map\n\n    read -r resolved_ipv4 resolved_ipv6 temp_summary < <(resolve_host_dns \"\\$hostname\")\n\n    if [ \"\\$temp_summary\" == \"CNAME"]
[170.0253, "i", "_CHAIN_LIMIT_OR_LOOP\" ] || \\\n       [ \"\\$temp_summary\" == \"FINAL_TARGET_AAAA\" ]; then\n      dns_summary=\"\\$temp_summary\"\n      if [ -n \"\\$resolved_ipv4\" ] && [ \"\\$resolved_ipv4\" != \"-\" ]; then\n        dns_ipv4=\"\\$resolved_ipv4\"\n      fi\n      if [ -n \"\\$resolved_ipv6\" ] && [ \"\\$resolved_ipv6\" != \"-\" ]; then\n        dns_ipv6=\"\\$resolved_ipv6\"\n      fi\n    elif [ \"\\$temp_summary\" == \"NO_RECORD_IN_DNS\" ]; then\n      # This implies resolved_ipv4 and resolved_ipv6 are already \"-\"\n      dns_summary=\"NO_RECORD_IN_DNS\"\n    fi\n\n\n    # 3. Determine SUMMARY status\n    summary_status=\"\"\n    if [ \"\\$hosts_file_ip\" != \"-\" ]; then\n      if [ \"\\$dns_summary\" == \"NO_RECORD_IN_DNS\" ]; then\n        summary_status=\"OK - hosts entry present, no DNS\"\n      elif [ \"\\$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ] || [ \"\\$dns_summary\" == \"FINAL_TARGET_AAAA\" ]; then\n        # If DNS has a record (even if CNAME chain ends or final target), compare IPs\n        if [ \"\\$hosts_file_ip\" == \"\\$dns_ipv4\" ]; then\n          # This case is trick"]
[170.025331, "i", "y. If hosts file has IP, and DNS resolves to same IP via CNAME, it's consistent.\n          # If hosts file has IP, but DNS is a CNAME loop, it's not 'no DNS' but also not 'consistent' in typical sense.\n          # The prompt asks for consistency of IPv4. If DNS provides an IPv4, compare.\n          # If DNS is a CNAME loop, it's not a direct IP, so hosts entry is standalone.\n          if [ \"\\$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]; then\n             summary_status=\"OK - hosts entry present, no DNS (due to CNAME issue)\" \n          elif [ \"\\$dns_summary\" == \"FINAL_TARGET_AAAA\" ] && [ \"\\$dns_ipv4\" != \"-\" ] && [ \"\\$hosts_file_ip\" == \"\\$dns_ipv4\" ]; then\n            summary_status=\"OK - consistent\"\n          elif [ \"\\$dns_summary\" == \"FINAL_TARGET_AAAA\" ] && [ \"\\$dns_ipv4\" == \"-\" ]; then\n            # DNS record is only AAAA, hosts has IPv4\n            summary_status=\"WARN - inconsistent (hosts A, DNS only AAAA)\"\n          else # DNS has an IP, but it's different or summary is complex\n            summary_sta"]
[170.025349, "o", "cat >> resolve_dns.sh << EOF\r\n\u001b[?2004l\r"]
[170.025371, "i", "tus=\"WARN - inconsistent\"\n          fi\n        else\n          summary_status=\"WARN - inconsistent\"\n        fi\n      else # DNS has a record and it's A/AAAA\n        if [ \"\\$hosts_file_ip\" == \"\\$dns_ipv4\" ]; then\n          summary_status=\"OK - consistent\"\n        else\n          summary_status=\"WARN - inconsistent\"\n        fi\n      fi\n    else # No entry in hosts file\n      if [ \"\\$dns_summary\" == \"NO_RECORD_IN_DNS\" ]; then\n        summary_status=\"NO_RECORD_FOUND\"\n      elif [ \"\\$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]; then\n        summary_status=\"CNAME_CHAIN_LIMIT_OR_LOOP\"\n      elif [ -n \"\\$dns_ipv4\" ] && [ \"\\$dns_ipv4\" != \"-\" ]; then\n        summary_status=\"UPDATED hosts with DNS A\"\n        echo \"\\$dns_ipv4\\t\\$hostname\" >> \"$MOCK_HOSTS_FILE.temp\"\n      else\n        summary_status=\"NO_RECORD_FOUND\" # Or some other status if only AAAA found\n      fi\n    fi\n\n    # Append to report (will be sorted later)\n    echo -e \"\\$hostname\\t\\$hosts_file_ip\\t\\$dns_ipv4\\t\\$dns_ipv6\\t\\$summary_status\" >> \"$REPORT_FILE\"\n "]
[170.025388, "o", "y. If hosts file has IP, and DNS resolves to same IP via CNAME, it's consistent.\r\n          # If hosts file has IP, but "]
[170.025406, "i", " done < \"$TICKET_FILE\"\n\n  # Sort the report file\n  sort \"$REPORT_FILE\" -o \"$REPORT_FILE\"\n\n  echo \"DNS triage complete. Report generated: $REPORT_FILE\" > /dev/stderr\n  echo \"Mock hosts updated temporarily in $MOCK_HOSTS_FILE.temp. Manually review and copy if changes are correct.\" > /dev/stderr\nEOF\n"]
[170.025426, "o", "DNS is a CNAME loop, it's not 'no DNS' but also not 'consistent' in typical sense.\r\n          # The prompt asks for consistency of I"]
[170.025448, "o", "Pv4. If DNS provides an IPv4, compare.\r\n          # If DNS is a CNAME loop, it's not a direct IP, so hosts entry is standalone.\r\n          if [ \"\\$dns_summary\" == \"CNAME_CHAIN_LIMIT_O"]
[170.025467, "o", "R_LOOP\" ]; then\r\n             summary_status=\"OK - hosts entry present, no DNS (due to CNAM"]
[170.025485, "o", "E issue)\" \r\n          elif [ \"\\$dns_summary\" == \"FINAL_TARGET_AAAA\" ] && [ \"\\$dns_ipv4\" != \"-\" ] && [ \"\\$hosts_file_ip\" == \"\\$dns_ipv"]
[170.025504, "o", "4\" ]; then\r\n            summary_status=\"OK - consistent\"\r\n          elif [ \"\\$dns_summary\" == \"FINA"]
[170.025526, "o", "L_TARGET_AAAA\" ] && [ \"\\$dns_ipv4\" == \"-\" ]; then\r\n            # DNS "]
[170.02555, "o", "record is only AAAA, hosts has IPv4\r\n            summary_status=\"W"]
[170.025571, "o", "ARN - inconsistent (hosts A, DNS only AAAA)\"\r\n          else # DNS has an IP, but it's different or summary is complex"]
[170.025593, "o", "\r\n            summary_sta"]
[170.025613, "o", "tus=\"WARN - inconsistent\"\r\n          fi\r\n        else\r\n          summary_status=\"WARN - inconsistent\"\r\n        fi\r\n      else # DNS has a recor"]
[170.025644, "o", "d and it's A/AAAA\r\n        if [ \"\\$hosts_file_ip\" == \"\\$dns_ipv4\" ]; then\r\n          summary_status=\"OK - "]
[170.02567, "o", "consistent\"\r\n        else\r\n          summary_status=\"WARN - inconsistent\"\r\n        fi\r\n      fi\r\n    else # No entry in hosts file\r\n      i"]
[170.02569, "o", "f [ \"\\$dns_summary\" == \"NO_RECORD_IN_DNS\" ]; then\r\n        summary_status=\"NO_RECORD_FOUND\"\r\n      elif [ \"\\$"]
[170.025711, "o", "dns_summary\" == \"CNAME_CHAIN_LIMIT_OR"]
[170.025731, "o", "_LOOP\" ]; then\r\n        summary_status=\"CNAME_CHAIN_LIMIT_OR_LOOP\"\r\n      elif [ -n \"\\$dns_ipv4\" ] && [ \"\\$dns_ipv4\" != \"-\" ]; "]
[170.025752, "o", "then\r\n        summary_status=\"UPDATED hosts with DNS A\"\r\n        echo \"\\$dns_ipv4\\t\\$hos"]
[170.025769, "o", "tname\" >> \"$MOCK_HOSTS_FILE.temp\"\r\n      e"]
[170.025787, "o", "lse\r\n        summary_status=\"NO_RECORD_FOUND\" # Or some other status if only AAAA found\r\n    "]
[170.025803, "o", "  fi\r\n    fi\r\n\r\n    # Append to report (will be sorted later)\r\n    echo -e \"\\$hostname\\t\\$hosts_file_ip\\t\\$dns_ipv4\\"]
[170.025819, "o", "t\\$dns_ipv6\\t\\$summary_status\" >> \"$REPORT_FILE\"\r\n "]
[170.025835, "o", " done < \"$TICKET_FILE\"\r\n\r\n  # "]
[170.025852, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[170.025872, "o", "\u001b[?2004h> "]
[170.0261, "o", "    # Ensure we capture the host part correctly, if IP part is complex\r\n\u001b[?2004l\r\u001b[?2004h"]
[170.026127, "o", "> "]
[170.026211, "o", "    if [ -z \"\\$ip_result\" ]; then\r\n\u001b[?2004l\r"]
[170.026238, "o", "\u001b[?2004h> "]
[170.026292, "o", "      ip_result=\"-\"\r\n\u001b[?2004l\r"]
[170.026315, "o", "\u001b[?2004h"]
[170.026336, "o", ">     fi\r\n\u001b[?2004l\r"]
[170.026358, "o", "\u001b[?2004h> "]
[170.026427, "o", "    echo \"\\$ip_result\"\r\n\u001b[?2004l\r"]
[170.026443, "o", "\u001b[?2004h"]
[170.026465, "o", ">   }\r\n\u001b[?2004l\r"]
[170.026485, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[170.026507, "o", "\u001b[?2004h> "]
[170.026622, "o", "  # Main loop for processing hostnames\r\n\u001b[?2004l\r"]
[170.026652, "o", "\u001b[?2004h"]
[170.026675, "o", "> "]
[170.026777, "o", "  while IFS= read -r hostname; do\r\n\u001b[?2004l\r"]
[170.026794, "o", "\u001b[?2004h> "]
[170.026894, "o", "    if [ -z \"\\$hostname\" ]; then\r\n\u001b[?2004l\r"]
[170.02691, "o", "\u001b[?2004h"]
[170.026931, "o", "> "]
[170.026958, "o", "      continue\r\n\u001b[?2004l\r"]
[170.026978, "o", "\u001b[?2004h> "]
[170.026998, "o", "    fi\r\n\u001b[?2004l\r"]
[170.027019, "o", "\u001b[?2004h> "]
[170.02704, "o", "    \r\n\u001b[?2004l\r\u001b[?2004h"]
[170.02706, "o", "> "]
[170.027164, "o", "    echo \"Processing: \\$hostname\" > /dev/stderr\r\n\u001b[?2004l\r"]
[170.027186, "o", "\u001b[?2004h> "]
[170.027203, "o", "    \r\n\u001b[?2004l\r"]
[170.027222, "o", "\u001b[?2004h> "]
[170.027282, "o", "    # 1. Check mock_hosts\r\n\u001b[?2004l\r"]
[170.027303, "o", "\u001b[?2004h> "]
[170.027426, "o", "    hosts_file_ip=$(get_mock_hosts_ip \"\\$hostname\")\r\n\u001b[?2004l\r"]
[170.02744, "o", "\u001b[?2004h"]
[170.027461, "o", "> "]
[170.027548, "o", "    if [ \"\\$hosts_file_ip\" == \"-\" ]; then\r\n\u001b[?2004l\r"]
[170.027569, "o", "\u001b[?2004h> "]
[170.02763, "o", "      hosts_file_ip=\"-\"\r\n\u001b[?2004l\r"]
[170.02765, "o", "\u001b[?2004h> "]
[170.02767, "o", "    fi\r\n\u001b[?2004l\r"]
[170.027702, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[170.027723, "o", "\u001b[?2004h> "]
[170.027776, "o", "    # 2. Resolve from DNS\r\n\u001b[?2004l\r"]
[170.027794, "o", "\u001b[?2004h> "]
[170.027836, "o", "    dns_ipv4=\"-\"\r\n\u001b[?2004l\r"]
[170.027852, "o", "\u001b[?2004h"]
[170.027872, "o", "> "]
[170.027903, "o", "    dns_ipv6=\"-\"\r\n\u001b[?2004l\r"]
[170.027918, "o", "\u001b[?2004h"]
[170.027936, "o", "> "]
[170.028008, "o", "    dns_summary=\"NO_RECORD_IN_DNS\"\r\n\u001b[?2004l\r"]
[170.028023, "o", "\u001b[?2004h> "]
[170.028041, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[170.02806, "o", "> "]
[170.028211, "o", "    # Parse DNS files once (conceptually, should happen before loop)\r\n\u001b[?2004l\r"]
[170.028227, "o", "\u001b[?2004h"]
[170.028247, "o", "> "]
[170.028435, "o", "    # For simplicity, parse in each iteration for this mock-up, but ideally outside\r\n\u001b[?2004l\r"]
[170.028456, "o", "\u001b[?2004h> "]
[170.028597, "o", "    parse_json_to_map \"\\$INTERNAL_DNS_FILE\" internal_dns_map\r\n\u001b[?2004l\r"]
[170.028617, "o", "\u001b[?2004h> "]
[170.028769, "o", "    parse_json_to_map \"\\$EXTERNAL_DNS_FILE\" external_dns_map\r\n\u001b[?2004l\r"]
[170.02879, "o", "\u001b[?2004h"]
[170.028811, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[170.029021, "o", "    read -r resolved_ipv4 resolved_ipv6 temp_summary < <(resolve_host_dns \"\\$hostname\")\r\n\u001b[?2004l\r"]
[170.029043, "o", "\u001b[?2004h"]
[170.029064, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[170.029215, "o", "    if [ \"\\$temp_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ] || \\\r\n\u001b[?2004l\r"]
[170.02923, "o", "\u001b[?2004h> "]
[170.02937, "o", "       [ \"\\$temp_summary\" == \"FINAL_TARGET_AAAA\" ]; then\r\n\u001b[?2004l\r"]
[170.029391, "o", "\u001b[?2004h> "]
[170.029473, "o", "      dns_summary=\"\\$temp_summary\"\r\n\u001b[?2004l\r"]
[170.029489, "o", "\u001b[?2004h> "]
[170.029674, "o", "      if [ -n \"\\$resolved_ipv4\" ] && [ \"\\$resolved_ipv4\" != \"-\" ]; then\r\n\u001b[?2004l\r"]
[170.029697, "o", "\u001b[?2004h> "]
[170.029775, "o", "        dns_ipv4=\"\\$resolved_ipv4\"\r\n\u001b[?2004l\r"]
[170.02979, "o", "\u001b[?2004h> "]
[170.029816, "o", "      fi\r\n\u001b[?2004l\r"]
[170.029835, "o", "\u001b[?2004h> "]
[170.030011, "o", "      if [ -n \"\\$resolved_ipv6\" ] && [ \"\\$resolved_ipv6\" != \"-\" ]; then\r\n\u001b[?2004l\r"]
[170.030033, "o", "\u001b[?2004h> "]
[170.030111, "o", "        dns_ipv6=\"\\$resolved_ipv6\"\r\n\u001b[?2004l\r"]
[170.030131, "o", "\u001b[?2004h> "]
[170.03015, "o", "      fi\r\n\u001b[?2004l\r"]
[170.030169, "o", "\u001b[?2004h> "]
[170.030314, "o", "    elif [ \"\\$temp_summary\" == \"NO_RECORD_IN_DNS\" ]; then\r\n\u001b[?2004l\r"]
[170.030335, "o", "\u001b[?2004h> "]
[170.030494, "o", "      # This implies resolved_ipv4 and resolved_ipv6 are already \"-\"\r\n\u001b[?2004l\r"]
[170.030512, "o", "\u001b[?2004h> "]
[170.030602, "o", "      dns_summary=\"NO_RECORD_IN_DNS\"\r\n\u001b[?2004l\r"]
[170.030621, "o", "\u001b[?2004h> "]
[170.030645, "o", "    fi\r\n\u001b[?2004l\r"]
[170.03066, "o", "\u001b[?2004h> "]
[170.030674, "o", "\r\n\u001b[?2004l\r"]
[170.030691, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[170.030715, "o", "\u001b[?2004h> "]
[170.03079, "o", "    # 3. Determine SUMMARY status\r\n\u001b[?2004l\r"]
[170.030809, "o", "\u001b[?2004h> "]
[170.030863, "o", "    summary_status=\"\"\r\n\u001b[?2004l\r"]
[170.030881, "o", "\u001b[?2004h> "]
[170.030983, "o", "    if [ \"\\$hosts_file_ip\" != \"-\" ]; then\r\n\u001b[?2004l\r"]
[170.030998, "o", "\u001b[?2004h> "]
[170.031137, "o", "      if [ \"\\$dns_summary\" == \"NO_RECORD_IN_DNS\" ]; then\r\n\u001b[?2004l\r"]
[170.031155, "o", "\u001b[?2004h> "]
[170.031295, "o", "        summary_status=\"OK - hosts entry present, no DNS\"\r\n\u001b[?2004l\r"]
[170.031312, "o", "\u001b[?2004h> "]
[170.031583, "o", "      elif [ \"\\$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ] || [ \"\\$dns_summary\" == \"FINAL_TARGET_AAAA\" ]; then\r\n\u001b[?2004l\r"]
[170.031598, "o", "\u001b[?2004h"]
[170.031613, "o", "> "]
[170.031813, "o", "        # If DNS has a record (even if CNAME chain ends or final target), compare IPs\r\n\u001b[?2004l\r"]
[170.031832, "o", "\u001b[?2004h> "]
[170.031962, "o", "        if [ \"\\$hosts_file_ip\" == \"\\$dns_ipv4\" ]; then\r\n\u001b[?2004l\r"]
[170.031976, "o", "\u001b[?2004h> "]
[170.032242, "o", "          # This case is tricky. If hosts file has IP, and DNS resolves to same IP via CNAME, it's consistent.\r\n\u001b[?2004l\r"]
[170.03226, "o", "\u001b[?2004h> "]
[170.032547, "o", "          # If hosts file has IP, but DNS is a CNAME loop, it's not 'no DNS' but also not 'consistent' in typical sense.\r\n\u001b[?2004l\r"]
[170.032566, "o", "\u001b[?2004h"]
[170.032582, "o", "> "]
[170.032777, "o", "          # The prompt asks for consistency of IPv4. If DNS provides an IPv4, compare.\r\n\u001b[?2004l\r"]
[170.032797, "o", "\u001b[?2004h"]
[170.032812, "o", "> "]
[170.033003, "o", "          # If DNS is a CNAME loop, it's not a direct IP, so hosts entry is standalone.\r\n\u001b[?2004l\r"]
[170.033019, "o", "\u001b[?2004h> "]
[170.03319, "o", "          if [ \"\\$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]; then\r\n\u001b[?2004l\r"]
[170.033206, "o", "\u001b[?2004h> "]
[170.033411, "o", "             summary_status=\"OK - hosts entry present, no DNS (due to CNAME issue)\" \r\n\u001b[?2004l\r"]
[170.033434, "o", "\u001b[?2004h> "]
[170.033803, "o", "          elif [ \"\\$dns_summary\" == \"FINAL_TARGET_AAAA\" ] && [ \"\\$dns_ipv4\" != \"-\" ] && [ \"\\$hosts_file_ip\" == \"\\$dns_ipv4\" ]; then\r\n\u001b[?2004l\r"]
[170.033825, "o", "\u001b[?2004h> "]
[170.033929, "o", "            summary_status=\"OK - consistent\"\r\n\u001b[?2004l\r"]
[170.033945, "o", "\u001b[?2004h"]
[170.033962, "o", "> "]
[170.034165, "o", "          elif [ \"\\$dns_summary\" == \"FINAL_TARGET_AAAA\" ] && [ \"\\$dns_ipv4\" == \"-\" ]; then\r\n\u001b[?2004l\r"]
[170.034186, "o", "\u001b[?2004h"]
[170.034207, "o", "> "]
[170.034313, "o", "            # DNS record is only AAAA, hosts has IPv4\r\n\u001b[?2004l\r"]
[170.034328, "o", "\u001b[?2004h"]
[170.034346, "o", "> "]
[170.034509, "o", "            summary_status=\"WARN - inconsistent (hosts A, DNS only AAAA)\"\r\n\u001b[?2004l\r"]
[170.034523, "o", "\u001b[?2004h> "]
[170.034708, "o", "          else # DNS has an IP, but it's different or summary is complex\r\n\u001b[?2004l\r"]
[170.034724, "o", "\u001b[?2004h> "]
[170.034842, "o", "            summary_status=\"WARN - inconsistent\"\r\n\u001b[?2004l\r"]
[170.034856, "o", "\u001b[?2004h"]
[170.034875, "o", "> "]
[170.034895, "o", "          fi\r\n\u001b[?2004l\r"]
[170.034913, "o", "\u001b[?2004h> "]
[170.034947, "o", "        else\r\n\u001b[?2004l\r"]
[170.034961, "o", "\u001b[?2004h"]
[170.034979, "o", "> "]
[170.035078, "o", "          summary_status=\"WARN - inconsistent\"\r\n\u001b[?2004l\r"]
[170.035092, "o", "\u001b[?2004h"]
[170.035109, "o", "> "]
[170.035128, "o", "        fi\r\n\u001b[?2004l\r"]
[170.035147, "o", "\u001b[?2004h> "]
[170.035258, "o", "      else # DNS has a record and it's A/AAAA\r\n\u001b[?2004l\r"]
[170.035296, "o", "\u001b[?2004h> "]
[170.035414, "o", "        if [ \"\\$hosts_file_ip\" == \"\\$dns_ipv4\" ]; then\r\n\u001b[?2004l\r"]
[170.035431, "o", "\u001b[?2004h"]
[170.03545, "o", "> "]
[170.035542, "o", "          summary_status=\"OK - consistent\"\r\n\u001b[?2004l\r"]
[170.035562, "o", "\u001b[?2004h> "]
[170.035593, "o", "        else\r\n\u001b[?2004l\r"]
[170.035616, "o", "\u001b[?2004h> "]
[170.035731, "o", "          summary_status=\"WARN - inconsistent\"\r\n\u001b[?2004l\r"]
[170.035753, "o", "\u001b[?2004h> "]
[170.035777, "o", "        fi\r\n\u001b[?2004l\r"]
[170.035798, "o", "\u001b[?2004h> "]
[170.035821, "o", "      fi\r\n\u001b[?2004l\r"]
[170.035841, "o", "\u001b[?2004h> "]
[170.035922, "o", "    else # No entry in hosts file\r\n\u001b[?2004l\r"]
[170.035938, "o", "\u001b[?2004h> "]
[170.036077, "o", "      if [ \"\\$dns_summary\" == \"NO_RECORD_IN_DNS\" ]; then\r\n\u001b[?2004l\r"]
[170.036092, "o", "\u001b[?2004h"]
[170.03611, "o", "> "]
[170.036196, "o", "        summary_status=\"NO_RECORD_FOUND\"\r\n\u001b[?2004l\r"]
[170.036216, "o", "\u001b[?2004h> "]
[170.036378, "o", "      elif [ \"\\$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]; then\r\n\u001b[?2004l\r"]
[170.0364, "o", "\u001b[?2004h> "]
[170.036521, "o", "        summary_status=\"CNAME_CHAIN_LIMIT_OR_LOOP\"\r\n\u001b[?2004l\r"]
[170.036543, "o", "\u001b[?2004h> "]
[170.036699, "o", "      elif [ -n \"\\$dns_ipv4\" ] && [ \"\\$dns_ipv4\" != \"-\" ]; then\r\n\u001b[?2004l\r"]
[170.036722, "o", "\u001b[?2004h> "]
[170.036834, "o", "        summary_status=\"UPDATED hosts with DNS A\"\r\n\u001b[?2004l\r"]
[170.036855, "o", "\u001b[?2004h> "]
[170.03701, "o", "        echo \"\\$dns_ipv4\\t\\$hostname\" >> \"$MOCK_HOSTS_FILE.temp\"\r\n\u001b[?2004l\r"]
[170.037034, "o", "\u001b[?2004h> "]
[170.037054, "o", "      else\r\n\u001b[?2004l\r"]
[170.037076, "o", "\u001b[?2004h> "]
[170.03727, "o", "        summary_status=\"NO_RECORD_FOUND\" # Or some other status if only AAAA found\r\n\u001b[?2004l\r"]
[170.037298, "o", "\u001b[?2004h> "]
[170.037318, "o", "      fi\r\n\u001b[?2004l\r"]
[170.037325, "o", "\u001b[?2004h> "]
[170.03735, "o", "    fi\r\n\u001b[?2004l\r"]
[170.037364, "o", "\u001b[?2004h"]
[170.03737, "o", "> "]
[170.037379, "o", "\r\n\u001b[?2004l\r"]
[170.037416, "o", "\u001b[?2004h> "]
[170.037518, "o", "    # Append to report (will be sorted later)\r\n\u001b[?2004l\r"]
[170.037536, "o", "\u001b[?2004h> "]
[170.037786, "o", "    echo -e \"\\$hostname\\t\\$hosts_file_ip\\t\\$dns_ipv4\\t\\$dns_ipv6\\t\\$summary_status\" >> \"$REPORT_FILE\"\r\n\u001b[?2004l\r"]
[170.0378, "o", "\u001b[?2004h"]
[170.037816, "o", "> "]
[170.037863, "o", "  done < \"$TICKET_FILE\"\r\n\u001b[?2004l\r"]
[170.037876, "o", "\u001b[?2004h"]
[170.037892, "o", "> \r\n\u001b[?2004l\r"]
[170.037905, "o", "\u001b[?2004h> "]
[170.037973, "o", "  # Sort the report file\r\n\u001b[?2004l\r"]
[170.037992, "o", "\u001b[?2004h"]
[170.038009, "o", "> "]
[170.038089, "o", "  sort \"$REPORT_FILE\" -o \"$REPORT_FILE\"\r\n\u001b[?2004l\r"]
[170.038107, "o", "\u001b[?2004h> "]
[170.038121, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[170.038134, "o", "> "]
[170.038312, "o", "  echo \"DNS triage complete. Report generated: $REPORT_FILE\" > /dev/stderr\r\n\u001b[?2004l\r"]
[170.038331, "o", "\u001b[?2004h> "]
[170.038655, "o", "  echo \"Mock hosts updated temporarily in $MOCK_HOSTS_FILE.temp. Manually review and copy if changes are correct.\" > /dev/stderr\r\n\u001b[?2004l\r"]
[170.038681, "o", "\u001b[?2004h> EOF\r\n\u001b[?2004l\r"]
[170.039322, "o", "-bash: get_mock_hosts_ip: command not found\r\n"]
[170.040121, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[170.538433, "i", "jq --version\n"]
[170.538535, "o", "jq --version\r\n\u001b[?2004l\r"]
[170.539906, "o", "jq-1.6\r\n"]
[170.540253, "o", "\u001b[?2004h"]
[170.540272, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[170.724363, "i", "bash resolve_dns.sh\n"]
[170.724461, "o", "bash resolve_dns.sh\r\n\u001b[?2004l\r"]
[170.725653, "o", "-\r\nresolve_dns.sh: line 7: syntax error near unexpected token `}'\r\nresolve_dns.sh: line 7: `  }'\r\n"]
[170.725828, "o", "\u001b[?2004h"]
[170.725849, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[179.912417, "i", "head -20 resolve_dns.sh\n"]
[179.912531, "o", "head -20 resolve_dns.sh\r\n"]
[179.912559, "o", "\u001b[?2004l\r"]
[179.913353, "o", "\r\n    # Ensure we capture the host part correctly, if IP part is complex\r\n    if [ -z \"$ip_result\" ]; then\r\n      ip_result=\"-\"\r\n    fi\r\n    echo \"$ip_result\"\r\n  }\r\n\r\n"]
[179.913401, "o", "  # Main loop for processing hostnames\r\n  while IFS= read -r hostname; do\r\n    if [ -z \"$hostname\" ]; then\r\n      continue\r\n    fi\r\n"]
[179.913432, "o", "    \r\n    echo \"Processing: $hostname\" > /dev/stderr\r\n    \r\n    # 1. Check mock_hosts\r\n    hosts_file_ip=\r\n    if [ \"$hosts_file_ip\" == \"-\" ]; then\r\n      hosts_file_ip=\"-\"\r\n"]
[179.913566, "o", "\u001b[?2004h"]
[179.913576, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[180.06422, "i", "bash resolve_dns.sh\n"]
[180.064317, "o", "bash resolve_dns.sh\r\n\u001b[?2004l\r"]
[180.065393, "o", "-\r\nresolve_dns.sh: line 7: syntax error near unexpected token `}'\r\nresolve_dns.sh: line 7: `  }'\r\n"]
[180.065579, "o", "\u001b[?2004h"]
[180.0656, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[220.059216, "i", "cat incidents/dns_resolution_report.log 2>/dev/null || echo -n \"\" > incidents/dns_resolution_report.log\n"]
[220.059533, "o", "cat incidents/dns_resolution_report.log 2>/dev/null || echo -n \"\" > incidents/dns_resolution_report.log\r\n\u001b[?2004l\r"]
[220.060572, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[220.167827, "i", "cat resources/mock_hosts.temp 2>/dev/null || echo -n \"\" > resources/mock_hosts.temp\n"]
[220.168111, "o", "cat resources/mock_hosts.temp 2>/dev/null || echo -n \"\" > resources/mock_hosts.temp\r\n\u001b[?2004l\r"]
[220.169303, "o", "\u001b[?2004h"]
[220.169352, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[220.365145, "i", "declare -A dns_internal_map; declare -A dns_external_map; \n# Populate internal DNS map\njq -r 'to_entries[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")]| join(\\t)' resources/dns/internal_dns.json | while IFS=\\t read -r host a aaaa cname; do \n  if [[ -n \"$cname\" && -z \"$a\" && -z \"$aaaa\" ]]; then \n    dns_internal_map[\"$host\"]=\"CNAME:$cname\"; \n  elif [[ -n \"$a\" ]]; then \n    dns_internal_map[\"$host\"]=\"A:$a:$aaaa\"; \n  elif [[ -n \"$aaaa\" ]]; then \n    dns_internal_map[\"$host\"]=\"AAAA::$aaaa\"; \n  fi; \ndone\n\n# Populate external DNS map\njq -r 'to_entries[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")]| join(\\t)' resources/dns/external_dns.json | while IFS=\\t read -r host a aaaa cname; do \n  if [[ -n \"$cname\" && -z \"$a\" && -z \"$aaaa\" ]]; then \n    dns_external_map[\"$host\"]=\"CNAME:$cname\"; \n  elif [[ -n \"$a\" ]]; then \n    dns_external_map[\"$host\"]=\"A:$a:$aaaa\"; \n  elif [[ -n \"$aaaa\" ]]; then \n    dns_external_map[\"$host\"]=\"AAAA::$aaaa\"; \n  fi; \ndone\n"]
[220.365332, "o", "declare -A dns_internal_map; declare -A dns_external_map; \r\n"]
[220.365377, "o", "\u001b[?2004l\r"]
[220.36542, "o", "\u001b[?2004h"]
[220.36546, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[220.365505, "o", "# Populate internal DNS map\r\n\u001b[?2004l\r"]
[220.365522, "o", "\u001b[?2004h"]
[220.365538, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[220.36602, "o", "jq -r 'to_entries[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")]| join(\\t)' resourc\rces/dns/internal_dns.json | while IFS=\\t read -r host a aaaa cname; do \r\n\u001b[?2004l\r"]
[220.36606, "o", "\u001b[?2004h> "]
[220.36618, "o", "  if [[ -n \"$cname\" && -z \"$a\" && -z \"$aaaa\" ]]; then \r\n\u001b[?2004l\r"]
[220.366209, "o", "\u001b[?2004h> "]
[220.366318, "o", "    dns_internal_map[\"$host\"]=\"CNAME:$cname\"; \r\n\u001b[?2004l\r"]
[220.366342, "o", "\u001b[?2004h> "]
[220.366408, "o", "  elif [[ -n \"$a\" ]]; then \r\n\u001b[?2004l\r"]
[220.366426, "o", "\u001b[?2004h"]
[220.366443, "o", "> "]
[220.366538, "o", "    dns_internal_map[\"$host\"]=\"A:$a:$aaaa\"; \r\n\u001b[?2004l\r"]
[220.366555, "o", "\u001b[?2004h"]
[220.366571, "o", "> "]
[220.366641, "o", "  elif [[ -n \"$aaaa\" ]]; then \r\n\u001b[?2004l\r"]
[220.36666, "o", "\u001b[?2004h"]
[220.366681, "o", "> "]
[220.366774, "o", "    dns_internal_map[\"$host\"]=\"AAAA::$aaaa\"; \r\n\u001b[?2004l\r"]
[220.366792, "o", "\u001b[?2004h"]
[220.366809, "o", "> "]
[220.366826, "o", "  fi; \r\n\u001b[?2004l\r"]
[220.366845, "o", "\u001b[?2004h> "]
[220.366861, "o", "done\r\n\u001b[?2004l\r"]
[220.368004, "o", "jq: error: syntax error, unexpected INVALID_CHARACTER (Unix shell quoting issues?) at <top-level>, line 1:\r\nto_entries[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")]| join(\\t)                                                                                                 \r\njq: 1 compile error\r\n"]
[220.368263, "o", "\u001b[?2004h"]
[220.368281, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ \r\n\u001b[?2004l\r"]
[220.368297, "o", "\u001b[?2004h"]
[220.368313, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[220.36837, "o", "# Populate external DNS map\r\n\u001b[?2004l\r"]
[220.368389, "o", "\u001b[?2004h"]
[220.368407, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[220.368845, "o", "jq -r 'to_entries[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")]| join(\\t)' resourc\rces/dns/external_dns.json | while IFS=\\t read -r host a aaaa cname; do \r\n\u001b[?2004l\r"]
[220.368866, "o", "\u001b[?2004h"]
[220.368883, "o", "> "]
[220.369003, "o", "  if [[ -n \"$cname\" && -z \"$a\" && -z \"$aaaa\" ]]; then \r\n\u001b[?2004l\r"]
[220.369021, "o", "\u001b[?2004h"]
[220.369043, "o", "> "]
[220.369139, "o", "    dns_external_map[\"$host\"]=\"CNAME:$cname\"; \r\n\u001b[?2004l\r"]
[220.369156, "o", "\u001b[?2004h"]
[220.369173, "o", "> "]
[220.369229, "o", "  elif [[ -n \"$a\" ]]; then \r\n\u001b[?2004l\r"]
[220.369247, "o", "\u001b[?2004h"]
[220.369263, "o", "> "]
[220.369364, "o", "    dns_external_map[\"$host\"]=\"A:$a:$aaaa\"; \r\n\u001b[?2004l\r"]
[220.369379, "o", "\u001b[?2004h> "]
[220.369462, "o", "  elif [[ -n \"$aaaa\" ]]; then \r\n\u001b[?2004l\r"]
[220.369478, "o", "\u001b[?2004h"]
[220.369494, "o", "> "]
[220.369601, "o", "    dns_external_map[\"$host\"]=\"AAAA::$aaaa\"; \r\n\u001b[?2004l\r"]
[220.369636, "o", "\u001b[?2004h> "]
[220.369654, "o", "  fi; \r\n\u001b[?2004l\r"]
[220.36967, "o", "\u001b[?2004h"]
[220.369686, "o", "> done\r\n"]
[220.369703, "o", "\u001b[?2004l\r"]
[220.370948, "o", "jq: error: syntax error, unexpected INVALID_CHARACTER (Unix shell quoting issues?) at <top-level>, line 1:\r\nto_entries[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")]| join(\\t)                                                                                                 \r\njq: 1 compile error\r\n"]
[220.371204, "o", "\u001b[?2004h"]
[220.371214, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[221.38102, "i", "while IFS= read -r host; do\n  printf \"Processing: %s\\\\n\" \"$host\" > /dev/stderr;\n  \n  # 1. Check mock_hosts\n  hosts_ip=$(grep -i \"^[^\\\\t]*\\\\t\\\\\"$host\"\" resources/mock_hosts | awk '{print $1}' | head -1);\n  if [ -z \"$hosts_ip\" ]; then hosts_ip=\"-\"; fi\n\n  # 2. Resolve from DNS\n  final_a=\"-\"; final_aaaa=\"-\"; dns_summary=\"NO_RECORD_IN_DNS\"; \n  current_target=\"$host\"; depth=0; \n  \n  while [[ $depth -lt 3 && -n \"$current_target\" ]]; do\n    if [[ -n \"${dns_internal_map[$current_target]+isset}\" ]]; then\n      IFS=\":\" read -r type val1 val2 <<< \"${dns_internal_map[$current_target]}\";\n      if [[ \"$type\" == \"A\" ]]; then final_a=\"$val1\"; final_aaaa=\"$val2\"; dns_summary=\"INTERNAL_A\"; break; fi\n      if [[ \"$type\" == \"CNAME\" ]]; then current_target=\"$val1\"; ((depth++)); continue; fi\n    fi\n    \n    if [[ -n \"${dns_external_map[$current_target]+isset}\" ]]; then\n      IFS=\":\" read -r type val1 val2 <<< \"${dns_external_map[$current_target]}\";\n      if [[ \"$type\" == \"A\" ]]; then final_a=\"$val1\"; final_aaaa=\"$val2\"; dns_summary"]
[221.381122, "i", "=\"EXTERNAL_A\"; break; fi\n      if [[ \"$type\" == \"CNAME\" ]]; then current_target=\"$val1\"; ((depth++)); continue; fi\n    fi\n    \n    if [[ $depth -ge 3 ]]; then dns_summary=\"CNAME_CHAIN_LIMIT_OR_LOOP\"; break; fi\n    break; # No record found in this iteration of internal/external\n  done\n\n  # Determine summary status\n  summary=\"NO_RECORD_FOUND\";\n  if [ \"$hosts_ip\" != \"-\" ]; then\n    if [[ \"$dns_summary\" == \"NO_RECORD_IN_DNS\" || \"$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]]; then\n      summary=\"OK - hosts entry present, no DNS\";\n    elif [ \"$hosts_ip\" == \"$final_a\" ]; then\n      summary=\"OK - consistent\";\n    else\n      summary=\"WARN - inconsistent\";\n    fi\n  else\n    if [[ \"$dns_summary\" == \"NO_RECORD_IN_DNS\" || \"$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]]; then\n      summary=\"$dns_summary\";\n    elif [ -n \"$final_a\" ] && [ \"$final_a\" != \"-\" ]; then\n      summary=\"UPDATED hosts with DNS A\";\n      echo \"$final_a\\t$host\" >> resources/mock_hosts.temp;\n    else\n      summary=\"NO_RECORD_FOUND\";\n    fi\n  fi\n  \n  "]
[221.381174, "o", "while IFS= read -r host; do\r\n\u001b[?2004l\r"]
[221.381197, "i", "echo -e \"$host\\\\t$hosts_ip\\\\t$final_a\\\\t$final_aaaa\\\\t$summary\" >> incidents/dns_resolution_report.log;\ndone < incidents/tickets/dns_incident_2024.txt\n"]
[221.381207, "o", "\u001b[?2004h> "]
[221.38132, "o", "  printf \"Processing: %s\\\\n\" \"$host\" > /dev/stderr;\r\n\u001b[?2004l\r"]
[221.381347, "o", "\u001b[?2004h>   \r\n\u001b[?2004l\r"]
[221.381367, "o", "\u001b[?2004h> "]
[221.381425, "o", "  # 1. Check mock_hosts\r\n\u001b[?2004l\r"]
[221.381441, "o", "\u001b[?2004h> "]
[221.38169, "o", "  hosts_ip=$(grep -i \"^[^\\\\t]*\\\\t\\\\\"$host\"\" resources/mock_hosts | awk '{print $1}' | head -1);\r\n\u001b[?2004l\r"]
[221.381726, "o", "\u001b[?2004h> "]
[221.381829, "o", "  if [ -z \"$hosts_ip\" ]; then hosts_ip=\"-\"; fi\r\n\u001b[?2004l\r"]
[221.381854, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[221.381878, "o", "\u001b[?2004h> "]
[221.381935, "o", "  # 2. Resolve from DNS\r\n\u001b[?2004l\r"]
[221.381955, "o", "\u001b[?2004h> "]
[221.382106, "o", "  final_a=\"-\"; final_aaaa=\"-\"; dns_summary=\"NO_RECORD_IN_DNS\"; \r\n\u001b[?2004l\r"]
[221.382126, "o", "\u001b[?2004h> "]
[221.382216, "o", "  current_target=\"$host\"; depth=0; \r\n\u001b[?2004l\r"]
[221.382233, "o", "\u001b[?2004h"]
[221.382252, "o", ">   \r\n\u001b[?2004l\r"]
[221.382259, "o", "\u001b[?2004h"]
[221.382285, "o", "> "]
[221.382398, "o", "  while [[ $depth -lt 3 && -n \"$current_target\" ]]; do\r\n\u001b[?2004l\r"]
[221.382416, "o", "\u001b[?2004h"]
[221.382433, "o", "> "]
[221.38258, "o", "    if [[ -n \"${dns_internal_map[$current_target]+isset}\" ]]; then\r\n\u001b[?2004l\r"]
[221.382596, "o", "\u001b[?2004h"]
[221.382614, "o", "> "]
[221.382801, "o", "      IFS=\":\" read -r type val1 val2 <<< \"${dns_internal_map[$current_target]}\";\r\n\u001b[?2004l\r"]
[221.382818, "o", "\u001b[?2004h"]
[221.382835, "o", "> "]
[221.383079, "o", "      if [[ \"$type\" == \"A\" ]]; then final_a=\"$val1\"; final_aaaa=\"$val2\"; dns_summary=\"INTERNAL_A\"; break; fi\r\n\u001b[?2004l\r"]
[221.383118, "o", "\u001b[?2004h> "]
[221.383317, "o", "      if [[ \"$type\" == \"CNAME\" ]]; then current_target=\"$val1\"; ((depth++)); continue; fi\r\n\u001b[?2004l\r"]
[221.383336, "o", "\u001b[?2004h"]
[221.383354, "o", "> "]
[221.383373, "o", "    fi\r\n\u001b[?2004l\r"]
[221.383389, "o", "\u001b[?2004h> "]
[221.383405, "o", "    \r\n\u001b[?2004l\r\u001b[?2004h"]
[221.38342, "o", "> "]
[221.383574, "o", "    if [[ -n \"${dns_external_map[$current_target]+isset}\" ]]; then\r\n\u001b[?2004l\r"]
[221.383592, "o", "\u001b[?2004h> "]
[221.383793, "o", "      IFS=\":\" read -r type val1 val2 <<< \"${dns_external_map[$current_target]}\";\r\n\u001b[?2004l\r"]
[221.383809, "o", "\u001b[?2004h"]
[221.383825, "o", "> "]
[221.384071, "o", "      if [[ \"$type\" == \"A\" ]]; then final_a=\"$val1\"; final_aaaa=\"$val2\"; dns_summary=\"EXTERNAL_A\"; break; fi\r\n\u001b[?2004l\r"]
[221.384092, "o", "\u001b[?2004h"]
[221.384108, "o", "> "]
[221.384312, "o", "      if [[ \"$type\" == \"CNAME\" ]]; then current_target=\"$val1\"; ((depth++)); continue; fi\r\n\u001b[?2004l\r"]
[221.384333, "o", "\u001b[?2004h> "]
[221.384354, "o", "    fi\r\n\u001b[?2004l\r"]
[221.384368, "o", "\u001b[?2004h"]
[221.384382, "o", "> "]
[221.384401, "o", "    \r\n\u001b[?2004l\r"]
[221.384417, "o", "\u001b[?2004h> "]
[221.384605, "o", "    if [[ $depth -ge 3 ]]; then dns_summary=\"CNAME_CHAIN_LIMIT_OR_LOOP\"; break; fi\r\n\u001b[?2004l\r"]
[221.384621, "o", "\u001b[?2004h"]
[221.384643, "o", "> "]
[221.384797, "o", "    break; # No record found in this iteration of internal/external\r\n\u001b[?2004l\r"]
[221.384811, "o", "\u001b[?2004h"]
[221.384826, "o", "> "]
[221.38484, "o", "  done\r\n\u001b[?2004l\r"]
[221.384856, "o", "\u001b[?2004h> "]
[221.384872, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[221.384885, "o", "> "]
[221.384952, "o", "  # Determine summary status\r\n\u001b[?2004l\r"]
[221.384967, "o", "\u001b[?2004h"]
[221.384981, "o", "> "]
[221.385042, "o", "  summary=\"NO_RECORD_FOUND\";\r\n\u001b[?2004l\r"]
[221.385055, "o", "\u001b[?2004h"]
[221.385076, "o", "> "]
[221.385144, "o", "  if [ \"$hosts_ip\" != \"-\" ]; then\r\n\u001b[?2004l\r"]
[221.385161, "o", "\u001b[?2004h"]
[221.385175, "o", "> "]
[221.385415, "o", "    if [[ \"$dns_summary\" == \"NO_RECORD_IN_DNS\" || \"$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]]; then\r\n\u001b[?2004l\r"]
[221.38543, "o", "\u001b[?2004h"]
[221.385445, "o", "> "]
[221.385555, "o", "      summary=\"OK - hosts entry present, no DNS\";\r\n\u001b[?2004l\r"]
[221.385573, "o", "\u001b[?2004h> "]
[221.385691, "o", "    elif [ \"$hosts_ip\" == \"$final_a\" ]; then\r\n\u001b[?2004l\r"]
[221.3857, "o", "\u001b[?2004h"]
[221.385707, "o", "> "]
[221.385788, "o", "      summary=\"OK - consistent\";\r\n\u001b[?2004l\r"]
[221.385813, "o", "\u001b[?2004h> "]
[221.385832, "o", "    else\r\n\u001b[?2004l\r"]
[221.385851, "o", "\u001b[?2004h"]
[221.385866, "o", "> "]
[221.385941, "o", "      summary=\"WARN - inconsistent\";\r\n\u001b[?2004l\r"]
[221.38596, "o", "\u001b[?2004h"]
[221.385975, "o", ">     fi\r\n"]
[221.38599, "o", "\u001b[?2004l\r\u001b[?2004h"]
[221.386006, "o", "> "]
[221.386025, "o", "  else\r\n\u001b[?2004l\r"]
[221.386041, "o", "\u001b[?2004h> "]
[221.386284, "o", "    if [[ \"$dns_summary\" == \"NO_RECORD_IN_DNS\" || \"$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]]; then\r\n\u001b[?2004l\r"]
[221.386303, "o", "\u001b[?2004h> "]
[221.386378, "o", "      summary=\"$dns_summary\";\r\n\u001b[?2004l\r"]
[221.386397, "o", "\u001b[?2004h> "]
[221.386535, "o", "    elif [ -n \"$final_a\" ] && [ \"$final_a\" != \"-\" ]; then\r\n\u001b[?2004l\r"]
[221.386558, "o", "\u001b[?2004h> "]
[221.386666, "o", "      summary=\"UPDATED hosts with DNS A\";\r\n\u001b[?2004l\r"]
[221.386687, "o", "\u001b[?2004h> "]
[221.386825, "o", "      echo \"$final_a\\t$host\" >> resources/mock_hosts.temp;\r\n\u001b[?2004l\r"]
[221.386842, "o", "\u001b[?2004h"]
[221.386861, "o", "> "]
[221.38688, "o", "    else\r\n\u001b[?2004l\r"]
[221.386899, "o", "\u001b[?2004h> "]
[221.386972, "o", "      summary=\"NO_RECORD_FOUND\";\r\n\u001b[?2004l\r"]
[221.386988, "o", "\u001b[?2004h> "]
[221.38701, "o", "    fi\r\n\u001b[?2004l\r"]
[221.387025, "o", "\u001b[?2004h"]
[221.387042, "o", ">   fi\r\n\u001b[?2004l\r"]
[221.387058, "o", "\u001b[?2004h"]
[221.387075, "o", "> "]
[221.387093, "o", "  \r\n\u001b[?2004l\r"]
[221.38711, "o", "\u001b[?2004h> "]
[221.38735, "o", "  echo -e \"$host\\\\t$hosts_ip\\\\t$final_a\\\\t$final_aaaa\\\\t$summary\" >> incidents/dns_resolution_report.log;\r\n\u001b[?2004l\r"]
[221.387369, "o", "\u001b[?2004h"]
[221.387385, "o", "> "]
[221.387486, "o", "done < incidents/tickets/dns_incident_2024.txt\r\n\u001b[?2004l\r"]
[221.387558, "o", "-bash: /dev/stderr: Permission denied\r\n"]
[221.389475, "o", "-bash: /dev/stderr: Permission denied\r\n"]
[221.391813, "o", "-bash: /dev/stderr: Permission denied\r\n"]
[221.393931, "o", "-bash: /dev/stderr: Permission denied\r\n"]
[221.396249, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[223.459676, "i", "sort -o incidents/dns_resolution_report.log incidents/dns_resolution_report.log\n"]
[223.459918, "o", "sort -o incidents/dns_resolution_report.log incidents/dns_resolution_report.log\r\n\u001b[?2004l\r"]
[223.461062, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[223.702504, "i", "chmod 640 incidents/dns_resolution_report.log\n"]
[223.702726, "o", "chmod 640 incidents/dns_resolution_report.log\r\n\u001b[?2004l\r"]
[223.70373, "o", "\u001b[?2004h"]
[223.703758, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[223.907452, "i", "echo \"--- Report Content ---\"; head -10 incidents/dns_resolution_report.log\n"]
[223.907772, "o", "echo \"--- Report Content ---\"; head -10 incidents/dns_resolution_report.log\r\n\u001b[?2004l\r"]
[223.90782, "o", "--- Report Content ---"]
[223.908048, "o", "\r\n"]
[223.908487, "o", "api-gateway.external.com\t-\t-\t-\tNO_RECORD_IN_DNS\r\napp-internal.example.com\t-\t-\t-\tNO_RECORD_IN_DNS\r\nlegacy-system.internal.net\t-\t-\t-\tNO_RECORD_IN_DNS\r\n"]
[223.908514, "o", "service-public.example.org\t-\t-\t-\tNO_RECORD_IN_DNS\r\n"]
[223.908661, "o", "\u001b[?2004h"]
[223.908729, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[224.215933, "i", "echo \"--- Mock Hosts (temp) Content ---\"; cat resources/mock_hosts.temp\n"]
[224.216172, "o", "echo \"--- Mock Hosts (temp) Content ---\"; cat resources/mock_hosts.temp\r\n\u001b[?2004l\r"]
[224.216235, "o", "--- Mock Hosts (temp) Content ---\r\n"]
[224.217034, "o", "\u001b[?2004h"]
[224.217074, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[265.953853, "i", "declare -A dns_internal_map; declare -A dns_external_map; \n# Populate internal DNS map correctly\njq -r 'to_entries[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")] | join(\"\\t\")' resources/dns/internal_dns.json | while IFS=\\t read -r host a aaaa cname; do \n  if [[ -n \"$cname\" && -z \"$a\" && -z \"$aaaa\" ]]; then \n    dns_internal_map[\"$host\"]=\"CNAME:$cname\"; \n  elif [[ -n \"$a\" ]]; then \n    dns_internal_map[\"$host\"]=\"A:$a:$aaaa\"; \n  elif [[ -n \"$aaaa\" ]]; then \n    dns_internal_map[\"$host\"]=\"AAAA::$aaaa\"; \n  fi; \ndone 2>/dev/null || echo \"jq populating internal failed\" >/dev/stderr\n\n# Populate external DNS map correctly\njq -r 'to_entries[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")] | join(\"\\t\")' resources/dns/external_dns.json | while IFS=\\t read -r host a aaaa cname; do \n  if [[ -n \"$cname\" && -z \"$a\" && -z \"$aaaa\" ]]; then \n    dns_external_map[\"$host\"]=\"CNAME:$cname\"; \n  elif [[ -n \"$a\" ]]; then \n    dns_external_map[\"$host\"]=\"A:$a:$aaaa\"; \n  el"]
[265.953965, "i", "if [[ -n \"$aaaa\" ]]; then \n    dns_external_map[\"$host\"]=\"AAAA::$aaaa\"; \n  fi; \ndone 2>/dev/null || echo \"jq populating external failed\" >/dev/stderr\n\necho \"Internal map size: ${#dns_internal_map[@]}\" >/dev/stderr\n# Test print one entry: echo \"Internal: ${dns_internal_map[app-internal.example.com]}\" >/dev/stderr\n\necho \"External map size: ${#dns_external_map[@]}\" >/dev/stderr\n# Test print one entry: echo \"External: ${dns_external_map[service-public.example.org]}\" >/dev/stderr\n"]
[265.954083, "o", "declare -A dns_internal_map; declare -A dns_external_map; \r\n\u001b[?2004l\r"]
[265.954162, "o", "\u001b[?2004h"]
[265.954192, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[265.954283, "o", "# Populate internal DNS map correctly\r\n\u001b[?2004l\r"]
[265.954307, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[265.954766, "o", "jq -r 'to_entries[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")] | join(\"\\t\")' reso\rources/dns/internal_dns.json | while IFS=\\t read -r host a aaaa cname; do \r\n\u001b[?2004l\r"]
[265.954797, "o", "\u001b[?2004h> "]
[265.95494, "o", "  if [[ -n \"$cname\" && -z \"$a\" && -z \"$aaaa\" ]]; then \r\n\u001b[?2004l\r"]
[265.954967, "o", "\u001b[?2004h> "]
[265.955068, "o", "    dns_internal_map[\"$host\"]=\"CNAME:$cname\"; \r\n\u001b[?2004l\r"]
[265.955095, "o", "\u001b[?2004h> "]
[265.95516, "o", "  elif [[ -n \"$a\" ]]; then \r\n\u001b[?2004l\r"]
[265.955182, "o", "\u001b[?2004h> "]
[265.955291, "o", "    dns_internal_map[\"$host\"]=\"A:$a:$aaaa\"; \r\n\u001b[?2004l\r"]
[265.955315, "o", "\u001b[?2004h> "]
[265.95539, "o", "  elif [[ -n \"$aaaa\" ]]; then \r\n\u001b[?2004l\r"]
[265.955409, "o", "\u001b[?2004h> "]
[265.955522, "o", "    dns_internal_map[\"$host\"]=\"AAAA::$aaaa\"; \r\n\u001b[?2004l\r"]
[265.955536, "o", "\u001b[?2004h"]
[265.955556, "o", "> "]
[265.955573, "o", "  fi; \r\n\u001b[?2004l\r"]
[265.95559, "o", "\u001b[?2004h> "]
[265.955763, "o", "done 2>/dev/null || echo \"jq populating internal failed\" >/dev/stderr\r\n\u001b[?2004l\r"]
[265.968151, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[265.968203, "o", "\r\n\u001b[?2004l\r\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[265.968273, "o", "# Populate external DNS map correctly\r\n\u001b[?2004l\r"]
[265.968291, "o", "\u001b[?2004h"]
[265.968312, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[265.968752, "o", "jq -r 'to_entries[] | [\".key\", (.value.\"A\" // \"\"), (.value.\"AAAA\" // \"\"), (.value.\"CNAME\" // \"\")] | join(\"\\t\")' reso\rources/dns/external_dns.json | while IFS=\\t read -r host a aaaa cname; do \r\n\u001b[?2004l\r"]
[265.968801, "o", "\u001b[?2004h> "]
[265.96891, "o", "  if [[ -n \"$cname\" && -z \"$a\" && -z \"$aaaa\" ]]; then \r\n\u001b[?2004l\r"]
[265.968929, "o", "\u001b[?2004h> "]
[265.969045, "o", "    dns_external_map[\"$host\"]=\"CNAME:$cname\"; \r\n\u001b[?2004l\r"]
[265.969073, "o", "\u001b[?2004h> "]
[265.969135, "o", "  elif [[ -n \"$a\" ]]; then \r\n\u001b[?2004l\r"]
[265.969158, "o", "\u001b[?2004h> "]
[265.969266, "o", "    dns_external_map[\"$host\"]=\"A:$a:$aaaa\"; \r\n\u001b[?2004l\r"]
[265.969288, "o", "\u001b[?2004h> "]
[265.969363, "o", "  elif [[ -n \"$aaaa\" ]]; then \r\n\u001b[?2004l\r"]
[265.969384, "o", "\u001b[?2004h> "]
[265.969496, "o", "    dns_external_map[\"$host\"]=\"AAAA::$aaaa\"; \r\n\u001b[?2004l\r"]
[265.969515, "o", "\u001b[?2004h> "]
[265.969535, "o", "  fi; \r\n\u001b[?2004l\r"]
[265.969554, "o", "\u001b[?2004h> "]
[265.969735, "o", "done 2>/dev/null || echo \"jq populating external failed\" >/dev/stderr\r\n\u001b[?2004l\r"]
[265.981665, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ \r\n\u001b[?2004l\r"]
[265.981717, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[265.981843, "o", "echo \"Internal map size: ${#dns_internal_map[@]}\" >/dev/stderr\r\n\u001b[?2004l\r"]
[265.981884, "o", "-bash: /dev/stderr: Permission denied\r\n"]
[265.981892, "o", "\u001b[?2004h"]
[265.981921, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[265.982137, "o", "# Test print one entry: echo \"Internal: ${dns_internal_map[app-internal.example.com]}\" >/dev/stderr\r\n\u001b[?2004l\r"]
[265.982153, "o", "\u001b[?2004h"]
[265.982169, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ \r\n\u001b[?2004l\r"]
[265.982188, "o", "\u001b[?2004h"]
[265.982206, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[265.98234, "o", "echo \"External map size: ${#dns_external_map[@]}\" >/dev/stderr\r\n\u001b[?2004l\r"]
[265.982359, "o", "-bash: /dev/stderr: Permission denied\r\n"]
[265.982381, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[265.982623, "o", "# Test print one entry: echo \"External: ${dns_external_map[service-public.example.org]}\" >/dev/stderr\r\n\u001b[?2004l\r"]
[265.982698, "o", "\u001b[?2004h"]
[265.982713, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[266.63362, "i", "> incidents/dns_resolution_report.log.corrected\n> resources/mock_hosts.temp.corrected\n\nwhile IFS= read -r host; do\n  # printf \"Processing: %s\\\\n\" \"$host\" \n  \n  # 1. Check mock_hosts (original)\n  hosts_ip=$(grep -i \"^[^\\\\t]*\\\\t\\\\\"$host\"\" resources/mock_hosts | awk '{print $1}' | head -1);\n  if [ -z \"$hosts_ip\" ]; then hosts_ip=\"-\"; fi\n\n  # 2. Resolve from DNS\n  final_a=\"-\"; final_aaaa=\"-\"; dns_summary=\"NO_RECORD_IN_DNS\"; \n  current_target=\"$host\"; depth=0; \n  \n  while [[ $depth -lt 3 && -n \"$current_target\" ]]; do\n    if [[ -n \"${dns_internal_map[$current_target]+isset}\" ]]; then\n      IFS=\":\" read -r type val1 val2 <<< \"${dns_internal_map[$current_target]}\" 2>/dev/null;\n      if [[ \"$type\" == \"A\" ]]; then final_a=\"$val1\"; final_aaaa=\"$val2\"; dns_summary=\"INTERNAL_A\"; break; fi\n      if [[ \"$type\" == \"CNAME\" ]]; then current_target=\"$val1\"; ((depth++)); continue; fi\n    fi\n    \n    if [[ -n \"${dns_external_map[$current_target]+isset}\" ]]; then\n      IFS=\":\" read -r type val1 val2 <<< \"${dns_external_map[$curre"]
[266.633756, "i", "nt_target]}\" 2>/dev/null;\n      if [[ \"$type\" == \"A\" ]]; then final_a=\"$val1\"; final_aaaa=\"$val2\"; dns_summary=\"EXTERNAL_A\"; break; fi\n      if [[ \"$type\" == \"CNAME\" ]]; then current_target=\"$val1\"; ((depth++)); continue; fi\n    fi\n    \n    if [[ $depth -ge 3 ]]; then dns_summary=\"CNAME_CHAIN_LIMIT_OR_LOOP\"; break; fi\n    break; \n  done\n\n  # Determine summary status\n  summary=\"NO_RECORD_FOUND\";\n  if [ \"$hosts_ip\" != \"-\" ]; then\n    if [[ \"$dns_summary\" == \"NO_RECORD_IN_DNS\" || \"$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]]; then\n      summary=\"OK - hosts entry present, no DNS\";\n    elif [ \"$hosts_ip\" == \"$final_a\" ]; then\n      summary=\"OK - consistent\";\n    else\n      summary=\"WARN - inconsistent\";\n    fi\n  else\n    if [[ \"$dns_summary\" == \"NO_RECORD_IN_DNS\" || \"$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]]; then\n      summary=\"$dns_summary\";\n    elif [ -n \"$final_a\" ] && [ \"$final_a\" != \"-\" ]; then\n      summary=\"UPDATED hosts with DNS A\";\n      echo \"$final_a\\t$host\" >> resources/mock_hosts.temp.correc"]
[266.633784, "i", "ted;\n    else\n      summary=\"NO_RECORD_FOUND\";\n    fi\n  fi\n  \n  echo -e \"$host\\\\t$hosts_ip\\\\t$final_a\\\\t$final_aaaa\\\\t$summary\" >> incidents/dns_resolution_report.log.corrected;\ndone < incidents/tickets/dns_incident_2024.txt\n"]
[266.633834, "o", "> incidents/dns_resolution_report.log.corrected\r\n"]
[266.633898, "o", "\u001b[?2004l\r"]
[266.633978, "o", "\u001b[?2004h"]
[266.634012, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[266.6341, "o", "> resources/mock_hosts.temp.corrected\r\n\u001b[?2004l\r"]
[266.634196, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[266.634219, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[266.634239, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[266.634299, "o", "while IFS= read -r host; do\r\n\u001b[?2004l\r"]
[266.634331, "o", "\u001b[?2004h> "]
[266.634424, "o", "  # printf \"Processing: %s\\\\n\" \"$host\" \r\n\u001b[?2004l\r"]
[266.634443, "o", "\u001b[?2004h> "]
[266.634461, "o", "  \r\n\u001b[?2004l\r"]
[266.634477, "o", "\u001b[?2004h> "]
[266.634559, "o", "  # 1. Check mock_hosts (original)\r\n\u001b[?2004l\r"]
[266.634582, "o", "\u001b[?2004h> "]
[266.634819, "o", "  hosts_ip=$(grep -i \"^[^\\\\t]*\\\\t\\\\\"$host\"\" resources/mock_hosts | awk '{print $1}' | head -1);\r\n\u001b[?2004l\r"]
[266.634839, "o", "\u001b[?2004h"]
[266.634857, "o", "> "]
[266.634958, "o", "  if [ -z \"$hosts_ip\" ]; then hosts_ip=\"-\"; fi\r\n\u001b[?2004l\r"]
[266.634982, "o", "\u001b[?2004h"]
[266.635004, "o", "> \r\n\u001b[?2004l\r"]
[266.63504, "o", "\u001b[?2004h> "]
[266.635088, "o", "  # 2. Resolve from DNS\r\n\u001b[?2004l\r"]
[266.635103, "o", "\u001b[?2004h"]
[266.635128, "o", "> "]
[266.635277, "o", "  final_a=\"-\"; final_aaaa=\"-\"; dns_summary=\"NO_RECORD_IN_DNS\"; \r\n\u001b[?2004l\r"]
[266.635296, "o", "\u001b[?2004h"]
[266.635315, "o", "> "]
[266.635387, "o", "  current_target=\"$host\"; depth=0; \r\n\u001b[?2004l\r"]
[266.635404, "o", "\u001b[?2004h"]
[266.635422, "o", ">   \r\n\u001b[?2004l\r"]
[266.635438, "o", "\u001b[?2004h> "]
[266.635572, "o", "  while [[ $depth -lt 3 && -n \"$current_target\" ]]; do\r\n\u001b[?2004l\r"]
[266.635589, "o", "\u001b[?2004h"]
[266.635608, "o", "> "]
[266.635763, "o", "    if [[ -n \"${dns_internal_map[$current_target]+isset}\" ]]; then\r\n\u001b[?2004l\r"]
[266.635788, "o", "\u001b[?2004h> "]
[266.636024, "o", "      IFS=\":\" read -r type val1 val2 <<< \"${dns_internal_map[$current_target]}\" 2>/dev/null;\r\n\u001b[?2004l\r"]
[266.63605, "o", "\u001b[?2004h"]
[266.636073, "o", "> "]
[266.636323, "o", "      if [[ \"$type\" == \"A\" ]]; then final_a=\"$val1\"; final_aaaa=\"$val2\"; dns_summary=\"INTERNAL_A\"; break; fi\r\n\u001b[?2004l\r"]
[266.636345, "o", "\u001b[?2004h"]
[266.636362, "o", "> "]
[266.636564, "o", "      if [[ \"$type\" == \"CNAME\" ]]; then current_target=\"$val1\"; ((depth++)); continue; fi\r\n\u001b[?2004l\r"]
[266.636585, "o", "\u001b[?2004h"]
[266.636601, "o", "> "]
[266.636619, "o", "    fi\r\n\u001b[?2004l\r"]
[266.63664, "o", "\u001b[?2004h> "]
[266.636656, "o", "    \r\n\u001b[?2004l\r"]
[266.636679, "o", "\u001b[?2004h> "]
[266.636837, "o", "    if [[ -n \"${dns_external_map[$current_target]+isset}\" ]]; then\r\n\u001b[?2004l\r"]
[266.636853, "o", "\u001b[?2004h"]
[266.636869, "o", "> "]
[266.6371, "o", "      IFS=\":\" read -r type val1 val2 <<< \"${dns_external_map[$current_target]}\" 2>/dev/null;\r\n\u001b[?2004l\r"]
[266.637126, "o", "\u001b[?2004h"]
[266.637149, "o", "> "]
[266.637405, "o", "      if [[ \"$type\" == \"A\" ]]; then final_a=\"$val1\"; final_aaaa=\"$val2\"; dns_summary=\"EXTERNAL_A\"; break; fi\r\n\u001b[?2004l\r"]
[266.637428, "o", "\u001b[?2004h"]
[266.637443, "o", "> "]
[266.637653, "o", "      if [[ \"$type\" == \"CNAME\" ]]; then current_target=\"$val1\"; ((depth++)); continue; fi\r\n\u001b[?2004l\r"]
[266.637676, "o", "\u001b[?2004h> "]
[266.637699, "o", "    fi\r\n\u001b[?2004l\r"]
[266.637712, "o", "\u001b[?2004h"]
[266.637729, "o", ">     \r\n"]
[266.637745, "o", "\u001b[?2004l\r\u001b[?2004h"]
[266.637758, "o", "> "]
[266.637957, "o", "    if [[ $depth -ge 3 ]]; then dns_summary=\"CNAME_CHAIN_LIMIT_OR_LOOP\"; break; fi\r\n\u001b[?2004l\r"]
[266.637978, "o", "\u001b[?2004h"]
[266.637992, "o", "> "]
[266.638023, "o", "    break; \r\n\u001b[?2004l\r"]
[266.638042, "o", "\u001b[?2004h"]
[266.638057, "o", "> "]
[266.638072, "o", "  done\r\n\u001b[?2004l\r"]
[266.638088, "o", "\u001b[?2004h"]
[266.638107, "o", "> \r\n\u001b[?2004l\r"]
[266.638121, "o", "\u001b[?2004h> "]
[266.638198, "o", "  # Determine summary status\r\n\u001b[?2004l\r"]
[266.638218, "o", "\u001b[?2004h"]
[266.638232, "o", "> "]
[266.638292, "o", "  summary=\"NO_RECORD_FOUND\";\r\n\u001b[?2004l\r"]
[266.638309, "o", "\u001b[?2004h> "]
[266.638396, "o", "  if [ \"$hosts_ip\" != \"-\" ]; then\r\n\u001b[?2004l\r"]
[266.638413, "o", "\u001b[?2004h> "]
[266.638674, "o", "    if [[ \"$dns_summary\" == \"NO_RECORD_IN_DNS\" || \"$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]]; then\r\n\u001b[?2004l\r"]
[266.638695, "o", "\u001b[?2004h> "]
[266.638817, "o", "      summary=\"OK - hosts entry present, no DNS\";\r\n\u001b[?2004l\r"]
[266.638842, "o", "\u001b[?2004h> "]
[266.638943, "o", "    elif [ \"$hosts_ip\" == \"$final_a\" ]; then\r\n\u001b[?2004l\r"]
[266.638964, "o", "\u001b[?2004h"]
[266.638985, "o", "> "]
[266.639068, "o", "      summary=\"OK - consistent\";\r\n\u001b[?2004l\r"]
[266.639087, "o", "\u001b[?2004h"]
[266.639103, "o", "> "]
[266.639125, "o", "    else\r\n\u001b[?2004l\r"]
[266.639142, "o", "\u001b[?2004h"]
[266.639161, "o", "> "]
[266.63924, "o", "      summary=\"WARN - inconsistent\";\r\n\u001b[?2004l\r"]
[266.639258, "o", "\u001b[?2004h"]
[266.639275, "o", "> "]
[266.639292, "o", "    fi\r\n\u001b[?2004l\r"]
[266.639309, "o", "\u001b[?2004h> "]
[266.639329, "o", "  else\r\n\u001b[?2004l\r"]
[266.639345, "o", "\u001b[?2004h> "]
[266.639592, "o", "    if [[ \"$dns_summary\" == \"NO_RECORD_IN_DNS\" || \"$dns_summary\" == \"CNAME_CHAIN_LIMIT_OR_LOOP\" ]]; then\r\n\u001b[?2004l\r"]
[266.639609, "o", "\u001b[?2004h"]
[266.639629, "o", "> "]
[266.639693, "o", "      summary=\"$dns_summary\";\r\n\u001b[?2004l\r"]
[266.639716, "o", "\u001b[?2004h> "]
[266.63985, "o", "    elif [ -n \"$final_a\" ] && [ \"$final_a\" != \"-\" ]; then\r\n\u001b[?2004l\r"]
[266.639869, "o", "\u001b[?2004h"]
[266.639885, "o", "> "]
[266.639997, "o", "      summary=\"UPDATED hosts with DNS A\";\r\n\u001b[?2004l\r"]
[266.640016, "o", "\u001b[?2004h"]
[266.640032, "o", "> "]
[266.6402, "o", "      echo \"$final_a\\t$host\" >> resources/mock_hosts.temp.corrected;\r\n\u001b[?2004l\r"]
[266.640217, "o", "\u001b[?2004h"]
[266.640233, "o", "> "]
[266.640247, "o", "    else\r\n\u001b[?2004l\r"]
[266.640273, "o", "\u001b[?2004h> "]
[266.640348, "o", "      summary=\"NO_RECORD_FOUND\";\r\n\u001b[?2004l\r"]
[266.640368, "o", "\u001b[?2004h> "]
[266.640388, "o", "    fi\r\n\u001b[?2004l\r"]
[266.640409, "o", "\u001b[?2004h> "]
[266.640424, "o", "  fi\r\n\u001b[?2004l\r"]
[266.640438, "o", "\u001b[?2004h"]
[266.640454, "o", ">   \r\n\u001b[?2004l\r"]
[266.640472, "o", "\u001b[?2004h> "]
[266.640758, "o", "  echo -e \"$host\\\\t$hosts_ip\\\\t$final_a\\\\t$final_aaaa\\\\t$summary\" >> incidents/dns_resolution_report.log.corrected;\r\n\u001b[?2004l\r"]
[266.640779, "o", "\u001b[?2004h"]
[266.640794, "o", "> "]
[266.6409, "o", "done < incidents/tickets/dns_incident_2024.txt\r\n\u001b[?2004l\r"]
[266.649386, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[268.678682, "i", "sort -o incidents/dns_resolution_report.log.corrected incidents/dns_resolution_report.log.corrected\n"]
[268.678967, "o", "sort -o incidents/dns_resolution_report.log.corrected incidents/dns_resolution_report.log.corrected\r\n\u001b[?2004l\r"]
[268.680254, "o", "\u001b[?2004h"]
[268.680272, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[268.913404, "i", "chmod 640 incidents/dns_resolution_report.log.corrected\n"]
[268.913672, "o", "chmod 640 incidents/dns_resolution_report.log.corrected\r\n\u001b[?2004l\r"]
[268.914563, "o", "\u001b[?2004huser@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[269.192129, "i", "echo \"--- Corrected Report Content ---\"; cat incidents/dns_resolution_report.log.corrected\n"]
[269.192399, "o", "echo \"--- Corrected Report Content ---\"; cat incidents/dns_resolution_report.log.corrected\r\n\u001b[?2004l\r"]
[269.192435, "o", "--- Corrected Report Content ---\r\n"]
[269.193048, "o", "api-gateway.external.com\t-\t-\t-\tNO_RECORD_IN_DNS\r\napp-internal.example.com\t-\t-\t-\tNO_RECORD_IN_DNS\r\nlegacy-system.internal.net\t-\t-\t-\tNO_RECORD_IN_DNS\r\nservice-public.example.org\t-\t-\t-\tNO_RECORD_IN_DNS\r\n"]
[269.193209, "o", "\u001b[?2004h"]
[269.193277, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
[269.428117, "i", "echo \"--- Corrected Mock Hosts (temp) Content ---\"; cat resources/mock_hosts.temp.corrected\n"]
[269.428443, "o", "echo \"--- Corrected Mock Hosts (temp) Content ---\"; cat resources/mock_hosts.temp.corrected\r\n\u001b[?2004l\r"]
[269.428514, "o", "--- Corrected Mock Hosts (temp) Content ---\r\n"]
[269.429405, "o", "\u001b[?2004h"]
[269.429451, "o", "user@2c74d09a-c4e9-4e06-abee-5f521942fb1f:~$ "]
