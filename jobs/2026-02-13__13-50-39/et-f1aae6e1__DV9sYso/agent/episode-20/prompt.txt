New Terminal Output:

root@595bfb79-84dc-4db9-bbd2-82e789f1311d:/home/user/cloud_costs# jq --argjson rates "$(cat processed/exchange_rates.json)" --arg batchid "$(cat processed/batch
_id.txt)" '.[] | .cost_in_usd = (if $rates[.currency] then (.cost * $rates[.currency]) else (.cost * 1.0) end) | .cost_in_usd |= (. * 100 | floor | . / 100) | .
 + {batch_id: $batchid}' processed/unblocked_array.json > processed/usd_converted.json
root@595bfb79-84dc-4db9-bbd2-82e789f1311d:/home/user/cloud_costs# cat processed/usd_converted.json
{
  "account_id": "acct-002",
  "service": "RDS",
  "cost": 2105.33,
  "currency": "EUR",
  "cost_in_usd": 2273.75,
  "batch_id": "0cf9ddfd859de40aaf593073df50ba34e9e02e741dcfa116a6e0d6784dacf377"
}
{
  "account_id": "acct-003",
  "service": "S3",
  "cost": 876.5,
  "currency": "USD",
  "cost_in_usd": 876.5,
  "batch_id": "0cf9ddfd859de40aaf593073df50ba34e9e02e741dcfa116a6e0d6784dacf377"
}
root@595bfb79-84dc-4db9-bbd2-82e789f1311d:/home/user/cloud_costs# jq '.cost_in_usd' processed/usd_converted.json | jq -s . > processed/usd_costs.json
root@595bfb79-84dc-4db9-bbd2-82e789f1311d:/home/user/cloud_costs#
