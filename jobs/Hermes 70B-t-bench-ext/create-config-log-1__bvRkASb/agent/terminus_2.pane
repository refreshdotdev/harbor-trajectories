[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:~# asciinema rec --stdin /logs/agent/recording.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent/recording.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:~# clear
[?2004l[H[J[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:~# export NET_CONF_DIR="${NET_CONF_DIR:-/home/user/network_ops}"
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:~# cd "$NET_CONF_DIR"
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# mkdir -p backups logs patches
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# DATE=$(date -u +"%Y-%m-%dT%H:%M:%SZ") && echo "${DATE} - BACKED_UP - OK" > logs/patch_application.log
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# gzip -c current/router.conf > backups/router.conf.orig.gz
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# sed -i 's/\r$//' current/router.conf
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# DATE=$(date -u +"%Y-%m-%dT%H:%M:%SZ") && echo "${DATE} - NORMALIZED_LF - OK" >> logs/patch_application.log
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# diff -u current/router.conf baseline/router.conf > patches/router_fix.patch
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# DATE=$(date -u +"%Y-%m-%dT%H:%M:%SZ") && echo "${DATE} - CREATED_PATCH - OK" >> logs/patch_application.log
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# ORIGINAL_SIZE=$(stat -c %s backups/router.conf.orig.gz)
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# PATCH_SIZE=$(stat -c %s patches/router_fix.patch)
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# cat > logs/metrics.json << EOF
[?2004l[?2004h> {
[?2004l[?2004h>   "original_size_bytes": $ORIGINAL_SIZE,
[?2004l[?2004h>   "patch_size_bytes": $PATCH_SIZE
[?2004l[?2004h> }
[?2004l[?2004h> EOF
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# patch -p0 -i patches/router_fix.patch current/router.conf
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# DATE=$(date -u +"%Y-%m-%dT%H:%M:%SZ") && echo "${DATE} - APPLIED_PATCH - OK" >> logs/patch_application.log
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# cmp current/router.conf baseline/router.conf
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# DATE=$(date -u +"%Y-%m-%dT%H:%M:%SZ") && echo "${DATE} - VERIFIED_CONFIG - OK" >> logs/patch_application.log
[?2004l[?2004hroot@04ec5b6d-f086-4b1a-ab01-f776f17712db:/home/user/network_ops# 