{"version": 2, "width": 160, "height": 40, "timestamp": 1771008798, "env": {"SHELL": "/bin/bash", "TERM": "screen"}}
[0.008967, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:~# "]
[0.933755, "i", "clear\r"]
[0.934078, "o", "clear\r\n\u001b[?2004l\r"]
[0.93489, "o", "\u001b[H\u001b[J"]
[0.935176, "o", "\u001b[?2004h"]
[0.935208, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:~# "]
[6.431792, "i", "cd /home/user\n"]
[6.43189, "o", "cd /home/user\r\n"]
[6.432083, "o", "\u001b[?2004l\r\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[6.522085, "i", "ls -la db_backups/\n"]
[6.522405, "o", "ls -la db_backups/\r\n\u001b[?2004l\r"]
[6.525029, "o", "total 24\r\n"]
[6.52512, "o", "drwxrwxrwx 1 root root 10 Feb 12 23:59  \u001b[0m\u001b[34;42m.\u001b[0m\r\ndrwxr-xr-x 1 root root 51 Feb 12 23:59  \u001b[01;34m..\u001b[0m\r\n-r--r--r-- 1 root root 12 Feb 12 23:59  archived.sql\r\n-rw-r--r-- 1 root root 15 Feb 12 23:59  batch_config.txt\r\n-rw-r--r-- 1 root root 71 Feb 12 23:59  customers.sql\r\n-rw-r--r-- 1 root root  9 Feb 12 23:59  inventory-2023.sql\r\n-rw-r--r-- 1 root root  9 Feb 12 23:59  inventory_2023.sql\r\n-rw-r--r-- 1 root root 50 Feb 12 23:59 ' orders.sql'\r\n"]
[6.525321, "o", "\u001b[?2004h"]
[6.525363, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[7.026706, "i", "mkdir -p backup_logs\n"]
[7.026844, "o", "mkdir -p backup_logs\r\n\u001b[?2004l\r"]
[7.07547, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[36.800513, "i", "cat /home/user/.config/backup_system.conf 2>/dev/null || echo \"BATCH_ID_PLACEHOLDER\"\n"]
[36.801235, "o", "cat /home/user/.config/backup_system.conf 2>/dev/null || echo \"BATCH_ID_PLACEHOLDER\"\r\n\u001b[?2004l\r"]
[36.802858, "o", "BID-PROD-8821\r\n"]
[36.80316, "o", "\u001b[?2004h"]
[36.803206, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[37.199253, "i", "chmod +x process_backups.py\n"]
[37.199416, "o", "chmod +x process_backups.py\r\n\u001b[?2004l\r"]
[37.200408, "o", "chmod: cannot access 'process_backups.py'"]
[37.200456, "o", ": No such file or directory\r\n"]
[37.200608, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[58.160214, "i", "rm -f process_backups.py\n"]
[58.160342, "o", "rm -f process_backups.py\r\n\u001b[?2004l\r"]
[58.161429, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[58.25196, "i", "chmod +x process_backups.py\n"]
[58.252088, "o", "chmod +x process_backups.py\r\n\u001b[?2004l\r"]
[58.253431, "o", "chmod: cannot access 'process_backups.py'"]
[58.253518, "o", ": No such file or directory\r\n"]
[58.253729, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[81.481296, "i", "rm -f process_backups.py\n"]
[81.481457, "o", "rm -f process_backups.py\r\n\u001b[?2004l\r"]
[81.482391, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[81.572568, "i", "printf '#!/usr/bin/python3\\nimport os\\nimport gzip\\nimport json\\nimport hashlib\\nimport re\\nfrom pathlib import Path\\n\\nBACKUP_DIR = Path('/home/user/db_backups')\\nLOG_DIR = Path('/home/user/backup_logs')\\nbatch_id = \"BID-PROD-8821\"\\n\\ndef normalize_sql_content(content_bytes):\\n    content_bytes = content_bytes.lstrip(b\\\\'\\\\xef\\\\xbb\\\\xbf\\\\')\\n    normalized_lines = []\\n    for line in content_bytes.splitlines():\\n        normalized_lines.append(line.rstrip(b\\\\' \\\\t\\\\') + b\\\\'\\\\n\\\\')\\n    return b\\\\''.join(normalized_lines)\\n\\ndef generate_manifest(normalized_sizes):\\n    manifest_path = LOG_DIR / \\'manifest.json\\\\'\\n    with open(manifest_path, \\'w\\', encoding=\\\\'utf-8\\\\') as f:\\n        json.dump(normalized_sizes, f, indent=2, ensure_ascii=False)\\n\\ndef generate_compliance_report(file_records, manifest_path):\\n    report_path = LOG_DIR / \\'compliance_report.log\\\\'\\n    with open(manifest_path, \\'rb\\') as f:\\n        manifest_sha256 = hashlib.sha256(f.read()).hexdigest()\\n    file_records_sorted = sorted(\\n  "]
[81.572681, "i", "      file_records.items(),\\n        key=lambda item: (item[0].lower(), item[0].count(_), item[0].count(-))\\n    )\\n    with open(report_path, \\'wb\\') as f:\\n        f.write(f\\\\'BATCH: {batch_id}\\\\r\\\\n\\\\'.encode(\\\\'latin-1\\\\'))\\n        for filename, record in file_records_sorted:\\n            line = (f\\\\'FILE: {filename} | N_SIZE: {record[0]} | GZ_SIZE: {record[1]} | MD5: {record[2]}\\\\r\\\\n\\\\')\\n            f.write(line.encode(\\\\'latin-1\\\\'))\\n        f.write(f\\\\'MANIFEST_SHA256: {manifest_sha256}\\\\r\\\\n\\\\'.encode(\\\\'latin-1\\\\'))\\n\\ndef process_sql_files():\\n    normalized_sizes = {}\\n    file_records = {}\\n    sql_files = list(BACKUP_DIR.glob(\\\\'*.sql\\\\')) + list(BACKUP_DIR.glob(\\\\'*.SQL\\\\'))\\n    \\n    for sql_file in sql_files:\\n        try:\\n            with open(sql_file, \\'rb\\') as f:\\n                raw_content = f.read()\\n            normalized_content = normalize_sql_content(raw_content)\\n            n_size = len(normalized_content)\\n            normalized_sizes[str(sql_file.name)] = n_size\\n        "]
[81.572725, "i", "    gz_path = sql_file.with_suffix(\\\\'.sql.gz\\\\')\\n            with gzip.open(gz_path, \\'wb\\') as f:\\n                f.write(normalized_content)\\n            gz_size = gz_path.stat().st_size\\n            md5_hash = hashlib.md5(normalized_content).hexdigest()\\n            file_records[str(sql_file.name)] = (n_size, gz_size, md5_hash)\\n            sql_file.unlink()\\n        except Exception as e:\\n            print(f\\\\'Error processing {sql_file.name}: {e}\\\\')\\n    if normalized_sizes:\\n        generate_manifest(normalized_sizes)\\n        generate_compliance_report(file_records, LOG_DIR / \\'manifest.json\\\\')\\n\\nif __name__ == __'__main__':\\n    process_sql_files()\\n' > process_backups.py\n"]
[81.589623, "o", "printf '#!/usr/bin/python3\\nimport os\\nimport gzip\\nimport json\\nimport hashlib\\nimport re\\nfrom pathlib import Path\\n\\nBACKUP_DIR = Path('/home/user/db_backups')\\nLOG_DIR = Path('/home/user/backup_logs')\\nbatch_id = \"BID-PROD-8821\"\\n\\ndef normalize_sql_content(content_bytes):\\n    content_bytes = content_bytes.lstrip(b\\\\'\\\\xef\\\\xbb\\\\xbf\\\\')\\n    normalized_lines = []\\n    for line in content_bytes.splitlines():\\n        normalized_lines.append(line.rstrip(b\\\\' \\\\t\\\\') + b\\\\'\\\\n\\\\')\\n    return b\\\\''.join(normalized_lines)\\n\\ndef generate_manifest(normalized_sizes):\\n    manifest_path = LOG_DIR / \\'manifest.json\\\\'\\n    with open(manifest_path, \\'w\\', encoding=\\\\'utf-8\\\\') as f:\\n        json.dump(normalized_sizes, f, indent=2, ensure_ascii=False)\\n\\ndef generate_compliance_report(file_records, manifest_path):\\n    report_path = LOG_DIR / \\'compliance_report.log\\\\'\\n    with open(manifest_path, \\'rb\\') as f:\\n        manifest_sha256 = hashlib.sha256(f.read()).hexdigest()\\n    file_records_sorted = sorted(\\n  "]
[81.589652, "o", "      file_records.items(),\\n        key=lambda item: (item[0].lower(), item[0].count(_), item[0].count(-))\\n    )\\n    with open(report_path, \\'wb\\') as f:\\n        f.write(f\\\\'BATCH: {batch_id}\\\\r\\\\n\\\\'.encode(\\\\'latin-1\\\\'))\\n        for filename, record in file_records_sorted:\\n            line = (f\\\\'FILE: {filename} | N_SIZE: {record[0]} | GZ_SIZE: {record[1]} | MD5: {record[2]}\\\\r\\\\n\\\\')\\n            f.write(line.encode(\\\\'latin-1\\\\'))\\n        f.write(f\\\\'MANIFEST_SHA256: {manifest_sha256}\\\\r\\\\n\\\\'.encode(\\\\'latin-1\\\\'))\\n\\ndef process_sql_files():\\n    normalized_sizes = {}\\n    file_records = {}\\n    sql_files = list(BACKUP_DIR.glob(\\\\'*.sql\\\\')) + list(BACKUP_DIR.glob(\\\\'*.SQL\\\\'))\\n    \\n    for sql_file in sql_files:\\n        try:\\n            with open(sql_file, \\'rb\\') as f:\\n                raw_content = f.read()\\n            normalized_content = normalize_sql_content(raw_content)\\n            n_size = len(normalized_content)\\n            normalized_sizes[str(sql_file.name)] = n_size\\n        "]
[81.589723, "o", "    gz_path = sql_file.with_suffix(\\\\'.sql.gz\\\\')\\n            with gzip.open(gz_path, \\'wb\\') as f:\\n                f.write(normalized_content)\\n            gz_size = gz_path.stat().st_size\\n            md5_hash = hashlib.md5(normalized_content).hexdigest()\\n            file_records[str(sql_file.name)] = (n_size, gz_size, md5_hash)\\n            sql_file.unlink()\\n        except Exception as e:\\n            print(f\\\\'Error processing {sql_file.name}: {e}\\\\')\\n    if normalized_sizes:\\n        generate_manifest(normalized_sizes)\\n        generate_compliance_report(file_records, LOG_DIR / \\'manifest.json\\\\')\\n\\nif __name__ == __'__main__':\\n    process_sql_files()\\n' > process_backups.py\r\n\u001b[?2004l\r"]
[81.590215, "o", "bash: syntax error near unexpected token `)'\r\n"]
[81.590294, "o", "\u001b[?2004h"]
[81.59032, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[82.066602, "i", "chmod +x process_backups.py\n"]
[82.066761, "o", "chmod +x process_backups.py\r\n\u001b[?2004l\r"]
[82.06779, "o", "chmod: cannot access 'process_backups.py'"]
[82.067844, "o", ": No such file or directory\r\n"]
[82.067981, "o", "\u001b[?2004h"]
[82.068003, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[82.220664, "i", "ls -la process_backups.py\n"]
[82.22084, "o", "ls -la process_backups.py\r\n"]
[82.220886, "o", "\u001b[?2004l\r"]
[82.222117, "o", "ls: cannot access 'process_backups.py'"]
[82.222188, "o", ": No such file or directory\r\n"]
[82.222402, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[104.062533, "i", "rm -f process_backups.py\n"]
[104.062713, "o", "rm -f process_backups.py\r\n\u001b[?2004l\r"]
[104.063791, "o", "\u001b[?2004h"]
[104.063836, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[104.132676, "i", "cat > process_backups.py << 'END_SCRIPT'\n#!/usr/bin/python3\nimport os\nimport gzip\nimport json\nimport hashlib\nimport re\nfrom pathlib import Path\n\nBACKUP_DIR = Path('/home/user/db_backups')\nLOG_DIR = Path('/home/user/backup_logs')\nbatch_id = \"BID-PROD-8821\"\n\ndef normalize_sql_content(content_bytes):\n    content_bytes = content_bytes.lstrip(b'\\xef\\xbb\\xbf')\n    normalized_lines = []\n    for line in content_bytes.splitlines():\n        normalized_lines.append(line.rstrip(b' \\t') + b'\\n')\n    return b''.join(normalized_lines)\n\ndef generate_manifest(normalized_sizes):\n    manifest_path = LOG_DIR / 'manifest.json'\n    with open(manifest_path, 'w', encoding='utf-8') as f:\n        json.dump(normalized_sizes, f, indent=2, ensure_ascii=False)\n\ndef generate_compliance_report(file_records, manifest_path):\n    report_path = LOG_DIR / 'compliance_report.log'\n    with open(manifest_path, 'rb') as f:\n        manifest_sha256 = hashlib.sha256(f.read()).hexdigest()\n    file_records_sorted = sorted(\n        file_records.items(),\n "]
[104.132803, "i", "       key=lambda item: (item[0].lower(), item[0].count('_'), item[0].count('-'))\n    )\n    with open(report_path, 'wb') as f:\n        f.write(f'BATCH: {batch_id}\\r\\n'.encode('latin-1'))\n        for filename, record in file_records_sorted:\n            line = (f'FILE: {filename} | N_SIZE: {record[0]} | GZ_SIZE: {record[1]} | MD5: {record[2]}\\r\\n')\n            f.write(line.encode('latin-1'))\n        f.write(f'MANIFEST_SHA256: {manifest_sha256}\\r\\n'.encode('latin-1'))\n\ndef process_sql_files():\n    normalized_sizes = {}\n    file_records = {}\n    sql_files = list(BACKUP_DIR.glob('*.sql')) + list(BACKUP_DIR.glob('*.SQL'))\n    \n    for sql_file in sql_files:\n        try:\n            with open(sql_file, 'rb') as f:\n                raw_content = f.read()\n            normalized_content = normalize_sql_content(raw_content)\n            n_size = len(normalized_content)\n            normalized_sizes[str(sql_file.name)] = n_size\n            gz_path = sql_file.with_suffix('.sql.gz')\n            with gzip.open(gz_path, 'wb') a"]
[104.132856, "i", "s f:\n                f.write(normalized_content)\n            gz_size = gz_path.stat().st_size\n            md5_hash = hashlib.md5(normalized_content).hexdigest()\n            file_records[str(sql_file.name)] = (n_size, gz_size, md5_hash)\n            sql_file.unlink()\n        except Exception as e:\n            print(f'Error processing {sql_file.name}: {e}')\n    \n    if normalized_sizes:\n        generate_manifest(normalized_sizes)\n        generate_compliance_report(file_records, LOG_DIR / 'manifest.json')\n\nif __name__ == '__main__':\n    process_sql_files()\nEND_SCRIPT\n"]
[104.132894, "o", "cat > process_backups.py << 'END_SCRIPT'\r\n\u001b[?2004l\r"]
[104.132964, "o", "\u001b[?2004h> "]
[104.133002, "o", "#!/usr/bin/python3\r\n\u001b[?2004l\r\u001b[?2004h> "]
[104.133039, "o", "import os\r\n\u001b[?2004l\r"]
[104.133074, "o", "\u001b[?2004h> "]
[104.133107, "o", "import gzip\r\n\u001b[?2004l\r\u001b[?2004h> "]
[104.133148, "o", "import json\r\n\u001b[?2004l\r"]
[104.133191, "o", "\u001b[?2004h> "]
[104.133225, "o", "import hashlib\r\n\u001b[?2004l\r\u001b[?2004h> "]
[104.133263, "o", "import re\r\n\u001b[?2004l\r"]
[104.133296, "o", "\u001b[?2004h> "]
[104.133352, "o", "from pathlib import Path\r\n\u001b[?2004l\r"]
[104.133384, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[104.133423, "o", "> "]
[104.133509, "o", "BACKUP_DIR = Path('/home/user/db_backups')\r\n\u001b[?2004l\r"]
[104.13354, "o", "\u001b[?2004h> "]
[104.13364, "o", "LOG_DIR = Path('/home/user/backup_logs')\r\n\u001b[?2004l\r"]
[104.133671, "o", "\u001b[?2004h> "]
[104.133731, "o", "batch_id = \"BID-PROD-8821\"\r\n\u001b[?2004l\r"]
[104.133764, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[104.133798, "o", "> "]
[104.133893, "o", "def normalize_sql_content(content_bytes):\r\n\u001b[?2004l\r"]
[104.133948, "o", "\u001b[?2004h> "]
[104.134075, "o", "    content_bytes = content_bytes.lstrip(b'\\xef\\xbb\\xbf')\r\n\u001b[?2004l\r"]
[104.134107, "o", "\u001b[?2004h> "]
[104.134167, "o", "    normalized_lines = []\r\n\u001b[?2004l\r"]
[104.134205, "o", "\u001b[?2004h> "]
[104.134298, "o", "    for line in content_bytes.splitlines():\r\n\u001b[?2004l\r"]
[104.134331, "o", "\u001b[?2004h> "]
[104.134478, "o", "        normalized_lines.append(line.rstrip(b' \\t') + b'\\n')\r\n\u001b[?2004l\r"]
[104.134511, "o", "\u001b[?2004h> "]
[104.134598, "o", "    return b''.join(normalized_lines)\r\n\u001b[?2004l\r"]
[104.13463, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[104.134662, "o", "> "]
[104.134753, "o", "def generate_manifest(normalized_sizes):\r\n\u001b[?2004l\r"]
[104.134784, "o", "\u001b[?2004h> "]
[104.134898, "o", "    manifest_path = LOG_DIR / 'manifest.json'\r\n\u001b[?2004l\r"]
[104.134958, "o", "\u001b[?2004h> "]
[104.135074, "o", "    with open(manifest_path, 'w', encoding='utf-8') as f:\r\n\u001b[?2004l\r"]
[104.135107, "o", "\u001b[?2004h> "]
[104.135275, "o", "        json.dump(normalized_sizes, f, indent=2, ensure_ascii=False)\r\n\u001b[?2004l\r"]
[104.135309, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[104.135342, "o", "> "]
[104.135484, "o", "def generate_compliance_report(file_records, manifest_path):\r\n\u001b[?2004l\r\u001b[?2004h"]
[104.135516, "o", "> "]
[104.135632, "o", "    report_path = LOG_DIR / 'compliance_report.log'\r\n\u001b[?2004l\r"]
[104.135666, "o", "\u001b[?2004h> "]
[104.135765, "o", "    with open(manifest_path, 'rb') as f:\r\n\u001b[?2004l\r"]
[104.135799, "o", "\u001b[?2004h> "]
[104.135954, "o", "        manifest_sha256 = hashlib.sha256(f.read()).hexdigest()\r\n\u001b[?2004l\r"]
[104.135991, "o", "\u001b[?2004h> "]
[104.136066, "o", "    file_records_sorted = sorted(\r\n\u001b[?2004l\r"]
[104.136099, "o", "\u001b[?2004h> "]
[104.136168, "o", "        file_records.items(),\r\n\u001b[?2004l\r"]
[104.136201, "o", "\u001b[?2004h> "]
[104.136428, "o", "        key=lambda item: (item[0].lower(), item[0].count('_'), item[0].count('-'))\r\n\u001b[?2004l\r\u001b[?2004h> "]
[104.136463, "o", "    )\r\n\u001b[?2004l\r\u001b[?2004h> "]
[104.136563, "o", "    with open(report_path, 'wb') as f:\r\n\u001b[?2004l\r"]
[104.136599, "o", "\u001b[?2004h> "]
[104.136744, "o", "        f.write(f'BATCH: {batch_id}\\r\\n'.encode('latin-1'))\r\n\u001b[?2004l\r"]
[104.136775, "o", "\u001b[?2004h> "]
[104.136903, "o", "        for filename, record in file_records_sorted:\r\n\u001b[?2004l\r"]
[104.136953, "o", "\u001b[?2004h> "]
[104.137212, "o", "            line = (f'FILE: {filename} | N_SIZE: {record[0]} | GZ_SIZE: {record[1]} | MD5: {record[2]}\\r\\n')\r\n\u001b[?2004l\r"]
[104.137248, "o", "\u001b[?2004h> "]
[104.137346, "o", "            f.write(line.encode('latin-1'))\r\n\u001b[?2004l\r"]
[104.13738, "o", "\u001b[?2004h> "]
[104.137565, "o", "        f.write(f'MANIFEST_SHA256: {manifest_sha256}\\r\\n'.encode('latin-1'))\r\n\u001b[?2004l\r"]
[104.137601, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[104.137639, "o", "> "]
[104.137678, "o", "def process_sql_files():\r\n\u001b[?2004l\r"]
[104.137712, "o", "\u001b[?2004h> "]
[104.137776, "o", "    normalized_sizes = {}\r\n\u001b[?2004l\r\u001b[?2004h"]
[104.13781, "o", "> "]
[104.137851, "o", "    file_records = {}\r\n\u001b[?2004l\r"]
[104.137882, "o", "\u001b[?2004h> "]
[104.138097, "o", "    sql_files = list(BACKUP_DIR.glob('*.sql')) + list(BACKUP_DIR.glob('*.SQL'))\r\n\u001b[?2004l\r"]
[104.138135, "o", "\u001b[?2004h>     \r\n\u001b[?2004l\r"]
[104.138167, "o", "\u001b[?2004h> "]
[104.138241, "o", "    for sql_file in sql_files:\r\n\u001b[?2004l\r"]
[104.138273, "o", "\u001b[?2004h> "]
[104.138306, "o", "        try:\r\n\u001b[?2004l\r\u001b[?2004h"]
[104.13834, "o", "> "]
[104.138437, "o", "            with open(sql_file, 'rb') as f:\r\n\u001b[?2004l\r"]
[104.138469, "o", "\u001b[?2004h> "]
[104.138563, "o", "                raw_content = f.read()\r\n\u001b[?2004l\r"]
[104.138597, "o", "\u001b[?2004h> "]
[104.138762, "o", "            normalized_content = normalize_sql_content(raw_content)\r\n\u001b[?2004l\r"]
[104.138807, "o", "\u001b[?2004h> "]
[104.138901, "o", "            n_size = len(normalized_content)\r\n\u001b[?2004l\r"]
[104.138947, "o", "\u001b[?2004h> "]
[104.139081, "o", "            normalized_sizes[str(sql_file.name)] = n_size\r\n\u001b[?2004l\r\u001b[?2004h"]
[104.139127, "o", "> "]
[104.139237, "o", "            gz_path = sql_file.with_suffix('.sql.gz')\r\n\u001b[?2004l\r"]
[104.139279, "o", "\u001b[?2004h> "]
[104.139386, "o", "            with gzip.open(gz_path, 'wb') as f:\r\n\u001b[?2004l\r"]
[104.139438, "o", "\u001b[?2004h> "]
[104.139527, "o", "                f.write(normalized_content)\r\n\u001b[?2004l\r"]
[104.139571, "o", "\u001b[?2004h> "]
[104.139667, "o", "            gz_size = gz_path.stat().st_size\r\n\u001b[?2004l\r"]
[104.139712, "o", "\u001b[?2004h> "]
[104.139865, "o", "            md5_hash = hashlib.md5(normalized_content).hexdigest()\r\n\u001b[?2004l\r\u001b[?2004h"]
[104.13991, "o", "> "]
[104.140106, "o", "            file_records[str(sql_file.name)] = (n_size, gz_size, md5_hash)\r\n\u001b[?2004l\r"]
[104.14015, "o", "\u001b[?2004h> "]
[104.140225, "o", "            sql_file.unlink()\r\n\u001b[?2004l\r"]
[104.140268, "o", "\u001b[?2004h> "]
[104.14035, "o", "        except Exception as e:\r\n\u001b[?2004l\r"]
[104.140393, "o", "\u001b[?2004h> "]
[104.140561, "o", "            print(f'Error processing {sql_file.name}: {e}')\r\n\u001b[?2004l\r"]
[104.140605, "o", "\u001b[?2004h>     \r\n\u001b[?2004l\r"]
[104.14065, "o", "\u001b[?2004h> "]
[104.140711, "o", "    if normalized_sizes:\r\n\u001b[?2004l\r"]
[104.140755, "o", "\u001b[?2004h> "]
[104.140875, "o", "        generate_manifest(normalized_sizes)\r\n\u001b[?2004l\r"]
[104.140938, "o", "\u001b[?2004h> "]
[104.141177, "o", "        generate_compliance_report(file_records, LOG_DIR / 'manifest.json')\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r"]
[104.141221, "o", "\u001b[?2004h> "]
[104.141288, "o", "if __name__ == '__main__':\r\n\u001b[?2004l\r"]
[104.141304, "o", "\u001b[?2004h> "]
[104.141392, "o", "    process_sql_files()\r\n\u001b[?2004l\r"]
[104.141414, "o", "\u001b[?2004h> "]
[104.141476, "o", "END_SCRIPT\r\n\u001b[?2004l\r"]
[104.142548, "o", "\u001b[?2004h"]
[104.142562, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[105.135197, "i", "chmod +x process_backups.py\n"]
[105.135362, "o", "chmod +x process_backups.py\r\n\u001b[?2004l\r"]
[105.136312, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[105.292229, "i", "ls -la process_backups.py\n"]
[105.292355, "o", "ls -la process_backups.py\r\n\u001b[?2004l\r"]
[105.293594, "o", "-rwxr-xr-x 1 root root 2566 Feb 13 18:55 \u001b[0m\u001b[01;32mprocess_backups.py\u001b[0m\r\n"]
[105.293825, "o", "\u001b[?2004h"]
[105.293898, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[114.312295, "i", "python3 process_backups.py\n"]
[114.312418, "o", "python3 process_backups.py\r\n\u001b[?2004l\r"]
[114.335232, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[116.298649, "i", "echo \"=== Backup Directory ===\"\n"]
[116.298804, "o", "echo \"=== Backup Directory ===\"\r\n\u001b[?2004l\r"]
[116.298847, "o", "=== Backup Directory ===\r\n"]
[116.298898, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[116.576655, "i", "ls -la /home/user/db_backups/\n"]
[116.576794, "o", "ls -la /home/user/db_backups/\r\n\u001b[?2004l\r"]
[116.578447, "o", "total 28\r\ndrwxrwxrwx 1 root root 4096 Feb 13 18:55  \u001b[0m\u001b[34;42m.\u001b[0m\r\ndrwxr-xr-x 1 root root   85 Feb 13 18:55  \u001b[01;34m..\u001b[0m\r\n"]
[116.578524, "o", "-rw-r--r-- 1 root root   45 Feb 13 18:55  \u001b[01;31marchived.sql.gz\u001b[0m\r\n-rw-r--r-- 1 root root   15 Feb 12 23:59  batch_config.txt\r\n-rw-r--r-- 1 root root   90 Feb 13 18:55  \u001b[01;31mcustomers.sql.gz\u001b[0m\r\n-rw-r--r-- 1 root root   48 Feb 13 18:55  \u001b[01;31minventory-2023.sql.gz\u001b[0m\r\n-rw-r--r-- 1 root root   48 Feb 13 18:55  \u001b[01;31minventory_2023.sql.gz\u001b[0m\r\n-rw-r--r-- 1 root root   78 Feb 13 18:55 \u001b[01;31m' orders.sql.gz'\u001b[0m\r\n"]
[116.578712, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[117.115742, "i", "echo \"=== Log Directory ===\"\n"]
[117.115958, "o", "echo \"=== Log Directory ===\"\r\n"]
[117.115991, "o", "\u001b[?2004l\r"]
[117.116022, "o", "=== Log Directory ===\r\n"]
[117.116084, "o", "\u001b[?2004h"]
[117.116109, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[117.197528, "i", "ls -la /home/user/backup_logs/\n"]
[117.197737, "o", "ls -la /home/user/backup_logs/\r\n\u001b[?2004l\r"]
[117.199105, "o", "total 8\r\n"]
[117.19913, "o", "drwxr-xr-x 2 root root  56 Feb 13 18:55 \u001b[0m\u001b[01;34m.\u001b[0m\r\ndrwxr-xr-x 1 root root  85 Feb 13 18:55 \u001b[01;34m..\u001b[0m\r\n-rw-r--r-- 1 root root 550 Feb 13 18:55 compliance_report.log\r\n"]
[117.199242, "o", "-rw-r--r-- 1 root root 122 Feb 13 18:55 manifest.json\r\n"]
[117.199409, "o", "\u001b[?2004h"]
[117.199427, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[117.718331, "i", "echo \"=== Manifest Content ===\"\n"]
[117.718475, "o", "echo \"=== Manifest Content ===\"\r\n\u001b[?2004l\r"]
[117.71851, "o", "=== Manifest Content ===\r\n"]
[117.718545, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[117.795453, "i", "cat /home/user/backup_logs/manifest.json\n"]
[117.795624, "o", "cat /home/user/backup_logs/manifest.json\r\n\u001b[?2004l\r"]
[117.796499, "o", "{\r\n  \"archived.sql\": 12,\r\n  \"inventory_2023.sql\": 9,\r\n  \"inventory-2023.sql\": 9,\r\n  \" orders.sql\": 50,\r\n  \"customers.sql\": 63\r\n}"]
[117.796677, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[126.731955, "i", "echo \"=== Compliance Report Content ===\"\n"]
[126.732231, "o", "echo \"=== Compliance Report Content ===\"\r\n\u001b[?2004l\r"]
[126.732294, "o", "=== Compliance Report Content ===\r\n"]
[126.732348, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[126.86776, "i", "cat /home/user/backup_logs/compliance_report.log\n"]
[126.867968, "o", "cat /home/user/backup_logs/compliance_report.log\r\n\u001b[?2004l\r"]
[126.868816, "o", "BATCH: BID-PROD-8821\r\r\nFILE:  orders.sql | N_SIZE: 50 | GZ_SIZE: 78 | MD5: 3e35d3ba594271c5b9bb8d636137d8d6\r\r\nFILE: archived.sql | N_SIZE: 12 | GZ_SIZE: 45 | MD5: 5409beca8d95e96d60fcfee12fdd5c10\r\r\nFILE: customers.sql | N_SIZE: 63 | GZ_SIZE: 90 | MD5: a33f58de527bc3c3c071ff53f6dc42a5\r\r\nFILE: inventory-2023.sql | N_SIZE: 9 | GZ_SIZE: 48 | MD5: 4de52a2af39ea0fd024f3bb7395c941a\r\r\nFILE: inventory_2023.sql | N_SIZE: 9 | GZ_SIZE: 48 | MD5: 705d6564b377a01d6867141718ebf3bd\r\r\nMANIFEST_SHA256: 8318819345f3216c46c1d0479beb7f2ab8bf2966f173c8f2a03dd938a0d5f76f\r\r\n"]
[126.869025, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[127.388453, "i", "echo \"=== Report File Encoding and Newlines ===\"\n"]
[127.388639, "o", "echo \"=== Report File Encoding and Newlines ===\"\r\n\u001b[?2004l\r"]
[127.3887, "o", "=== Report File Encoding and Newlines ===\r\n\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[127.564198, "i", "file /home/user/backup_logs/compliance_report.log\n"]
[127.564389, "o", "file /home/user/backup_logs/compliance_report.log\r\n\u001b[?2004l\r"]
[127.564807, "o", "bash: file: command not found\r\n"]
[127.565043, "o", "\u001b[?2004hroot@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[128.050786, "i", "cat -v /home/user/backup_logs/compliance_report.log\n"]
[128.051035, "o", "cat -v /home/user/backup_logs/compliance_report.log\r\n\u001b[?2004l\r"]
[128.052008, "o", "BATCH: BID-PROD-8821^M\r\nFILE:  orders.sql | N_SIZE: 50 | GZ_SIZE: 78 | MD5: 3e35d3ba594271c5b9bb8d636137d8d6^M\r\nFILE: archived.sql | N_SIZE: 12 | GZ_SIZE: 45 | MD5: 5409beca8d95e96d60fcfee12fdd5c10^M\r\nFILE: customers.sql | N_SIZE: 63 | GZ_SIZE: 90 | MD5: a33f58de527bc3c3c071ff53f6dc42a5^M\r\nFILE: inventory-2023.sql | N_SIZE: 9 | GZ_SIZE: 48 | MD5: 4de52a2af39ea0fd024f3bb7395c941a^M\r\nFILE: inventory_2023.sql | N_SIZE: 9 | GZ_SIZE: 48 | MD5: 705d6564b377a01d6867141718ebf3bd^M\r\nMANIFEST_SHA256: 8318819345f3216c46c1d0479beb7f2ab8bf2966f173c8f2a03dd938a0d5f76f^M\r\n"]
[128.052212, "o", "\u001b[?2004h"]
[128.052238, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[128.596946, "i", "echo \"=== Manifest File SHA256 Check ===\"\n"]
[128.597279, "o", "echo \"=== Manifest File SHA256 Check ===\"\r\n\u001b[?2004l\r"]
[128.597356, "o", "=== Manifest File SHA256 Check ===\r\n"]
[128.597423, "o", "\u001b[?2004h"]
[128.597456, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
[128.689522, "i", "sha256sum /home/user/backup_logs/manifest.json\n"]
[128.689904, "o", "sha256sum /home/user/backup_logs/manifest.json\r\n\u001b[?2004l\r"]
[128.691128, "o", "8318819345f3216c46c1d0479beb7f2ab8bf2966f173c8f2a03dd938a0d5f76f  /home/user/backup_logs/manifest.json\r\n"]
[128.691366, "o", "\u001b[?2004h"]
[128.691416, "o", "root@e17ec119-5239-403e-97ef-9cdc64b4fd47:/home/user# "]
