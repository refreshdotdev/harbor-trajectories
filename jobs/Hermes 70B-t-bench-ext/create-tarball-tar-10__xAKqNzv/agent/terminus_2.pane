[?2004hroot@0de6b15d-d1e5-44b5-aafd-9a58246a37f5:~# asciinema rec --stdin /logs/agent/recording.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent/recording.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@0de6b15d-d1e5-44b5-aafd-9a58246a37f5:~# clear
[?2004l[H[J[?2004hroot@0de6b15d-d1e5-44b5-aafd-9a58246a37f5:~# cd /home/user/artifact-project
[?2004l[?2004hroot@0de6b15d-d1e5-44b5-aafd-9a58246a37f5:/home/user/artifact-project# pwd
[?2004l/home/user/artifact-project
[?2004hroot@0de6b15d-d1e5-44b5-aafd-9a58246a37f5:/home/user/artifact-project# mkdir -p build reports dist
[?2004l[?2004hroot@0de6b15d-d1e5-44b5-aafd-9a58246a37f5:/home/user/artifact-project# echo "1.5.0" > VERSION
[?2004l[?2004hroot@0de6b15d-d1e5-44b5-aafd-9a58246a37f5:/home/user/artifact-project# cat > Makefile << 'EOF'
[?2004l(VERSION).tar.gz -C build mytool -C reports test-results.log
	@sha256sum dist/mytool-$(VERSION).tar.gz > dist/mytool-$(VERSION).tar.gz.sha256
	@echo "Packaging complete: dist/mytool-$(VERSION).tar.gz and its checksum created"

# Clean target
clean:
	@echo "Cleaning build artifacts..."
	@rm -rf build reports dist
	@echo "Clean complete"
EOF[?2004h> .PHONY: all compile test package clean
[?2004l[?2004h> 
[?2004l[?2004h> # Read version from VERSION file, stripping whitespace
[?2004l[?2004h> VERSION=$(shell cat VERSION | tr -d ' \n')
[?2004l[?2004h> 
[?2004l[?2004h> # Default target
[?2004l[?2004h> all: compile test package
[?2004l[?2004h> 
[?2004l[?2004h> # Compile target with parallel execution
[?2004l[?2004h> compile:
[?2004l[?2004h> @echo "Creating build directory..."
[?2004l[?2004h> @mkdir -p build
[?2004l[?2004h> @echo "Building part A..."
[?2004l[?2004h> @(echo 'int main(){' > build/part_a && echo "Building part A" && sleep 1) &
[?2004l[?2004h> @echo "Building part B..."
[?2004l[?2004h> @(echo 'return 0;}' > build/part_b && echo "Building part B" && sleep 1) &
[?2004l[?2004h> @wait
[?2004l[?2004h> @echo "Concatenating parts..."
[?2004l[?2004h> @cat build/part_a build/part_b > build/mytool
[?2004l[?2004h> @echo "Compilation complete: build/mytool created"
[?2004l[?2004h> 
[?2004l[?2004h> # Test target
[?2004l[?2004h> test:
[?2004l[?2004h> @echo "Creating reports directory..."
[?2004l[?2004h> @mkdir -p reports
[?2004l[?2004h> @echo "TEST_SUITE_RESULT: PASS" > reports/test-results.log
[?2004l[?2004h> @echo "TEST_USER: $(shell whoami)" >> reports/test-results.log
[?2004l[?2004h> @echo "Testing complete: reports/test-results.log created"
[?2004l[?2004h> 
[?2004l[?2004h> # Package target
[?2004l[?2004h> package:
[?2004l[?2004h> @echo "Creating dist directory..."
[?2004l[?2004h> @mkdir -p dist
[?2004l[?2004h> @tar -czf dist/mytool-$(VERSION).tar.gz -C build mytool -C reports test-results.log
[?2004l[?2004h> @sha256sum dist/mytool-$(VERSION).tar.gz > dist/mytool-$(VERSION).tar.gz.sha256
[?2004l[?2004h> @echo "Packaging complete: dist/mytool-$(VERSION).tar.gz and its checksum created"
[?2004l[?2004h> 
[?2004l[?2004h> # Clean target
[?2004l[?2004h> clean:
[?2004l[?2004h> @echo "Cleaning build artifacts..."
[?2004l[?2004h> @rm -rf build reports dist
[?2004l[?2004h> @echo "Clean complete"
[?2004l[?2004h> EOFls -la
[?2004l[?2004h> cat > Makefile << 'EOF'
[?2004l[?2004h> .PHONY: all compile test package clean
[?2004l[?2004h> 
[?2004l[?2004h> # Read version from VERSION file, stripping whitespace
[?2004l[?2004h> VERSION=$(shell cat VERSION | tr -d ' \n')
[?2004l[?2004h> 
[?2004l[?2004h> # Default target
[?2004l[?2004h> all: compile test package
[?2004l[?2004h> 
[?2004l[?2004h> # Compile target with parallel execution
[?2004l[?2004h> compile:
[?2004l[?2004h> @echo "Creating build directory..."
[?2004l[?2004h> @mkdir -p build
[?2004l[?2004h> @echo "Building part A..."
[?2004l[?2004h> @(echo 'int main(){' > build/part_a && echo "Building part A" && sleep 1) &
[?2004l[?2004h> @echo "Building part B..."
[?2004l[?2004h> @(echo 'return 0;}' > build/part_b && echo "Building part B" && sleep 1) &
[?2004l[?2004h> @wait
[?2004l[?2004h> @echo "Concatenating parts..."
[?2004l[?2004h> @cat build/part_a build/part_b > build/mytool
[?2004l[?2004h> @echo "Compilation complete: build/mytool created"
[?2004l[?2004h> 
[?2004l[?2004h> # Test target
[?2004l[?2004h> test:
[?2004l[?2004h> @echo "Creating reports directory..."
[?2004l[?2004h> @mkdir -p reports
[?2004l[?2004h> @echo "TEST_SUITE_RESULT: PASS" > reports/test-results.log
[?2004l[?2004h> @echo "TEST_USER: $(shell whoami)" >> reports/test-results.log
[?2004l[?2004h> @echo "Testing complete: reports/test-results.log created"
[?2004l[?2004h> 
[?2004l[?2004h> # Package target
[?2004l[?2004h> package:
[?2004l[?2004h> @echo "Creating dist directory..."
[?2004l[?2004h> @mkdir -p dist
[?2004l[?2004h> @tar -czf dist/mytool-$(VERSION).tar.gz -C build mytool -C reports test-results.log
[?2004l[?2004h> @sha256sum dist/mytool-$(VERSION).tar.gz > dist/mytool-$(VERSION).tar.gz.sha256
[?2004l[?2004h> @echo "Packaging complete: dist/mytool-$(VERSION).tar.gz and its checksum created"
[?2004l[?2004h> 
[?2004l[?2004h> # Clean target
[?2004l[?2004h> clean:
[?2004l[?2004h> @echo "Cleaning build artifacts..."
[?2004l[?2004h> @rm -rf build reports dist
[?2004l[?2004h> @echo "Clean complete"
[?2004l[?2004h> EOFls -la Makefile
[?2004l[?2004h> cat Makefile
[?2004l[?2004h> make all
[?2004l[?2004h> echo "Build completed. Verifying artifacts..."
[?2004l[?2004h> ls -la build/
[?2004l[?2004h> cat build/mytool
[?2004l[?2004h> ls -la reports/
[?2004l[?2004h> cat reports/test-results.log
[?2004l[?2004h> ls -la dist/
[?2004l[?2004h> cat dist/mytool-*.sha256
[?2004l[?2004h> echo "Done. All artifacts verified."
[?2004l[?2004h> 