[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# asciinema rec --stdin /logs/agent/recording.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent/recording.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# clear
[?2004l[H[J[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# mkdir hardening_workshop
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# chmod 0700 hardening_workshop
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# cp /home/user/baseline_configs/ssh/sshd_config_baseline hardening_workshop/
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# cp /home/user/baseline_configs/sysctl/sysctl_baseline.conf hardening_workshop/
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# chmod 0600 hardening_workshop/sshd_config_baseline
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# chmod 0600 hardening_workshop/sysctl_baseline.conf
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# echo "$(date -u +'%Y-%m-%d %H:%M:%S UTC') | ACTION=COPY | SRC=/home/user/baseline_configs/ssh/sshd_config_baseline | DST=/home/user/hardening_workshop/sshd_config_baseline | HASH=$(sha256sum hardening_workshop/sshd_config_baseline | awk '{print $1}') | STATUS=OK" >> /home/user/hardening_summary.log
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# echo "$(date -u +'%Y-%m-%d %H:%M:%S UTC') | ACTION=COPY | SRC=/home/user/baseline_configs/sysctl/sysctl_baseline.conf | DST=/home/user/hardening_workshop/sysctl_baseline.conf | HASH=$(sha256sum hardening_workshop/sysctl_baseline.conf | awk '{print $1}') | STATUS=OK" >> /home/user/hardening_summary.log
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# cd hardening_workshop
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user/hardening_workshop# tar -czf baseline_backup_$(date -u +'%Y%m%d')_W$(date -u +'%V').tar.gz sshd_config_baseline sysctl_baseline.conf
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user/hardening_workshop# chmod 0600 baseline_backup_$(date -u +'%Y%m%d')_W$(date -u +'%V').tar.gz
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user/hardening_workshop# cd /home/user
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# echo "$(date -u +'%Y-%m-%d %H:%M:%S UTC') | ACTION=ARCHIVE | SRC=- | DST=/home/user/hardening_workshop/baseline_backup_$(date -u +'%Y%m%d')_W$(date -u +'%V').tar.gz | HASH=$(sha256sum hardening_workshop/baseline_backup_$(date -u +'%Y%m%d')_W$(date -u +'%V').tar.gz | awk '{print $1}') | STATUS=OK" >> /home/user/hardening_summary.log
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# cp hardening_workshop/sshd_config_baseline hardening_workshop/sshd_config_hardened
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# cp hardening_workshop/sysctl_baseline.conf hardening_workshop/sysctl_hardened.conf
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# grep -vE '^#|^$' /home/user/security_policies/ssh_policy.txt >> hardening_workshop/sshd_config_hardened
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# grep -vE '^#|^$' /home/user/security_policies/sysctl_policy.txt >> hardening_workshop/sysctl_hardened.conf M[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Kf
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# chmod 0600 hardening_workshop/sshd_config_hardened
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# chmod 0600 hardening_workshop/sysctl_hardened.conf
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# echo "$(date -u +'%Y-%m-%d %H:%M:%S UTC') | ACTION=HARDEN | SRC=/home/user/security_policies/ssh_policy.txt | DST=/home/user/hardening_workshop/sshd_config_hardened | HASH=$(sha256sum hardening_workshop/sshd_config_hardened | awk '{print $1}') | STATUS=OK" >> /home/user/hardening_summary.log
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# echo "$(date -u +'%Y-%m-%d %H:%M:%S UTC') | ACTION=HARDEN | SRC=/home/user/security_policies/sysctl_policy.txt | DST=/home/user/hardening_workshop/sysctl_hardened.conf | HASH=$(sha256sum hardening_workshop/sysctl_hardened.conf | awk '{print $1}') | STATUS=OK" >> /home/user/hardening_summary.log
[?2004l[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# ls -l /home/user/hardening_summary.log
[?2004l-rw-r--r-- 1 root root 1149 Feb 13 19:12 /home/user/hardening_summary.log
[?2004hroot@0a83a5b9-5efb-4b5c-a3f8-5b678aac1a66:/home/user# 