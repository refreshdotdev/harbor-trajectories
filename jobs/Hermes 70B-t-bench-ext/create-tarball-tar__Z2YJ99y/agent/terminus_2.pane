[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# asciinema rec --stdin /logs/agent/recording.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent/recording.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# clear
[?2004l[H[J[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# export BACKUP_DEST="/home/user/archives"
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# export LOG_FILE="/home/user/backup_logs/backup.log"
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# mkdir -p "$BACKUP_DEST" /home/user/backup_logs
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# date '+%Y%m%d'
[?2004l20260213
[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# current_date=$(date '+%Y%m%d')
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# archive_name="$BACKUP_DEST/daily_$current_date.tar.gz"
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# checksum_name="$BACKUP_DEST/daily_$current_date.sha256"
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# if [ -f "$archive_name" ]; then mv "$archive_name" "$archive_name.bak-$(date '+%s')"; fi
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# if [ -f "$checksum_name" ]; then mv "$checksum_name" "$checksum_name.bak-$(date '+%s')"; fi
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# tar --exclude='*.tmp' --exclude='*/*' -czf "$archive_name" -C /home/user/data . --format=gnu
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# tar -xf "$archive_name" --to-command="chown root:root && chmod o-rwx" -C "$BACKUP_DEST" -f -
[?2004ltar: Multiple archive files require '-M' option
Try 'tar --help' or 'tar --usage' for more information.
[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# sha256sum "$archive_name" > "$checksum_name"
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# if [ ! -f "$LOG_FILE" ]; then echo 'TIMESTAMP | ARCHIVE | STATUS' > "$LOG_FILE"; fi
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# echo "$(date '+%Y-%m-%d %H:%M:%S') - daily_$current_date.tar.gz - OK" >> "$LOG_FILE"
[?2004l[?2004hroot@3c1b096c-f5f9-4a9c-971c-94007435dbb9:~# 