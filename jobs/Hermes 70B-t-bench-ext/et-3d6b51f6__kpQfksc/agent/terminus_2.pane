[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:~# asciinema rec --stdin /logs/agent/recording.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent/recording.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:~# clear
[?2004l[H[J[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:~# cd /home/user
[?2004l[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# mkdir -p workflows/image_cleanup/input workflows/image_cleanup/output workflows/image_cleanup/temp
[?2004l[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# chmod +t workflows/image_cleanup/temp
[?2004l[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# ls -la workflows/
[?2004ltotal 0
drwxr-xr-x 3 root root 35 Feb 13 19:04 [0m[01;34m.[0m
drwxr-xr-x 1 root root 31 Feb 13 19:04 [01;34m..[0m
drwxr-xr-x 5 root root 61 Feb 13 19:04 [01;34mimage_cleanup[0m
[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# ls -la sample_images.txt
[?2004l-rw-rw-rw- 1 root root 56 Feb 13 18:50 sample_images.txt
[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# cat sample_images.txt | tr '[:upper:]' '[:lower:]' | sed 's/^[ \t]*//' | sed 's/[ \t]*$//' | grep -v '^$' | grep '\.jpg$' | sort | uniq > workflows/image_cleanup/input/files_to_process.txt
[?2004l[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# cat workflows/image_cleanup/input/files_to_process.txt
[?2004ldata_03.jpg
image_01.jpg
[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# cat > workflows/image_cleanup/run.sh << 'EOF'
[?2004l[?2004h> #!/usr/bin/env bash
[?2004l[?2004h> COUNT=$(wc -l < workflows/image_cleanup/input/files_to_process.txt)
[?2004l[?2004h> echo "Found $COUNT files to process."
[?2004l[?2004h> EOF
[?2004l[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# chmod +x workflows/image_cleanup/run.sh
[?2004l[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# bash workflows/image_cleanup/run.sh
[?2004lFound 2 files to process.
[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# cat > workflows/setup.log << 'EOF'
[?2004l[?2004h> SETUP COMPLETE
[?2004l[?2004h> Timestamp: $(date +'%Y-%m-%d %H:%M:%S')
[?2004l[?2004h> Directories:
[?2004l[?2004h> - /home/user/workflows/image_cleanup
[?2004l[?2004h> - /home/user/workflows/image_cleanup/input
[?2004l[?2004h> - /home/user/workflows/image_cleanup/output
[?2004l[?2004h> - /home/user/workflows/image_cleanup/temp
[?2004l[?2004h> Files:
[?2004l[?2004h> - /home/user/workflows/image_cleanup/run.sh (executable)
[?2004l[?2004h> - /home/user/workflows/image_cleanup/input/files_to_process.txt
[?2004l[?2004h> Metadata:
[?2004l[?2004h> - files_to_process.txt: $(md5sum workflows/image_cleanup/input/files_to_process.txt | cut -d' ' -f1) $(wc -c < workflows/image_cleanup/input/files_to_process.txt) bytes
[?2004l[?2004h> EOF
[?2004l[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# cat workflows/setup.log
[?2004lSETUP COMPLETE
Timestamp: $(date +'%Y-%m-%d %H:%M:%S')
Directories:
- /home/user/workflows/image_cleanup
- /home/user/workflows/image_cleanup/input
- /home/user/workflows/image_cleanup/output
- /home/user/workflows/image_cleanup/temp
Files:
- /home/user/workflows/image_cleanup/run.sh (executable)
- /home/user/workflows/image_cleanup/input/files_to_process.txt
Metadata:
- files_to_process.txt: $(md5sum workflows/image_cleanup/input/files_to_process.txt | cut -d' ' -f1) $(wc -c < workflows/image_cleanup/input/files_to_process.txt) bytes
[?2004hroot@d9894970-8094-47b7-973e-f2e918edc92a:/home/user# 