Previous response had warnings:
WARNINGS: - Extra text detected before JSON object
- Extra text detected after JSON object

New Terminal Output:

root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# printf '  "disk_usage": [\n' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# df -BG -t ext4 -t xfs -t overlay --output=target,fstype,size,used,avail,pcent |
 tail -n +2 | awk '{printf "    {\"mountpoint\": \"%s\", \"filesystem\": \"%s\", \"size_GB\": %.1f, \"used_GB\": %.1f, \"free_GB\": %.1f, \"percent_used\": %d},
\n", $1, $2, $3, $4, $5, $6}' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# sed -i '$ s/,$//' system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# printf '  ],\n' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# printf '  "top_processes": [\n' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# ps axch -o pid,user,pcpu,pmem,cmd --sort=-pcpu | head -n 6 | awk 'NR>1 && $5 !~
 /^\[/ {printf "    {\"pid\": %d, \"user\": \"%s\", \"command\": \"%s\", \"cpu_percent\": %.1f, \"mem_percent\": %.1f},\n", $1, $2, $4, $3, $5}' >> system_repor
t.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# sed -i '$ s/,$//' system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# printf '  ],\n' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# printf '  "open_ports": [\n' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# netstat -tuln 2>/dev/null | awk '/^tcp/ || /^udp/ {gsub(":\|\s\|\|\|", ":"); pr
int $4}' | awk -F: '{print $NF}' | sort -n | uniq | awk '{printf "    %d,\n", $1}' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# sed -i '$ s/,$//' system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# printf '  ],\n' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# printf '  "reachable_devices": [],\n' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# printf '  "unreachable_devices": []\n' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics# printf '}\n' >> system_report.json
root@6271375c-5db0-4f65-b72a-230685fb6c54:/home/user/iot_deployment/diagnostics#
