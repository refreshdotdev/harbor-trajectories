[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~# asciinema rec --stdin /logs/agent/recording.cast
[?2004l[0;32masciinema: recording asciicast to /logs/agent/recording.cast[0m
[0;32masciinema: press <ctrl-d> or type "exit" when you're done[0m
[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~# clear
[?2004l[H[J[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~# cd /home/user/docs
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs# mkdir -p drafts backups reports
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs# cd drafts
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# ls -la
[?2004ltotal 0
drwxrwxrwx 1 root root 91 Feb 13 18:48 .
drwxrwxrwx 1 root root 48 Feb 13 19:04 ..
-rw-rw-rw- 1 root root  0 Jan  1  2023 _notes.md
-rw-rw-rw- 1 root root  0 Jan  1  2023 intro.md
-rw-rw-rw- 1 root root  0 Jan  1  2023 setup.md
-rw-rw-rw- 1 root root  0 Jan  1  2023 usage.md
[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# cp -p intro.md ../backups/intro.md.bak
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# cp -p setup.md ../backups/setup.md.bak
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# cp -p usage.md ../backups/usage.md.bak
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# sed -i -E 's/^(URGENT.*)TBD(.*$)/\1TO BE DETERMINED\2/; t; s/^TBD(\b.*)$/To Be Determined\1/' intro.md
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# sed -i -E 's/^(URGENT.*)TBD(.*$)/\1TO BE DETERMINED\2/; t; s/^TBD(\b.*)$/To Be Determined\1/' setup.md
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# sed -i -E 's/^(URGENT.*)TBD(.*$)/\1TO BE DETERMINED\2/; t; s/^TBD(\b.*)$/To Be Determined\1/' usage.md
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# if grep -qi "confidential" intro.md; then echo -e "\n> This document is confidential." >> intro.md; fi
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# if grep -qi "confidential" setup.md; then echo -e "\n> This document is confidential." >> setup.md; fi
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# if grep -qi "confidential" usage.md; then echo -e "\n> This document is confidential." >> usage.md; fi
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/drafts# cd ../reports
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# echo "TODO Summary Report" > todo_summary.txt
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# echo "" >> todo_summary.txt
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# echo "intro.md: $(grep -c 'TODO' ../drafts/intro.md)" >> todo_summary.txt
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# echo "setup.md: $(grep -c 'TODO' ../drafts/setup.md)" >> todo_summary.txt
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# echo "usage.md: $(grep -c 'TODO' ../drafts/usage.md)" >> todo_summary.txt
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# echo "# Table of Contents" > toc.md
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# awk "NR==1 && /^# / {gsub(/^# /, \"\"); print \"- [\"$0\"](/docs/\" $0 \")"}" ../drafts/intro.md >> toc.md
[?2004l[?2004h> awk "NR==1 && /^# / {gsub(/^# /, \"\"); print \"- [\"$0\"](/docs/\" $0 \")"}" ../drafts/setup.md >> toc.md
[?2004lbash: syntax error near unexpected token `('
[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# awk "NR==1 && /^# / {gsub(/^# /, \"\"); print \"- [\"$0\"](/docs/\" $0 \")"}" ../drafts/usage.md >> toc.md
[?2004l[?2004h> rm toc.md
[?2004l[?2004h> echo "# Table of Contents" > toc.md
[?2004l[?2004h> awk 'NR==1 && /^# / {gsub(/^# /, ""); printf "- [%s](/docs/%s)\n", $0, $0}' ../drafts/intro.md >> toc.md
[?2004lbash: syntax error near unexpected token `('
[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# awk 'NR==1 && /^# / {gsub(/^# /, ""); printf "- [%s](/docs/%s)\n", $0, $0}' ../drafts/setup.md >> toc.md
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# awk 'NR==1 && /^# / {gsub(/^# /, ""); printf "- [%s](/docs/%s)\n", $0, $0}' ../drafts/usage.md >> toc.md
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# rm toc.md
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# echo "# Table of Contents" > toc.md
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# sed -n '1s/^# //p' ../drafts/intro.md | while read -r title; do echo "- [${title}](/docs/intro.md)" >> toc.md; done
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# sed -n '1s/^# //p' ../drafts/setup.md | while read -r title; do echo "- [${title}](/docs/setup.md)" >> toc.md; done
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# sed -n '1s/^# //p' ../drafts/usage.md | while read -r title; do echo "- [${title}](/docs/usage.md)" >> toc.md; done
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# echo "Change Log" > change_log.log
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# grep -n "^TBD" ../backups/intro.md.bak | while read -r line; do orig=$(echo "$line" | sed 's/^[0-9]\+://'); new=$(grep -m1 "^To Be Determined\|^TO BE DETERMINED" ../drafts/intro.md); if [ -n "$new" ]; then date=$(date +"%Y-%m-%d"); echo "$date intro.md: \"$orig\" -> \"$new\"" >> change_log.log; fi; done
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# grep -n "^TBD" ../backups/setup.md.bak | while read -r line; do orig=$(echo "$line" | sed 's/^[0-9]\+://'); new=$(grep -m1 "^To Be Determined\|^TO BE DETERMINED" ../drafts/setup.md); if [ -n "$new" ]; then date=$(date +"%Y-%m-%d"); echo "$date setup.md: \"$orig\" -> \"$new\"" >> change_log.log; fi; done
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# grep -n "^TBD" ../backups/usage.md.bak | while read -r line; do orig=$(echo "$line" | sed 's/^[0-9]\+://'); new=$(grep -m1 "^To Be Determined\|^TO BE DETERMINED" ../drafts/usage.md); if [ -n "$new" ]; then date=$(date +"%Y-%m-%d"); echo "$date usage.md: \"$orig\" -> \"$new\"" >> change_log.log; fi; done
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# apt-get update && apt-get install -y jq
[?2004l0% [Working]            Hit:1 http://security.ubuntu.com/ubuntu jammy-security InRelease
0% [Waiting for headers]0% [Waiting for headers]0% [Waiting for headers]echo "[\"$(cd ../drafts && for file in intro.md setup.md usage.md; do \echo -n '{'; echo -n '"filename": "'$file'",'; echo -n '"title": "'; sed -n 's/^# //p; ta' "$file" | head -1; echo -n '",'; echo -n '"hash": "'; sha256sum "$file" | cut -d' ' -f1; echo '"'; echo "}"; done | jq -s .)\"]" > manifest.json
                        Hit:2 http://archive.ubuntu.com/ubuntu jammy InRelease
                        0% [Working]            Hit:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
0% [Working]0% [Waiting for headers]                        Hit:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
                        0% [Working]0% [Working]20% [Working]             Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 3%Reading package lists... 3%Reading package lists... 4%Reading package lists... 4%Reading package lists... 38%Reading package lists... 38%Reading package lists... 39%Reading package lists... 39%Reading package lists... 49%Reading package lists... 49%Reading package lists... 66%Reading package lists... 66%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 79%Reading package lists... 79%Reading package lists... 96%Reading package lists... 96%Reading package lists... 97%Reading package lists... 99%Reading package lists... 99%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 3%Reading package lists... 3%Reading package lists... 4%Reading package lists... 4%Reading package lists... 38%Reading package lists... 38%Reading package lists... 39%Reading package lists... 39%Reading package lists... 49%Reading package lists... 49%Reading package lists... 66%Reading package lists... 66%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 70%Reading package lists... 79%Reading package lists... 79%Reading package lists... 90%Reading package lists... 96%Reading package lists... 96%Reading package lists... 99%Reading package lists... 99%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 4%Reading state information... Done
The following additional packages will be installed:
  libjq1 libonig5
The following NEW packages will be installed:
  jq libjq1 libonig5
0 upgraded, 3 newly installed, 0 to remove and 4 not upgraded.
Need to get 357 kB of archives.
After this operation, 1087 kB of additional disk space will be used.
0% [Working]            Get:1 http://archive.ubuntu.com/ubuntu jammy/main amd64 libonig5 amd64 6.9.7.1-2build1 [172 kB]
1% [1 libonig5 5500 B/172 kB 3%]                                45% [Working]             Get:2 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libjq1 amd64 1.6-2.1ubuntu3.1 [133 kB]
46% [2 libjq1 2604 B/133 kB 2%]                               82% [Waiting for headers]                         Get:3 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 jq amd64 1.6-2.1ubuntu3.1 [52.5 kB]
82% [3 jq 0 B/52.5 kB 0%]                         100% [Working]              Fetched 357 kB in 1s (635 kB/s)
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package libonig5:amd64.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 8730 files and directories currently installed.)
Preparing to unpack .../libonig5_6.9.7.1-2build1_amd64.deb ...
Unpacking libonig5:amd64 (6.9.7.1-2build1) ...
Selecting previously unselected package libjq1:amd64.
Preparing to unpack .../libjq1_1.6-2.1ubuntu3.1_amd64.deb ...
Unpacking libjq1:amd64 (1.6-2.1ubuntu3.1) ...
Selecting previously unselected package jq.
Preparing to unpack .../jq_1.6-2.1ubuntu3.1_amd64.deb ...
Unpacking jq (1.6-2.1ubuntu3.1) ...
Setting up libonig5:amd64 (6.9.7.1-2build1) ...
Setting up libjq1:amd64 (1.6-2.1ubuntu3.1) ...
Setting up jq (1.6-2.1ubuntu3.1) ...
Processing triggers for libc-bin (2.35-0ubuntu3.11) ...
[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# while pgrep -x "apt-get" > /dev/null; do sleep 1; done
[?2004l[?2004hroot@872f9f41-2897-4992-8266-a6f4ce573d9d:~/docs/reports# if command -v jq &> /dev/null; then
[?2004l[?2004h>   echo "[\"$(cd ../drafts && for file in intro.md setup.md usage.md; do \echo -n '{'; echo -n '"filename": "'$file'",'; echo -n '"title": "'; sed -n 's/^# //p; ta' "$file" | head -1; echo -n '",'; echo -n '"hash": "'; sha256sum "$file" | cut -d' ' -f1; echo '"'; echo "}"; done | jq -s .)\"]" > manifest.json
[?2004l[?2004h> else
[?2004l[?2004h>   echo "Creating manifest without jq..."
[?2004l[?2004h>   echo -n "[" > manifest.json
[?2004l[?2004h>   first=true
[?2004l[?2004h>   for file in ../drafts/intro.md ../drafts/setup.md ../drafts/usage.md; do
[?2004l[?2004h>     if [ \"$first\" = true ]; then first=false; else echo -n ","; fi
[?2004l[?2004h>     echo -n \"{\\"filename\\":\\"$(basename \"$file\")\\",\\"title\\":\\\"$(sed -n 's/^# //p; ta' \"$file\" | head -1)\\\",\\"hash\\":\\\"$(sha256sum \"$file\" | cut -d' ' -f1)\\\"}\"" >> manifest.json
[?2004l[?2004h>   done
[?2004l[?2004h>   echo "]" >> manifest.json
[?2004l[?2004h> fi
[?2004l[?2004h> chmod 644 *.txt *.md *.log *.json
[?2004l[?2004h> ls -la
[?2004l[?2004h> echo "=== TODO Summary ===" && cat todo_summary.txt && echo
[?2004l[?2004h> echo "=== Table of Contents ===" && cat toc.md && echo
[?2004l[?2004h> echo "=== Change Log ===" && cat change_log.log && echo
[?2004l[?2004h> echo "=== Manifest ===" && cat manifest.json && echo
[?2004l[?2004h> 