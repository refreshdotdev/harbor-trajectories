New Terminal Output:

> EOFcat >> solve.sh << 'EOF'
>
>     # Convert CSV to TSV and count records
>     tsv_file="/home/user/etl/staging/${base_name}.tsv"
>     rows=$(csvtool reform -u TSB "$csv_file" | tail -n +2 | wc -l)
>
>     # Create TSV file
>     if [[ $rows -gt 0 ]]; then
>       csvtool reform -u TSB "$csv_file" > "$tsv_file"
>     else
>       csvtool reform -u TSB "$csv_file" > "$tsv_file"
>     fi
>
>     # Update counters and store metadata
>     TOTAL_RECORDS=$((TOTAL_RECORDS + rows))
>     original_md5=$(md5sum "$csv_file" | cut -d' ' -f1)
>     PROCESSED_FILES[$csv_file]="$original_md5|$rows"
>
>     # Move original CSV to raw backup
>     mv -f "$csv_file" /home/user/etl/raw_backup/
>   fi
> done
> EOF
