New Terminal Output:

root@3b5edb01-7ffc-46e3-8d7b-29e03176bad3:~/k8s# cat > templates/deployment.yaml.tpl << 'EOF'
> apiVersion: apps/v1
> kind: Deployment
> metadata:
>   name: ${APP_NAME:-titan}
>   labels:
>     app: ${APP_NAME:-titan}
>     environment: ${ENVIRONMENT}
> spec:
>   replicas: 1
>   selector:
>     matchLabels:
>       app: ${APP_NAME:-titan}
>   template:
>     metadata:
>       labels:
>         app: ${APP_NAME:-titan}
>     spec:
>       containers:
>       - name: ${APP_NAME:-titan}
>         image: nginx:1.20
>         env:
>         - name: API_KEY
>           value: "${API_KEY_SPECIAL}"
>         - name: ENVIRONMENT
>           value: "${ENVIRONMENT}"
> EOF
root@3b5edb01-7ffc-46e3-8d7b-29e03176bad3:~/k8s# envsubst < templates/deployment.yaml.tpl > rendered/deployment.yaml
root@3b5edb01-7ffc-46e3-8d7b-29e03176bad3:~/k8s# sed -i 's/$/\r/' rendered/deployment.yaml
root@3b5edb01-7ffc-46e3-8d7b-29e03176bad3:~/k8s# cat -A rendered/deployment.yaml
apiVersion: apps/v1^M$
kind: Deployment^M$
metadata:^M$
  name: ${APP_NAME:-titan}^M$
  labels:^M$
    app: ${APP_NAME:-titan}^M$
    environment: prod_M-BM-'1^M$
spec:^M$
  replicas: 1^M$
  selector:^M$
    matchLabels:^M$
      app: ${APP_NAME:-titan}^M$
  template:^M$
    metadata:^M$
      labels:^M$
        app: ${APP_NAME:-titan}^M$
    spec:^M$
      containers:^M$
      - name: ${APP_NAME:-titan}^M$
        image: nginx:1.20^M$
        env:^M$
        - name: API_KEY^M$
          value: ""^M$
        - name: ENVIRONMENT^M$
          value: "prod_M-BM-'1"^M$
root@3b5edb01-7ffc-46e3-8d7b-29e03176bad3:~/k8s#
