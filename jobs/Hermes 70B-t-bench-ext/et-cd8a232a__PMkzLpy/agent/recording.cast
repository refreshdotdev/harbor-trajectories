{"version": 2, "width": 160, "height": 40, "timestamp": 1771009186, "env": {"SHELL": "/bin/bash", "TERM": "screen"}}
[0.006158, "o", "\u001b[?2004hroot@fd4a139f-8acc-4084-be6b-6e74425ff41e:/home/user# "]
[1.002, "i", "clear\r"]
[1.002107, "o", "clear\r\n\u001b[?2004l\r"]
[1.003174, "o", "\u001b[H\u001b[J"]
[1.003332, "o", "\u001b[?2004h"]
[1.003342, "o", "root@fd4a139f-8acc-4084-be6b-6e74425ff41e:/home/user# "]
[51.621257, "i", "mkdir -p /home/user/scripts\n"]
[51.621399, "o", "mkdir -p /home/user/scripts\r\n\u001b[?2004l\r"]
[51.622781, "o", "\u001b[?2004hroot@fd4a139f-8acc-4084-be6b-6e74425ff41e:/home/user# "]
[51.778495, "i", "cat > /home/user/scripts/filter_errors.sh << 'EOF'\n#!/bin/bash\n\n# filter_errors.sh - Regex-based log filtering utility\n# Extracts \"critical\" lines from application log and produces filtered log with redactions\n# and CSV summary of error categories.\n\n# Function to print usage information\nusage() {\n    echo \"Usage: $0 <input_log> <output_dir>\" >&2\n    echo \"Filters critical errors from input log and generates output files in output_dir.\" >&2\n    exit 1\n}\n\n# Check if exactly two positional arguments are provided\nif [ \"$#\" -ne 2 ]; then\n    usage\nfi\n\ninput_log=\"$1\"\noutput_dir=\"$2\"\n\n# Validate input log exists and is readable\nif [ ! -f \"$input_log\" ] || [ ! -r \"$input_log\" ]; then\n    echo \"Error: Input log file '${input_log}' not found or not readable.\" >&2\n    exit 1\nfi\n\n# Create output directory if it doesn't exist\nmkdir -p \"$output_dir\"\n\n# Get absolute paths for logging\nabs_input_log=\"$(realpath \"$input_log\")\"\nabs_output_dir=\"$(realpath \"$output_dir\")\"\n\n# Initialize output files (overwrite if exist)\ncritical_l"]
[51.778611, "i", "og=\"${output_dir}/critical_errors.log\"\ncsv_summary=\"${output_dir}/error_summary.csv\"\n\n# Write header to critical_errors.log\necho \"# Source: ${abs_input_log}\" > \"${critical_log}\"\n\necho \"error_category,count\" > \"${csv_summary}\"\n\n# Initialize variables for CSV summary\ndeclare -A error_counts\n\n# Process log file line by line\ncurrent_entry=\"\"\nentry_category=\"\"\nin_entry=false\n\n# Read input log file\nwhile IFS= read -r line; do\n    # Check if line starts with timestamp pattern [YYYY-MM-DD...\n    if [[ \"$line\" =~ ^\\[[0-9]{4}-[0-9]{2}-[0-9]{2} ]]; then\n        # If we were in an entry, process the completed previous entry\n        if $in_entry; then\n            # If previous entry matched critical criteria, write to critical log\n            if [ -n \"$entry_category\" ]; then\n                # Redact email addresses\n                current_entry=\"$(echo \"$current_entry\" | sed -E 's/\\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}\\b/<REDACTED>/g')\"\n                echo -e \"$current_entry\" >> \"${critical_log}\"\n             "]
[51.778649, "i", "   \n                # Update error counts in associative array\n                if [ -n \"${error_counts[$entry_category]}\" ]; then\n                    error_counts[$entry_category]=$((error_counts[$entry_category] + 1))\n                else\n                    error_counts[$entry_category]=1\n                fi\n            fi\n            \n            # Reset for new entry\n            current_entry=\"\"\n            entry_category=\"\"\n            in_entry=false\n        fi\n        \n        # Check if current line matches any critical regex patterns\n        entry_category=\"\"\n        if [[ \"$line\" == *\"ERROR\"* ]] || [[ \"$line\" == *\"FATAL\"* ]] || [[ \"$line\" =~ HTTP\\/1\\.1\\ 5[0-9]{2} ]]; then\n            in_entry=true\n            # Determine error category (first match wins)\n            if [[ \"$line\" == *\"Payment failed\"* ]]; then\n                entry_category=\"PAYMENT_FAILURE\"\n            elif [[ \"$line\" =~ HTTP\\/1\\.1\\ 5[0-9]{2} ]]; then\n                entry_category=\"HTTP_5XX\"\n            elif [[ \"$line\" == *\"FATAL\"* "]
[51.778687, "i", "]]; then\n                entry_category=\"FATAL\"\n            fi\n        else\n            # Line doesn't match critical patterns, skip entry\n            continue\n        fi\n    else\n        # Line doesn't start with timestamp - continuation of previous entry\n        if $in_entry; then\n            # Only continue if we're in a critical entry\n            current_entry+=\"$line\\n\"\n        fi\n    fi\n    \n    # If we're in an entry, add the current line\n    if $in_entry; then\n        current_entry+=\"$line\\n\"\n    fi\ndone < \"$input_log\"\n\n# Process the last entry in the file\nif $in_entry && [ -n \"$entry_category\" ]; then\n    current_entry=\"$(echo \"$current_entry\" | sed -E 's/\\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}\\b/<REDACTED>/g')\"\n    echo -e \"$current_entry\" >> \"${critical_log}\"\n    \n    if [ -n \"${error_counts[$entry_category]}\" ]; then\n        error_counts[$entry_category]=$((error_counts[$entry_category] + 1))\n    else\n        error_counts[$entry_category]=1\n    fi\nfi\n\n# Generate CSV summary from error cou"]
[51.778707, "o", "cat > /home/user/scripts/filter_errors.sh << 'EOF'\r\n\u001b[?2004l\r"]
[51.778738, "i", "nts\n# Create temporary file for sorted CSV\ncsv_temp=\"${output_dir}/error_summary_temp.csv\"\n\n# Write header to temp file\necho \"error_category,count\" > \"${csv_temp}\"\n\n# Write error counts to temp file\nfor category in \"${!error_counts[@]}\"; do\n    echo \"$category,${error_counts[$category]}\" >> \"${csv_temp}\"\ndone\n\n# Sort CSV: first by count descending, then by category ascending\nsort -t, -k2,2nr -k1,1 ${csv_temp} | tail -n +2 >> \"${csv_summary}\"\n\n# Remove temporary file\nrm -f \"${csv_temp}\"\n\n# Log successful execution\ntimestamp=$(date '+%Y-%m-%d|%H:%M:%S')\necho \"${timestamp}|input=${abs_input_log}|output_dir=${abs_output_dir}|status=OK\" >> /home/user/filter_run.log\n\nEOF\n"]
[51.77877, "o", "nts\r\n# Create temporary file for sorted CSV\r\ncsv_tem\u001b[?2004h"]
[51.778822, "o", "> "]
[51.778848, "o", "#!/bin/bash\r\n\u001b[?2004l\r"]
[51.778888, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.778912, "o", "\u001b[?2004h> "]
[51.779123, "o", "# filter_errors.sh - Regex-based log filtering utility\r\n\u001b[?2004l\r"]
[51.779166, "o", "\u001b[?2004h> "]
[51.779457, "o", "# Extracts \"critical\" lines from application log and produces filtered log with redactions\r\n\u001b[?2004l\r"]
[51.779493, "o", "\u001b[?2004h> "]
[51.779644, "o", "# and CSV summary of error categories.\r\n\u001b[?2004l\r"]
[51.779666, "o", "\u001b[?2004h> "]
[51.77969, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[51.779713, "o", "> "]
[51.779844, "o", "# Function to print usage information\r\n\u001b[?2004l\r"]
[51.779867, "o", "\u001b[?2004h> "]
[51.779905, "o", "usage() {\r\n\u001b[?2004l\r"]
[51.779955, "o", "\u001b[?2004h> "]
[51.780124, "o", "    echo \"Usage: $0 <input_log> <output_dir>\" >&2\r\n\u001b[?2004l\r"]
[51.780157, "o", "\u001b[?2004h> "]
[51.780464, "o", "    echo \"Filters critical errors from input log and generates output files in output_dir.\" >&2\r\n\u001b[?2004l\r"]
[51.780517, "o", "\u001b[?2004h> "]
[51.780547, "o", "    exit 1\r\n\u001b[?2004l\r"]
[51.780571, "o", "\u001b[?2004h> "]
[51.780595, "o", "}\r\n\u001b[?2004l\r"]
[51.780617, "o", "\u001b[?2004h> \r\n\u001b[?2004l\rt"]
[51.780632, "o", "\u001b[?2004h> "]
[51.78086, "o", "# Check if exactly two positional arguments are provided\r\n\u001b[?2004l\r"]
[51.780914, "o", "\u001b[?2004h> "]
[51.781008, "o", "if [ \"$#\" -ne 2 ]; then\r\n\u001b[?2004l\r"]
[51.781029, "o", "\u001b[?2004h> "]
[51.781093, "o", "    usage\r\n\u001b[?2004l\r\u001b[?2004h> "]
[51.781117, "o", "fi\r\n\u001b[?2004l\r"]
[51.781138, "o", "\u001b[?2004h> "]
[51.781159, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[51.781178, "o", "> "]
[51.781242, "o", "input_log=\"$1\"\r\n\u001b[?2004l\r"]
[51.781267, "o", "\u001b[?2004h> "]
[51.781327, "o", "output_dir=\"$2\"\r\n\u001b[?2004l\r"]
[51.781349, "o", "\u001b[?2004h"]
[51.781384, "o", "> \r\n\u001b[?2004l\r"]
[51.78141, "o", "\u001b[?2004h> "]
[51.781546, "o", "# Validate input log exists and is readable\r\n\u001b[?2004l\r"]
[51.781563, "o", "\u001b[?2004h> "]
[51.781746, "o", "if [ ! -f \"$input_log\" ] || [ ! -r \"$input_log\" ]; then\r\n\u001b[?2004l\r"]
[51.781769, "o", "\u001b[?2004h> "]
[51.781984, "o", "    echo \"Error: Input log file '${input_log}' not found or not readable.\" >&2\r\n\u001b[?2004l\r"]
[51.782029, "o", "\u001b[?2004h> "]
[51.782056, "o", "    exit 1\r\n\u001b[?2004l\r\u001b[?2004h"]
[51.782077, "o", "> "]
[51.782099, "o", "fi\r\n\u001b[?2004l\r"]
[51.782127, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.782151, "o", "\u001b[?2004h> "]
[51.782273, "o", "# Create output directory if it doesn't exist\r\n\u001b[?2004l\r"]
[51.782293, "o", "\u001b[?2004h"]
[51.78232, "o", "> "]
[51.782372, "o", "mkdir -p \"$output_dir\"\r\n\u001b[?2004l\r"]
[51.7824, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.782424, "o", "\u001b[?2004h> "]
[51.782521, "o", "# Get absolute paths for logging\r\n\u001b[?2004l\r"]
[51.782543, "o", "\u001b[?2004h"]
[51.782563, "o", "> "]
[51.782657, "o", "abs_input_log=\"$(realpath \"$input_log\")\"\r\n\u001b[?2004l\r"]
[51.78268, "o", "\u001b[?2004h"]
[51.782698, "o", "> "]
[51.782804, "o", "abs_output_dir=\"$(realpath \"$output_dir\")\"\r\n\u001b[?2004l\r"]
[51.782824, "o", "\u001b[?2004h"]
[51.782855, "o", "> \r\n\u001b[?2004l\r\u001b[?2004h"]
[51.782874, "o", "> "]
[51.782998, "o", "# Initialize output files (overwrite if exist)\r\n\u001b[?2004l\r"]
[51.783022, "o", "\u001b[?2004h"]
[51.783042, "o", "> "]
[51.783158, "o", "critical_log=\"${output_dir}/critical_errors.log\"\r\n\u001b[?2004l\r"]
[51.78319, "o", "\u001b[?2004h> "]
[51.78332, "o", "csv_summary=\"${output_dir}/error_summary.csv\"\r\n\u001b[?2004l\r"]
[51.78335, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.783373, "o", "\u001b[?2004h> "]
[51.78348, "o", "# Write header to critical_errors.log\r\n\u001b[?2004l\r"]
[51.783499, "o", "\u001b[?2004h> "]
[51.783649, "o", "echo \"# Source: ${abs_input_log}\" > \"${critical_log}\"\r\n\u001b[?2004l\r"]
[51.783673, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.783695, "o", "\u001b[?2004h> "]
[51.783829, "o", "echo \"error_category,count\" > \"${csv_summary}\"\r\n\u001b[?2004l\r"]
[51.783856, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.783984, "o", "\u001b[?2004h> "]
[51.784015, "o", "# Initialize variables for CSV summary\r\n\u001b[?2004l\r\u001b[?2004h> "]
[51.784089, "o", "declare -A error_counts\r\n\u001b[?2004l\r"]
[51.784113, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.784141, "o", "\u001b[?2004h> "]
[51.784232, "o", "# Process log file line by line\r\n\u001b[?2004l\r"]
[51.784256, "o", "\u001b[?2004h> "]
[51.784305, "o", "current_entry=\"\"\r\n\u001b[?2004l\r"]
[51.784327, "o", "\u001b[?2004h> "]
[51.784375, "o", "entry_category=\"\"\r\n\u001b[?2004l\r"]
[51.784395, "o", "\u001b[?2004h"]
[51.784412, "o", "> "]
[51.784445, "o", "in_entry=false\r\n\u001b[?2004l\r"]
[51.78447, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.784494, "o", "\u001b[?2004h"]
[51.784506, "o", "> "]
[51.784564, "o", "# Read input log file\r\n\u001b[?2004l\r"]
[51.78459, "o", "\u001b[?2004h"]
[51.784602, "o", "> "]
[51.784688, "o", "while IFS= read -r line; do\r\n\u001b[?2004l\r"]
[51.784715, "o", "\u001b[?2004h"]
[51.784755, "o", "> "]
[51.784898, "o", "    # Check if line starts with timestamp pattern [YYYY-MM-DD...\r\n\u001b[?2004l\r"]
[51.784939, "o", "\u001b[?2004h> "]
[51.785087, "o", "    if [[ \"$line\" =~ ^\\[[0-9]{4}-[0-9]{2}-[0-9]{2} ]]; then\r\n\u001b[?2004l\r"]
[51.785111, "o", "\u001b[?2004h> "]
[51.785303, "o", "        # If we were in an entry, process the completed previous entry\r\n\u001b[?2004l\r"]
[51.78532, "o", "\u001b[?2004h"]
[51.785342, "o", "> "]
[51.785413, "o", "        if $in_entry; then\r\n\u001b[?2004l\r"]
[51.785429, "o", "\u001b[?2004h"]
[51.785447, "o", "> "]
[51.785658, "o", "            # If previous entry matched critical criteria, write to critical log\r\n\u001b[?2004l\r"]
[51.785685, "o", "\u001b[?2004h> "]
[51.7858, "o", "            if [ -n \"$entry_category\" ]; then\r\n\u001b[?2004l\r"]
[51.785819, "o", "\u001b[?2004h> "]
[51.785939, "o", "                # Redact email addresses\r\n\u001b[?2004l\r"]
[51.785969, "o", "\u001b[?2004h> "]
[51.786309, "o", "                current_entry=\"$(echo \"$current_entry\" | sed -E 's/\\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}\\b/<REDACTED>/g')\"\r\n\u001b[?2004l\r"]
[51.78634, "o", "\u001b[?2004h> "]
[51.786502, "o", "                echo -e \"$current_entry\" >> \"${critical_log}\"\r\n\u001b[?2004l\r"]
[51.786526, "o", "\u001b[?2004h> "]
[51.786582, "o", "                \r\n\u001b[?2004l\r"]
[51.786616, "o", "\u001b[?2004h> "]
[51.786771, "o", "                # Update error counts in associative array\r\n\u001b[?2004l\r"]
[51.786818, "o", "\u001b[?2004h> "]
[51.786986, "o", "                if [ -n \"${error_counts[$entry_category]}\" ]; then\r\n\u001b[?2004l\r"]
[51.787028, "o", "\u001b[?2004h> "]
[51.787241, "o", "                    error_counts[$entry_category]=$((error_counts[$entry_category] + 1))\r\n\u001b[?2004l\r"]
[51.787279, "o", "\u001b[?2004h> "]
[51.78734, "o", "                else\r\n\u001b[?2004l\r"]
[51.787362, "o", "\u001b[?2004h> "]
[51.787516, "o", "                    error_counts[$entry_category]=1\r\n\u001b[?2004l\r"]
[51.78754, "o", "\u001b[?2004h> "]
[51.787613, "o", "                fi\r\n\u001b[?2004l\r"]
[51.787643, "o", "\u001b[?2004h> "]
[51.787731, "o", "            fi\r\n\u001b[?2004l\r\u001b[?2004h> "]
[51.787813, "o", "            \r\n\u001b[?2004l\r\u001b[?2004h> "]
[51.787874, "o", "            # Reset for new entry\r\n\u001b[?2004l\r"]
[51.787894, "o", "\u001b[?2004h> "]
[51.788001, "o", "            current_entry=\"\"\r\n\u001b[?2004l\r\u001b[?2004h> "]
[51.788082, "o", "            entry_category=\"\"\r\n\u001b[?2004l\r"]
[51.788126, "o", "\u001b[?2004h> "]
[51.788174, "o", "            in_entry=false\r\n\u001b[?2004l\r"]
[51.788204, "o", "\u001b[?2004h> "]
[51.788234, "o", "        fi\r\n\u001b[?2004l\r"]
[51.788264, "o", "\u001b[?2004h> "]
[51.7883, "o", "        \r\n\u001b[?2004l\r\u001b[?2004h"]
[51.788314, "o", "> "]
[51.788462, "o", "        # Check if current line matches any critical regex patterns\r\n\u001b[?2004l\r"]
[51.788494, "o", "\u001b[?2004h> "]
[51.788561, "o", "        entry_category=\"\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[51.788604, "o", "> "]
[51.788865, "o", "        if [[ \"$line\" == *\"ERROR\"* ]] || [[ \"$line\" == *\"FATAL\"* ]] || [[ \"$line\" =~ HTTP\\/1\\.1\\ 5[0-9]{2} ]]; then\r\n\u001b[?2004l\r"]
[51.788902, "o", "\u001b[?2004h> "]
[51.788958, "o", "            in_entry=true\r\n\u001b[?2004l\r"]
[51.788988, "o", "\u001b[?2004h> "]
[51.789125, "o", "            # Determine error category (first match wins)\r\n\u001b[?2004l\r"]
[51.789166, "o", "\u001b[?2004h> "]
[51.78931, "o", "            if [[ \"$line\" == *\"Payment failed\"* ]]; then\r\n\u001b[?2004l\r"]
[51.789353, "o", "\u001b[?2004h> "]
[51.789481, "o", "                entry_category=\"PAYMENT_FAILURE\"\r\n\u001b[?2004l\r"]
[51.789517, "o", "\u001b[?2004h> "]
[51.789674, "o", "            elif [[ \"$line\" =~ HTTP\\/1\\.1\\ 5[0-9]{2} ]]; then\r\n\u001b[?2004l\r"]
[51.789717, "o", "\u001b[?2004h> "]
[51.789827, "o", "                entry_category=\"HTTP_5XX\"\r\n\u001b[?2004l\r"]
[51.789869, "o", "\u001b[?2004h"]
[51.789882, "o", "> "]
[51.790014, "o", "            elif [[ \"$line\" == *\"FATAL\"* ]]; then\r\n\u001b[?2004l\r"]
[51.790043, "o", "\u001b[?2004h> "]
[51.790134, "o", "                entry_category=\"FATAL\"\r\n\u001b[?2004l\r"]
[51.790174, "o", "\u001b[?2004h> "]
[51.790205, "o", "            fi\r\n\u001b[?2004l\r\u001b[?2004h"]
[51.790231, "o", "> "]
[51.790253, "o", "        else\r\n\u001b[?2004l\r"]
[51.79028, "o", "\u001b[?2004h> "]
[51.790433, "o", "            # Line doesn't match critical patterns, skip entry\r\n\u001b[?2004l\r"]
[51.79047, "o", "\u001b[?2004h> "]
[51.79052, "o", "            continue\r\n\u001b[?2004l\r"]
[51.79055, "o", "\u001b[?2004h> "]
[51.790563, "o", "        fi\r\n\u001b[?2004l\r"]
[51.790591, "o", "\u001b[?2004h> "]
[51.790625, "o", "    else\r\n\u001b[?2004l\r\u001b[?2004h"]
[51.79065, "o", "> "]
[51.790833, "o", "        # Line doesn't start with timestamp - continuation of previous entry\r\n\u001b[?2004l\r"]
[51.790864, "o", "\u001b[?2004h> "]
[51.790938, "o", "        if $in_entry; then\r\n\u001b[?2004l\r"]
[51.790963, "o", "\u001b[?2004h> "]
[51.791106, "o", "            # Only continue if we're in a critical entry\r\n\u001b[?2004l\r"]
[51.791131, "o", "\u001b[?2004h> "]
[51.791219, "o", "            current_entry+=\"$line\\n\"\r\n\u001b[?2004l\r"]
[51.791245, "o", "\u001b[?2004h> "]
[51.791273, "o", "        fi\r\n\u001b[?2004l\r"]
[51.791296, "o", "\u001b[?2004h> "]
[51.791322, "o", "    fi\r\n\u001b[?2004l\r"]
[51.791345, "o", "\u001b[?2004h"]
[51.791367, "o", ">     \r\n\u001b[?2004l\r\u001b[?2004h"]
[51.791391, "o", "> "]
[51.791507, "o", "    # If we're in an entry, add the current line\r\n\u001b[?2004l\r"]
[51.791538, "o", "\u001b[?2004h> "]
[51.791597, "o", "    if $in_entry; then\r\n\u001b[?2004l\r"]
[51.79162, "o", "\u001b[?2004h> "]
[51.791705, "o", "        current_entry+=\"$line\\n\"\r\n\u001b[?2004l\r"]
[51.791728, "o", "\u001b[?2004h> "]
[51.791754, "o", "    fi\r\n\u001b[?2004l\r"]
[51.791786, "o", "\u001b[?2004h> "]
[51.791832, "o", "done < \"$input_log\"\r\n\u001b[?2004l\r"]
[51.791857, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.79189, "o", "\u001b[?2004h> "]
[51.79199, "o", "# Process the last entry in the file\r\n\u001b[?2004l\r"]
[51.792014, "o", "\u001b[?2004h> "]
[51.792133, "o", "if $in_entry && [ -n \"$entry_category\" ]; then\r\n\u001b[?2004l\r"]
[51.792161, "o", "\u001b[?2004h> "]
[51.792465, "o", "    current_entry=\"$(echo \"$current_entry\" | sed -E 's/\\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}\\b/<REDACTED>/g')\"\r\n\u001b[?2004l\r"]
[51.792492, "o", "\u001b[?2004h> "]
[51.792617, "o", "    echo -e \"$current_entry\" >> \"${critical_log}\"\r\n\u001b[?2004l\r"]
[51.792641, "o", "\u001b[?2004h> "]
[51.792665, "o", "    \r\n"]
[51.792691, "o", "\u001b[?2004l\r\u001b[?2004h"]
[51.792715, "o", "> "]
[51.792829, "o", "    if [ -n \"${error_counts[$entry_category]}\" ]; then\r\n\u001b[?2004l\r"]
[51.792855, "o", "\u001b[?2004h> "]
[51.793052, "o", "        error_counts[$entry_category]=$((error_counts[$entry_category] + 1))\r\n\u001b[?2004l\r"]
[51.793079, "o", "\u001b[?2004h> "]
[51.793104, "o", "    else\r\n\u001b[?2004l\r"]
[51.793129, "o", "\u001b[?2004h"]
[51.793152, "o", "> "]
[51.793228, "o", "        error_counts[$entry_category]=1\r\n\u001b[?2004l\r"]
[51.793252, "o", "\u001b[?2004h> "]
[51.793281, "o", "    fi\r\n\u001b[?2004l\r"]
[51.793306, "o", "\u001b[?2004h"]
[51.793319, "o", "> fi\r\n\u001b[?2004l\r"]
[51.793367, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[51.793473, "o", "# Generate CSV summary from error counts\r\n\u001b[?2004l\r"]
[51.793497, "o", "\u001b[?2004h> "]
[51.7936, "o", "# Create temporary file for sorted CSV\r\n\u001b[?2004l\r"]
[51.793625, "o", "\u001b[?2004h> "]
[51.793748, "o", "csv_temp=\"${output_dir}/error_summary_temp.csv\"\r\n\u001b[?2004l\r"]
[51.793772, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.793797, "o", "\u001b[?2004h> "]
[51.793878, "o", "# Write header to temp file\r\n\u001b[?2004l\r"]
[51.793903, "o", "\u001b[?2004h> "]
[51.794024, "o", "echo \"error_category,count\" > \"${csv_temp}\"\r\n\u001b[?2004l\r"]
[51.794052, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.794065, "o", "\u001b[?2004h"]
[51.794089, "o", "> "]
[51.794167, "o", "# Write error counts to temp file\r\n\u001b[?2004l\r"]
[51.794192, "o", "\u001b[?2004h> "]
[51.794298, "o", "for category in \"${!error_counts[@]}\"; do\r\n\u001b[?2004l\r"]
[51.794322, "o", "\u001b[?2004h> "]
[51.794491, "o", "    echo \"$category,${error_counts[$category]}\" >> \"${csv_temp}\"\r\n\u001b[?2004l\r"]
[51.794516, "o", "\u001b[?2004h> "]
[51.794556, "o", "done\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.794592, "o", "\u001b[?2004h> "]
[51.794759, "o", "# Sort CSV: first by count descending, then by category ascending\r\n\u001b[?2004l\r"]
[51.794784, "o", "\u001b[?2004h> "]
[51.794957, "o", "sort -t, -k2,2nr -k1,1 ${csv_temp} | tail -n +2 >> \"${csv_summary}\"\r\n\u001b[?2004l\r"]
[51.794982, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.795006, "o", "\u001b[?2004h> "]
[51.79507, "o", "# Remove temporary file\r\n\u001b[?2004l\r"]
[51.795095, "o", "\u001b[?2004h> "]
[51.795143, "o", "rm -f \"${csv_temp}\"\r\n\u001b[?2004l\r"]
[51.795167, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[51.79519, "o", "\u001b[?2004h> "]
[51.795261, "o", "# Log successful execution\r\n\u001b[?2004l\r"]
[51.795284, "o", "\u001b[?2004h> "]
[51.795382, "o", "timestamp=$(date '+%Y-%m-%d|%H:%M:%S')\r\n\u001b[?2004l\r"]
[51.795407, "o", "\u001b[?2004h> "]
[51.795693, "o", "echo \"${timestamp}|input=${abs_input_log}|output_dir=${abs_output_dir}|status=OK\" >> /home/user/filter_run.log\r\n\u001b[?2004l\r"]
[51.795719, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[51.795751, "o", "> EOF\r\n\u001b[?2004l\r"]
[51.849552, "o", "\u001b[?2004hroot@fd4a139f-8acc-4084-be6b-6e74425ff41e:/home/user# "]
[52.797041, "i", "chmod +x /home/user/scripts/filter_errors.sh\n"]
[52.797455, "o", "chmod +x /home/user/scripts/filter_errors.sh\r\n"]
[52.797488, "o", "\u001b[?2004l\r"]
[52.798857, "o", "\u001b[?2004h"]
[52.798874, "o", "root@fd4a139f-8acc-4084-be6b-6e74425ff41e:/home/user# "]
[52.936854, "i", "echo \"Script created successfully at /home/user/scripts/filter_errors.sh\"\n"]
[52.93736, "o", "echo \"Script created successfully at /home/user/scripts/filter_errors.sh\"\r\n\u001b[?2004l\r"]
[52.937436, "o", "Script created successfully at /home/user/scripts/filter_errors.sh\r\n"]
[52.937499, "o", "\u001b[?2004h"]
[52.937533, "o", "root@fd4a139f-8acc-4084-be6b-6e74425ff41e:/home/user# "]
