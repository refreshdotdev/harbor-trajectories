New Terminal Output:

root@595bfb79-84dc-4db9-bbd2-82e789f1311d:/home/user/cloud_costs# jq -s . processed/unblocked_data.json > processed/unblocked_array.json
root@595bfb79-84dc-4db9-bbd2-82e789f1311d:/home/user/cloud_costs# cat processed/unblocked_array.json
[
  {
    "account_id": "acct-002",
    "service": "RDS",
    "cost": 2105.33,
    "currency": "EUR"
  },
  {
    "account_id": "acct-003",
    "service": "S3",
    "cost": 876.5,
    "currency": "USD"
  }
]
root@595bfb79-84dc-4db9-bbd2-82e789f1311d:/home/user/cloud_costs# jq --argjson rates "$(cat processed/exchange_rates.json)" '.[] | .cost_in_usd = (if $rates[.cu
rrency] then (.cost * $rates[.currency]) else (.cost * 1.0) end) | .cost_in_usd |= (. * 100 | floor | . / 100) | . + {batch_id: "$(cat processed/batch_id.txt)"}
' processed/unblocked_array.json > processed/usd_converted.json
root@595bfb79-84dc-4db9-bbd2-82e789f1311d:/home/user/cloud_costs# cat processed/usd_converted.json
{
  "account_id": "acct-002",
  "service": "RDS",
  "cost": 2105.33,
  "currency": "EUR",
  "cost_in_usd": 2273.75,
  "batch_id": "$(cat processed/batch_id.txt)"
}
{
  "account_id": "acct-003",
  "service": "S3",
  "cost": 876.5,
  "currency": "USD",
  "cost_in_usd": 876.5,
  "batch_id": "$(cat processed/batch_id.txt)"
}
root@595bfb79-84dc-4db9-bbd2-82e789f1311d:/home/user/cloud_costs#
